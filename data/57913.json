{
    "id": "openstack%2Fglance~master~I43a7d22d86a6b381ee8b251f66c4e3cf27e81c4e",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bug/1253963",
    "hashtags": [],
    "change_id": "I43a7d22d86a6b381ee8b251f66c4e3cf27e81c4e",
    "subject": "Enhance policy checking, define only image creator can delete the image",
    "status": "ABANDONED",
    "created": "2013-11-22 12:39:35.000000000",
    "updated": "2013-11-29 06:25:47.000000000",
    "insertions": 4,
    "deletions": 10,
    "total_comment_count": 0,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "c5e51c2514bc43b3189f09d52e5f22caa4b38e34",
    "_number": 57913,
    "owner": {
        "_account_id": 9206,
        "name": "LIN, BO-CHUN",
        "email": "sherry7737@gmail.com",
        "username": "SherryLin"
    },
    "labels": {
        "Verified": {
            "disliked": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "all": [
                {
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "_account_id": 8911,
                    "name": "Sergey Vilgelm",
                    "email": "sergey@vilgelm.info",
                    "username": "sergey.vilgelm"
                },
                {
                    "_account_id": 6484,
                    "name": "Feilong Wang",
                    "email": "hustemb@gmail.com",
                    "username": "flwang"
                },
                {
                    "_account_id": 9206,
                    "name": "LIN, BO-CHUN",
                    "email": "sherry7737@gmail.com",
                    "username": "SherryLin"
                },
                {
                    "value": -1,
                    "date": "2013-11-22 13:11:26.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": -1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "rejected": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "disliked": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "all": [
                {
                    "value": -1,
                    "date": "2013-11-23 19:22:28.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "value": -1,
                    "date": "2013-11-22 12:57:17.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 8911,
                    "name": "Sergey Vilgelm",
                    "email": "sergey@vilgelm.info",
                    "username": "sergey.vilgelm"
                },
                {
                    "value": -2,
                    "date": "2013-11-24 13:15:10.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 6484,
                    "name": "Feilong Wang",
                    "email": "hustemb@gmail.com",
                    "username": "flwang"
                },
                {
                    "value": 0,
                    "date": "2013-11-25 02:56:26.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 9206,
                    "name": "LIN, BO-CHUN",
                    "email": "sherry7737@gmail.com",
                    "username": "SherryLin"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "value": -1,
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "all": [
                {
                    "date": "2013-11-23 19:22:28.000000000",
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "_account_id": 8911,
                    "name": "Sergey Vilgelm",
                    "email": "sergey@vilgelm.info",
                    "username": "sergey.vilgelm"
                },
                {
                    "date": "2013-11-24 13:15:10.000000000",
                    "_account_id": 6484,
                    "name": "Feilong Wang",
                    "email": "hustemb@gmail.com",
                    "username": "flwang"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 0
                    },
                    "_account_id": 9206,
                    "name": "LIN, BO-CHUN",
                    "email": "sherry7737@gmail.com",
                    "username": "SherryLin"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "_account_id": 8911,
                    "name": "Sergey Vilgelm",
                    "email": "sergey@vilgelm.info",
                    "username": "sergey.vilgelm"
                },
                {
                    "_account_id": 6484,
                    "name": "Feilong Wang",
                    "email": "hustemb@gmail.com",
                    "username": "flwang"
                },
                {
                    "_account_id": 9206,
                    "name": "LIN, BO-CHUN",
                    "email": "sherry7737@gmail.com",
                    "username": "SherryLin"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            {
                "_account_id": 8911,
                "name": "Sergey Vilgelm",
                "email": "sergey@vilgelm.info",
                "username": "sergey.vilgelm"
            },
            {
                "_account_id": 9206,
                "name": "LIN, BO-CHUN",
                "email": "sherry7737@gmail.com",
                "username": "SherryLin"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2013-11-22 12:57:17.000000000",
            "updated_by": {
                "_account_id": 8911,
                "name": "Sergey Vilgelm",
                "email": "sergey@vilgelm.info",
                "username": "sergey.vilgelm"
            },
            "reviewer": {
                "_account_id": 8911,
                "name": "Sergey Vilgelm",
                "email": "sergey@vilgelm.info",
                "username": "sergey.vilgelm"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-11-22 13:11:26.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-11-23 19:22:28.000000000",
            "updated_by": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "reviewer": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-11-24 13:15:10.000000000",
            "updated_by": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "reviewer": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "95256d7935c6e19c5babadb4db92e93248c834ef",
            "author": {
                "_account_id": 8911,
                "name": "Sergey Vilgelm",
                "email": "sergey@vilgelm.info",
                "username": "sergey.vilgelm"
            },
            "real_author": {
                "_account_id": 8911,
                "name": "Sergey Vilgelm",
                "email": "sergey@vilgelm.info",
                "username": "sergey.vilgelm"
            },
            "date": "2013-11-22 12:57:17.000000000",
            "message": "Patch Set 1: I would prefer that you didn't merge this\n\nWrite tests, please.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "e70c903a65848a795b2c1545564f1e7241a12e45",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-11-22 13:11:26.000000000",
            "message": "Patch Set 1: Doesn't seem to work\n\nBuild failed.  For information on how to proceed, see https://wiki.openstack.org/wiki/GerritJenkinsGit#Test_Failures\n\n- gate-glance-pep8 http://logs.openstack.org/13/57913/1/check/gate-glance-pep8/f287f31 : SUCCESS in 2m 34s\n- gate-glance-docs http://docs-draft.openstack.org/13/57913/1/check/gate-glance-docs/9e51f49/doc/build/html/ : SUCCESS in 1m 29s\n- gate-glance-python26 http://logs.openstack.org/13/57913/1/check/gate-glance-python26/0abf867 : SUCCESS in 13m 52s\n- gate-glance-python27 http://logs.openstack.org/13/57913/1/check/gate-glance-python27/e1d7dc3 : SUCCESS in 11m 36s\n- check-tempest-devstack-vm-full http://logs.openstack.org/13/57913/1/check/check-tempest-devstack-vm-full/c44b265 : SUCCESS in 31m 38s\n- check-tempest-devstack-vm-postgres-full http://logs.openstack.org/13/57913/1/check/check-tempest-devstack-vm-postgres-full/0a3b622 : FAILURE in 31m 46s\n- check-tempest-devstack-vm-neutron http://logs.openstack.org/13/57913/1/check/check-tempest-devstack-vm-neutron/6305e07 : SUCCESS in 25m 15s\n- gate-tempest-devstack-vm-large-ops http://logs.openstack.org/13/57913/1/check/gate-tempest-devstack-vm-large-ops/45012e6 : SUCCESS in 15m 25s\n- gate-tempest-devstack-vm-neutron-large-ops http://logs.openstack.org/13/57913/1/check/gate-tempest-devstack-vm-neutron-large-ops/4e0a5a5 : SUCCESS in 16m 19s (non-voting)\n- check-grenade-devstack-vm http://logs.openstack.org/13/57913/1/check/check-grenade-devstack-vm/7dd3e48 : SUCCESS in 23m 12s\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "a48abae8137f797750c10372e3880dcaaafb115a",
            "author": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "real_author": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "date": "2013-11-23 19:22:28.000000000",
            "message": "Patch Set 1: I would prefer that you didn't merge this\n\nThanks for the patch Lin.\n\nCouple of points here:\n(1) This patch is great because it is going towards the direction other projects like nova implement policies.\n\n(2) Is there a reason why you picked user_id instead of project_id?\n\n(3) Also I think it is just bigger than deleting images, and can be applied to other operations as well. This patch implies moving towards a new direction for implementing who can operate on an image. Currently we do this enforcement in the code right now. Maybe a blueprint could be submitted for the bigger change?\n\n(4) Finally I agree with Servgey, could you please add tests?",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "40be689552cecadd40b85f2d716bc8497a5f3624",
            "author": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "real_author": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "date": "2013-11-24 13:15:10.000000000",
            "message": "Patch Set 1: Do not merge\n\nThanks for working on this. I think this change is managing the operations permission more fine-grained. But I would like to stop merging this.\n\n1. As iccha said, this is a big change for current policy mechanism. So it would be nice if it can be tracked by a blueprint instead of bug.\n\n2. Could you please share the user scenario why you need this? Because generally, user should be belongs to a tenant and we can create policy against tenatnt/project. Though I totally understand we really need a user level policy.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "0c4f5bbd2823c0da8b15404469461f3e12c65aa6",
            "author": {
                "_account_id": 9206,
                "name": "LIN, BO-CHUN",
                "email": "sherry7737@gmail.com",
                "username": "SherryLin"
            },
            "real_author": {
                "_account_id": 9206,
                "name": "LIN, BO-CHUN",
                "email": "sherry7737@gmail.com",
                "username": "SherryLin"
            },
            "date": "2013-11-25 02:56:26.000000000",
            "message": "Patch Set 1:\n\nThanks for your response.\n\nIn our case, there are many people in a tenant as a member. User can take an instance snapshot for backup the image. And the image will be store in glance service. But in glance, other user which is the same tenant member can also delete the image. We think this may be a problem that if my backup image could be deleted by other.\n\nSo, extended this idea to the general image. We think it doesn\u2019t make sense that if i upload an image to glance, but other member can delete or modify it. So, we want to define that only the user(match project_id and user_id) or \u201cproject admin\u201d can modify or delete it.\n\nI think this patch is just an emergency treatment for our project. It could not solve all policy request. It needs more comprehensive consideration for all operations.\n\nthanks for you guys, this remind me more thing need to consider.\n\nI will abandon this commit. So, if we want this function work in the future, what i need to do? Register a blueprint?\nThanks you for answering my question.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "c4d100945c29ff5c216d2013c5ced984ac9e18d4",
            "author": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "real_author": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "date": "2013-11-25 05:10:41.000000000",
            "message": "Patch Set 1:\n\nYep, please create a blueprint and redesign it. I'm glad to review it and hope it can be merged in Icehouse. Thanks again for contributing Glance.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "2b4fbc9d94e200a83c8c808810ae8833e6232b3e",
            "author": {
                "_account_id": 9206,
                "name": "LIN, BO-CHUN",
                "email": "sherry7737@gmail.com",
                "username": "SherryLin"
            },
            "real_author": {
                "_account_id": 9206,
                "name": "LIN, BO-CHUN",
                "email": "sherry7737@gmail.com",
                "username": "SherryLin"
            },
            "date": "2013-11-29 06:25:47.000000000",
            "message": "Patch Set 1: Abandoned",
            "accounts_in_message": [],
            "_revision_number": 1
        }
    ],
    "requirements": [],
    "submit_records": []
}