{
    "id": "openstack%2Fglance~master~I5c72a7692e7bb0ed36613f5dbfb42142afc5bd6e",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bug/1433435",
    "hashtags": [],
    "change_id": "I5c72a7692e7bb0ed36613f5dbfb42142afc5bd6e",
    "subject": "Set http_keepalive default value to False",
    "status": "ABANDONED",
    "created": "2015-03-18 07:28:13.000000000",
    "updated": "2015-05-21 21:47:41.000000000",
    "insertions": 30,
    "deletions": 13,
    "total_comment_count": 4,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "7d43e87ba3febaa52addbcc95e6401bef512a356",
    "_number": 165321,
    "owner": {
        "_account_id": 9303,
        "name": "Abhishek Kekane",
        "email": "akekane@redhat.com",
        "username": "abhishekkekane"
    },
    "labels": {
        "Verified": {
            "recommended": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "all": [
                {
                    "date": "2015-03-19 03:40:02.000000000",
                    "_account_id": 6549,
                    "name": "Zhi Yan Liu",
                    "email": "lzy.dev@gmail.com",
                    "username": "lzy-dev"
                },
                {
                    "date": "2015-03-19 06:46:44.000000000",
                    "_account_id": 9303,
                    "name": "Abhishek Kekane",
                    "email": "akekane@redhat.com",
                    "username": "abhishekkekane"
                },
                {
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 1,
                    "date": "2015-03-18 11:20:44.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "rejected": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "all": [
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 6549,
                    "name": "Zhi Yan Liu",
                    "email": "lzy.dev@gmail.com",
                    "username": "lzy-dev"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -2,
                        "max": 2
                    },
                    "_account_id": 9303,
                    "name": "Abhishek Kekane",
                    "email": "akekane@redhat.com",
                    "username": "abhishekkekane"
                },
                {
                    "value": -2,
                    "date": "2015-03-18 12:58:19.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "all": [
                {
                    "_account_id": 6549,
                    "name": "Zhi Yan Liu",
                    "email": "lzy.dev@gmail.com",
                    "username": "lzy-dev"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 9303,
                    "name": "Abhishek Kekane",
                    "email": "akekane@redhat.com",
                    "username": "abhishekkekane"
                },
                {
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "_account_id": 6549,
                    "name": "Zhi Yan Liu",
                    "email": "lzy.dev@gmail.com",
                    "username": "lzy-dev"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 2
                    },
                    "_account_id": 9303,
                    "name": "Abhishek Kekane",
                    "email": "akekane@redhat.com",
                    "username": "abhishekkekane"
                },
                {
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2015-03-18 11:20:44.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2015-03-18 12:58:19.000000000",
            "updated_by": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "reviewer": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2015-03-19 03:40:02.000000000",
            "updated_by": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "reviewer": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "422aa7498a541832465c480d89df553a5c95a614",
            "author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "real_author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "date": "2015-03-18 07:28:13.000000000",
            "message": "Uploaded patch set 1.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "f25ceda15e5bd805b295a0b07d7d3f7fee498699",
            "author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "real_author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "date": "2015-03-18 08:17:41.000000000",
            "message": "Patch Set 1: Code-Review-1\n\n(1 comment)\n\nAnd I think we'd better land this change on configuration with Kilo release.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "3fa3e424fb5b1635b2f9ad7ba50eded5d4ca3a85",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2015-03-18 08:18:58.000000000",
            "message": "Patch Set 1: Verified+1\n\nBuild succeeded (check pipeline).\n\n- gate-glance-pep8 http://logs.openstack.org/21/165321/1/check/gate-glance-pep8/f7eed89/ : SUCCESS in 2m 57s\n- gate-glance-docs http://docs-draft.openstack.org/21/165321/1/check/gate-glance-docs/be5a899//doc/build/html/ : SUCCESS in 2m 26s\n- gate-glance-python27 http://logs.openstack.org/21/165321/1/check/gate-glance-python27/3ad3051/ : SUCCESS in 7m 26s\n- check-tempest-dsvm-full http://logs.openstack.org/21/165321/1/check/check-tempest-dsvm-full/d999d4d/ : SUCCESS in 41m 56s\n- check-tempest-dsvm-postgres-full http://logs.openstack.org/21/165321/1/check/check-tempest-dsvm-postgres-full/7dbefb5/ : SUCCESS in 47m 02s\n- check-tempest-dsvm-neutron-full http://logs.openstack.org/21/165321/1/check/check-tempest-dsvm-neutron-full/9903d2f/ : SUCCESS in 50m 40s\n- check-grenade-dsvm http://logs.openstack.org/21/165321/1/check/check-grenade-dsvm/1208eff/ : SUCCESS in 46m 50s\n- gate-tempest-dsvm-large-ops http://logs.openstack.org/21/165321/1/check/gate-tempest-dsvm-large-ops/7247a0c/ : SUCCESS in 25m 56s\n- gate-tempest-dsvm-neutron-large-ops http://logs.openstack.org/21/165321/1/check/gate-tempest-dsvm-neutron-large-ops/a6d8483/ : SUCCESS in 24m 13s\n- check-devstack-dsvm-cells http://logs.openstack.org/21/165321/1/check/check-devstack-dsvm-cells/d5d6bd9/ : SUCCESS in 18m 45s\n- gate-rally-dsvm-glance http://logs.openstack.org/21/165321/1/check/gate-rally-dsvm-glance/edc9b3f/ : SUCCESS in 26m 14s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "50f3580ee0edd5513f5b2a9b3798b4f7c2c6eff6",
            "author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "real_author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "date": "2015-03-18 09:13:30.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "c11e8920a66c753b177b06bb75a3ef0c1e61e46f",
            "author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "real_author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "date": "2015-03-18 09:15:37.000000000",
            "message": "Patch Set 1:\n\n(1 comment)\n\nHi Zhi,\n\nThank you for review.\nI have implemented your suggestions.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "4f5f4cca5ca6f60206f4d856acc711fe40fd97b4",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2015-03-18 10:10:05.000000000",
            "message": "Patch Set 2: Verified+1\n\nBuild succeeded (check pipeline).\n\n- gate-glance-pep8 http://logs.openstack.org/21/165321/2/check/gate-glance-pep8/4adb4e5/ : SUCCESS in 2m 01s\n- gate-glance-docs http://docs-draft.openstack.org/21/165321/2/check/gate-glance-docs/10ee92d//doc/build/html/ : SUCCESS in 2m 07s\n- gate-glance-python27 http://logs.openstack.org/21/165321/2/check/gate-glance-python27/57410ef/ : SUCCESS in 5m 30s\n- check-tempest-dsvm-full http://logs.openstack.org/21/165321/2/check/check-tempest-dsvm-full/3f009bf/ : SUCCESS in 42m 08s\n- check-tempest-dsvm-postgres-full http://logs.openstack.org/21/165321/2/check/check-tempest-dsvm-postgres-full/2522360/ : SUCCESS in 48m 11s\n- check-tempest-dsvm-neutron-full http://logs.openstack.org/21/165321/2/check/check-tempest-dsvm-neutron-full/2ad3122/ : SUCCESS in 56m 26s\n- check-grenade-dsvm http://logs.openstack.org/21/165321/2/check/check-grenade-dsvm/0ff6cb7/ : SUCCESS in 44m 33s\n- gate-tempest-dsvm-large-ops http://logs.openstack.org/21/165321/2/check/gate-tempest-dsvm-large-ops/6b6426b/ : SUCCESS in 25m 08s\n- gate-tempest-dsvm-neutron-large-ops http://logs.openstack.org/21/165321/2/check/gate-tempest-dsvm-neutron-large-ops/5d4a48c/ : SUCCESS in 27m 01s\n- check-devstack-dsvm-cells http://logs.openstack.org/21/165321/2/check/check-devstack-dsvm-cells/f3f581b/ : SUCCESS in 19m 15s\n- gate-rally-dsvm-glance http://logs.openstack.org/21/165321/2/check/gate-rally-dsvm-glance/cce2b90/ : SUCCESS in 29m 53s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "b3cabe3141d761343da93b5ef55f87e3ebfb3a6c",
            "author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "real_author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "date": "2015-03-18 10:18:39.000000000",
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)\n\nThanks Abhishek Kekane.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "642f6d99ef596ce620373ddb7eb9061cf9a3b694",
            "author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "real_author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "date": "2015-03-18 10:22:34.000000000",
            "message": "Patch Set 2:\n\n(1 comment)",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "18dcbe1f18e4d4186b9259a48dd9fc033bddd5ce",
            "author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "real_author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "date": "2015-03-18 10:27:49.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "8e481c292672600b9b70715eabf9c3b19b205888",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2015-03-18 11:20:44.000000000",
            "message": "Patch Set 3: Verified+1\n\nBuild succeeded (check pipeline).\n\n- gate-glance-pep8 http://logs.openstack.org/21/165321/3/check/gate-glance-pep8/818fb80/ : SUCCESS in 2m 10s\n- gate-glance-docs http://docs-draft.openstack.org/21/165321/3/check/gate-glance-docs/28917d9//doc/build/html/ : SUCCESS in 2m 14s\n- gate-glance-python27 http://logs.openstack.org/21/165321/3/check/gate-glance-python27/b0de46a/ : SUCCESS in 7m 04s\n- check-tempest-dsvm-full http://logs.openstack.org/21/165321/3/check/check-tempest-dsvm-full/e26b655/ : SUCCESS in 39m 03s\n- check-tempest-dsvm-postgres-full http://logs.openstack.org/21/165321/3/check/check-tempest-dsvm-postgres-full/4c43624/ : SUCCESS in 41m 45s\n- check-tempest-dsvm-neutron-full http://logs.openstack.org/21/165321/3/check/check-tempest-dsvm-neutron-full/b99662a/ : SUCCESS in 52m 19s\n- check-grenade-dsvm http://logs.openstack.org/21/165321/3/check/check-grenade-dsvm/746c27d/ : SUCCESS in 47m 06s\n- gate-tempest-dsvm-large-ops http://logs.openstack.org/21/165321/3/check/gate-tempest-dsvm-large-ops/5e24637/ : SUCCESS in 27m 24s\n- gate-tempest-dsvm-neutron-large-ops http://logs.openstack.org/21/165321/3/check/gate-tempest-dsvm-neutron-large-ops/cee2ca8/ : SUCCESS in 23m 33s\n- check-devstack-dsvm-cells http://logs.openstack.org/21/165321/3/check/check-devstack-dsvm-cells/4a56918/ : SUCCESS in 20m 26s\n- gate-rally-dsvm-glance http://logs.openstack.org/21/165321/3/check/gate-rally-dsvm-glance/649fd78/ : SUCCESS in 32m 05s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "ac736da385385d175447ec9e1403377de0631a4c",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2015-03-18 12:58:19.000000000",
            "message": "Patch Set 3: Code-Review-2\n\nI'm concerned about this change based on some behaviour I've seen.\n\nWe had been hitting some issues with glance client (invoked by Nova) leaking file descriptors:\n\n https://review.openstack.org/#/c/156975\n\nWe tried changing http_keepalive to False in order to have the server tear down the socket and prevent an eventual 'too many file descriptors' issue.\n\nWhile setting to False did workaround the leaking socket issue (which has since been fixed) it was unusable due to the side effect of causing corrupted image downloads.\n\nWe tried two configurations: one where the SSL termination was done by stunnel (this is the standard TripleO configuration), and another where SSL termination was done by HA Proxy. In both cases, downloads of 'large' (> 200 MB) images were corrupted. Most of the image would get downloaded, but the final part would not.\n\nSo, while not necessarily an intrinsic Glance issue, the fact that this change will break image downloads for several deployment scenarios (including another OpenStack project - TripleO, when https is enabled) is problematic.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "607af5aa3f8352f55e00123c4ce7d44660c0292b",
            "author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "real_author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "date": "2015-03-19 03:40:02.000000000",
            "message": "Patch Set 3:\n\nHmm interesting..So to me that means actually we don't have a way to resolve stock leak issue for glance, finally we still have to turn the keepalive option on for normal image download case. Abhishek do you have any thoughts as the original fix provider?",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "ec7bf50f07668d33eff64cc011f2e9aa34032cee",
            "author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "real_author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "date": "2015-03-19 06:46:44.000000000",
            "message": "Patch Set 3:\n\nHi Zhi, Stuart,\n\nNot sure but can this patch will fix that download issue?\nhttps://review.openstack.org/#/c/119132/\n\neventlet socket timeout allows closing idle client connections after a period of configured time.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "1fe7e25228fe22aa3b8a0faff826905ab8c90ceb",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2015-03-19 12:17:52.000000000",
            "message": "Patch Set 3:\n\n@Zhi Yan\n\n> So to me that means actually we don't have a way to resolve stock leak issue for glance\n\nSpecifically which leak issue? Thanks.\n\n@Abhishek\n\nIt's not obvious to me that 119132 would prevent the download issue. (It does help in terms of ensuring that idle sockets are eventually closed.)\n\nRather than just disabling http keepalive, what we may want is eventlet to have something like apache's KeepAliveTimeout (http://httpd.apache.org/docs/2.2/mod/core.html#keepalive). That would allow leaving keepalive on (which is probably a good thing, for example, when listing many pages of images) but allows timing out of the persistent connection if it hasn't been re-used for a new request in a specified period of time.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "d88b2388c919eb7e8132ebaa86ad3d7e762e29c3",
            "author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "real_author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "date": "2015-03-20 07:35:56.000000000",
            "message": "Patch Set 3:\n\nHi Stuart, I mean this issue https://bugs.launchpad.net/nova/+bug/1361360 , which was fixed by https://review.openstack.org/#/c/130839 before. The reason to me  of why do this change was mentioned at here https://review.openstack.org/#/c/162964/2/glance/common/wsgi.py , as an inline comment, btw. Thanks.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "e74ceb2d803fa99dc23a34c9954a99c2fbf9f677",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2015-03-20 10:30:23.000000000",
            "message": "Patch Set 3:\n\n@Zhi Yan,\n\nThanks for clarifying.\n\nThere are two similar situations where a client connection can be held open indefinitely.\n\n1) A client makes a request, the server completes the request; http keepalive is 'True' so the server doesn't tear down the connection (it relies on the client to do so) but the client fails to ever close the connection.\n\n2) A client connects to the server, and just holds an open connection, ie never actually makes a legal request.\n\nIn the case of (1) the user will require an authenticated token. In the case of (2) the user can just do 'nc host port' to establish a connection -- no credentials required.\n\nEven if http_keepalive is set to False that does nothing to help case (2).\n\nhttps://review.openstack.org/#/c/119132/ can help with both cases. But has the problem that if you set the client_socket_timeout value too agressively (ie too low) then you may close a socket that has stalled temporarily, eg during the middle of a download.\n\nIt does seem that to keep the good aspect of http keepalive (eg for recycling sockets when listing large numbers of images) while preventing sockets being kept open by the client we need something like Apache's KeepAliveTimeout. This would allow us to keep a reasonably high value of client_socket_timeout (ie be forgiving of stalls during downloads) but set a low value for keep alive timeout, ie close the socket fairly quickly after handling a request if no new request is received.\n\nBased on the issues with setting keepalive to False (download corruption, potential performance hit to listing) and the fact that sockets can still be held open by (2), I'm leaning towards keeping the current default. (And maybe looking to add KeepAliveTimeout to eventlet).\n\nWhat do you think?",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "3e145ae82d56f5fa88aa22274384b819f742a818",
            "author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "real_author": {
                "_account_id": 9303,
                "name": "Abhishek Kekane",
                "email": "akekane@redhat.com",
                "username": "abhishekkekane"
            },
            "date": "2015-05-21 21:47:41.000000000",
            "message": "Abandoned",
            "accounts_in_message": [],
            "_revision_number": 3
        }
    ],
    "requirements": [],
    "submit_records": []
}