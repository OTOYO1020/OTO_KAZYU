{
    "id": "openstack%2Fglance~master~Idd844b615d362eae3197e106067c29dba8e3eeda",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bug/1038086",
    "hashtags": [],
    "change_id": "Idd844b615d362eae3197e106067c29dba8e3eeda",
    "subject": "Add policy check for downloading image.",
    "status": "MERGED",
    "created": "2012-08-20 17:59:50.000000000",
    "updated": "2012-08-21 23:09:51.000000000",
    "submitted": "2012-08-21 23:09:51.000000000",
    "submitter": {
        "_account_id": 3,
        "name": "Jenkins",
        "username": "jenkins"
    },
    "insertions": 47,
    "deletions": 3,
    "total_comment_count": 4,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "0d5bf0c22be0ade47af7063327e8f2739d0de9e9",
    "_number": 11660,
    "owner": {
        "_account_id": 177,
        "name": "Alex Meade",
        "email": "mr.alex.meade@gmail.com",
        "username": "alex-meade"
    },
    "labels": {
        "Verified": {
            "approved": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "recommended": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 1,
                    "date": "2012-08-21 21:20:11.000000000",
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 2,
                    "date": "2012-08-21 23:09:51.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "approved": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "all": [
                {
                    "value": 2,
                    "date": "2012-08-21 20:37:08.000000000",
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 2,
                    "date": "2012-08-21 22:12:17.000000000",
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "approved": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "all": [
                {
                    "value": 0,
                    "date": "2012-08-21 20:37:08.000000000",
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 1,
                    "date": "2012-08-21 22:12:17.000000000",
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2012-08-21 20:37:08.000000000",
            "updated_by": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "reviewer": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-08-21 21:20:11.000000000",
            "updated_by": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "reviewer": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-08-21 22:12:17.000000000",
            "updated_by": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "reviewer": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-08-21 23:09:51.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "10feafc66c59dfcc83322ccb63d560a982c9cbb1",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-20 18:14:26.000000000",
            "message": "Patch Set 1: Doesn't seem to work\n\nBuild failed\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1844/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-docs/22/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/1956/consoleFull : FAILURE\n- https://jenkins.openstack.org/job/gate-glance-python26/1463/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1467/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/8490/consoleFull : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "85e3634b64562da79385e7e09ea5056483a58be5",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-08-20 18:16:28.000000000",
            "message": "Patch Set 1: I would prefer that you didn't merge this\n\n(2 inline comments)\n\nI'm 50/50 on moving the HTTPForbidden raise into glance.api.policy. I want to see what Mark thinks.\n\nSee other comments inline.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "953b4aaf4064702728f3a9d4fc4d642a0b0a91d4",
            "author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "real_author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "date": "2012-08-20 18:30:34.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "040b58e871fdda75286da67d7a1e47eb49bb1ff9",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-20 18:44:02.000000000",
            "message": "Patch Set 2: Works for me\n\nBuild successful\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1845/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-docs/23/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/1957/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/1464/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1468/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/8503/consoleFull : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "70ad472c95707bfef83f8791d04e3a5adc39c028",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-08-21 15:32:10.000000000",
            "message": "Patch Set 2: I would prefer that you didn't merge this\n\nYeah I think this looks good except for moving the HTTP-specific exception type down into the policy api. Its just good housekeeping to keep http details out of there, which is a way to say its both not strictly necessary but long-term beneficial. And its nice for if you have surprise visitors.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "bd2fd9d34ef7c3ec10922d263e0b90510dc673c2",
            "author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "real_author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "date": "2012-08-21 19:05:58.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "1913edbf12978778fa03f1d4febbedec77a63862",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-21 19:30:25.000000000",
            "message": "Patch Set 3: Works for me\n\nBuild successful\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1856/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-docs/34/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/1968/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/1475/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1479/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/8655/consoleFull : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "6fa5fd183b6485b3af655a56dc404d42fbf891f2",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-08-21 19:34:31.000000000",
            "message": "Patch Set 3: Works for me\n\nSmokeStack Results (patch set 3):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/30746\n\tLibvirt (Fedora 17) Success: http://smokestack.openstack.org/?go=/jobs/30744\n\tXenServer 5.6 (F17 domU) Success: http://smokestack.openstack.org/?go=/jobs/30745\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "d96e5f64d8f6d785c513c1c0fce2a2f51f4814fb",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-08-21 20:32:26.000000000",
            "message": "Patch Set 3: I would prefer that you didn't merge this\n\n(2 inline comments)\n\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "4fcbce27f83b5c894619627a7be1105b24e2c82c",
            "author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "real_author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "date": "2012-08-21 20:35:01.000000000",
            "message": "Uploaded patch set 4.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "652ca8b448dd1eabe77e61729d7bec622cbfe586",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-08-21 20:37:08.000000000",
            "message": "Patch Set 4: Looks good to me (core reviewer)\n\n",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "21eadb055635a8c4f3c075c0658c29f96947edc6",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-21 20:56:39.000000000",
            "message": "Patch Set 4: Works for me\n\nBuild successful\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1858/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-docs/36/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/1970/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/1477/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1481/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/8678/consoleFull : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "c380e1b6ff432109015a68e6be7440e7876fcefe",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-08-21 21:20:11.000000000",
            "message": "Patch Set 4: Works for me\n\nSmokeStack Results (patch set 4):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/30785\n\tLibvirt (Fedora 17) Success: http://smokestack.openstack.org/?go=/jobs/30783\n\tXenServer 5.6 (F17 domU) Success: http://smokestack.openstack.org/?go=/jobs/30784\n",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "0b7370aa733686412acc4d83aac89690ecf52786",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-08-21 22:12:17.000000000",
            "message": "Patch Set 4: Looks good to me (core reviewer); Approved\n\nThanks for putting up with my weird metaphors and finishing this one out!",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "e67d4c2da24f2f8d4ffc04f5e2de95be221f5e3d",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-21 22:12:48.000000000",
            "message": "Patch Set 4: No score\n\nStarting gate jobs.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "00fd3901d2014b5051b9a689d1b70ffcd9ebc6d0",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-21 23:09:51.000000000",
            "message": "Patch Set 4: Verified\n\nBuild successful\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1860/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-docs/38/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/1972/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/1479/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1483/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/8718/consoleFull : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "ba8ca946130f479ff2fbb03c1b3ac5b7c874f1f8",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-21 23:09:51.000000000",
            "message": "Change has been successfully merged into the git repository.",
            "accounts_in_message": [],
            "_revision_number": 4
        }
    ],
    "requirements": [],
    "submit_records": []
}