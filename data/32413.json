{
    "id": "openstack%2Fglance~master~I65df0be5f156959c1e70ad9cb1a8b7eceebb4d8a",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "sql_optimization",
    "hashtags": [],
    "change_id": "I65df0be5f156959c1e70ad9cb1a8b7eceebb4d8a",
    "subject": "Sql query optimization for image detail",
    "status": "MERGED",
    "created": "2013-06-10 14:57:03.000000000",
    "updated": "2013-06-11 15:19:38.000000000",
    "submitted": "2013-06-11 15:19:37.000000000",
    "submitter": {
        "_account_id": 3,
        "name": "Jenkins",
        "username": "jenkins"
    },
    "insertions": 21,
    "deletions": 16,
    "total_comment_count": 0,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "c0b69b201edc87f3740a9aa687537f67a4d44f64",
    "_number": 32413,
    "owner": {
        "_account_id": 4463,
        "name": "iccha-sethi",
        "email": "iccha.sethi@rackspace.com",
        "username": "iccha-sethi"
    },
    "labels": {
        "Verified": {
            "approved": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "recommended": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 1,
                    "date": "2013-06-10 15:21:51.000000000",
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 2,
                    "date": "2013-06-11 15:19:37.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "approved": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "all": [
                {
                    "value": 0,
                    "date": "2013-06-10 18:29:00.000000000",
                    "permitted_voting_range": {
                        "min": 0,
                        "max": 1
                    },
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "value": 2,
                    "date": "2013-06-10 22:51:39.000000000",
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 2,
                    "date": "2013-06-11 14:23:32.000000000",
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "approved": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "all": [
                {
                    "value": 0,
                    "date": "2013-06-10 18:29:00.000000000",
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "value": 0,
                    "date": "2013-06-10 18:20:07.000000000",
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 1,
                    "date": "2013-06-11 14:23:32.000000000",
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "value": 0,
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2013-06-10 15:21:51.000000000",
            "updated_by": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "reviewer": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-06-10 18:20:07.000000000",
            "updated_by": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "reviewer": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-06-11 14:23:32.000000000",
            "updated_by": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "reviewer": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-06-11 15:19:37.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "c4e5f5479f2c78940ba5ce7ebca3f572a35887b9",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2013-06-10 15:21:51.000000000",
            "message": "Patch Set 1: Works for me\n\nSmokeStack Results (patch set 1):\n\tLibvirt (Fedora 18) Success: http://smokestack.openstack.org/?go=/jobs/90387\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "a9611301ce0f22e53d79736249db29e07a9a31fa",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-06-10 15:59:16.000000000",
            "message": "Patch Set 1: Doesn't seem to work\n\nBuild failed.  For information on how to proceed, see https://wiki.openstack.org/wiki/GerritJenkinsGithub#Test_Failures\n\n- http://logs.openstack.org/32413/1/check/gate-glance-pep8/4914 : SUCCESS in 1m 38s\n- http://docs-draft.openstack.org/32413/1/check/gate-glance-docs/2942/doc/build/html/ : SUCCESS in 1m 51s\n- http://logs.openstack.org/32413/1/check/gate-glance-python26/4359 : SUCCESS in 9m 38s\n- http://logs.openstack.org/32413/1/check/gate-glance-python27/4390 : SUCCESS in 7m 01s\n- http://logs.openstack.org/32413/1/check/gate-tempest-devstack-vm-full/21921 : SUCCESS in 44m 05s\n- http://logs.openstack.org/32413/1/check/gate-tempest-devstack-vm-postgres-full/21628 : SUCCESS in 44m 35s\n- http://logs.openstack.org/32413/1/check/gate-tempest-devstack-vm-quantum/29121 : FAILURE in 44m 39s\n- http://logs.openstack.org/32413/1/check/gate-grenade-devstack-vm/9126 : SUCCESS in 14m 14s (non-voting)\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "916c8494d056b2f549a4d9f6c6e5864a7e99e4ce",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2013-06-10 18:20:07.000000000",
            "message": "Patch Set 1: Looks good to me, but someone else must approve\n\nThis looks good to me and makes sense to fix the issue you were seeing.\n\nI wonder if this has any potential to mess with marker-based ordering, though. I'm not sure how we could test for that, though. . any ideas?",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "0774b35edcc7bd86429ab6a1eb2dd067a77dec92",
            "author": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "real_author": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "date": "2013-06-10 18:29:00.000000000",
            "message": "Patch Set 1:\n\nSo the first thing we do is we pick all the images the user is allowed to see  and then the paginate fn will order it and filter it in order to make sure that it behaves like the previous query. Does that answer your question Mark? Thanks for looking at it so promptly. If you have ideas for testing let me know.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "dac9347c5bad2c686a00f05e1c761965a542ba51",
            "author": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "real_author": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "date": "2013-06-10 21:09:43.000000000",
            "message": "Patch Set 1:\n\nrecheck 1185834",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "04f62fe083a0a3a527d1ab58d526c6c5102445a9",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2013-06-10 22:51:39.000000000",
            "message": "Patch Set 1: Looks good to me (core reviewer)\n\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "f55bc0abcc0f72cab31b93da03e175f7478aae0b",
            "author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "real_author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "date": "2013-06-11 14:23:32.000000000",
            "message": "Patch Set 1: Looks good to me (core reviewer); Approved\n\nAwesome, this took entirely too long to make sense to me :P\n\nI think I see some potential for some more tweaks around what we have indexed and how we filter, but they may depend more on what use cases are most common for different deployers rather than being improvements without tradeoffs. So if there is a deployer doing weird stuff out there then for now *they* can tweak their indexes. /rant\n\nThanks for this!",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "8b414fbe33ec47967799ba37b2212ecb3f064ff4",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-06-11 14:23:37.000000000",
            "message": "Patch Set 1: No score\n\nStarting gate jobs.\nhttp://status.openstack.org/zuul/",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "cb8f5d12cda8ef0a13fc699f25a9f6d4f950afe0",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-06-11 15:19:37.000000000",
            "message": "Patch Set 1: Verified\n\nBuild succeeded.\n\n- http://docs-draft.openstack.org/32413/1/gate/gate-glance-docs/2950/doc/build/html/ : SUCCESS in 2m 10s\n- http://logs.openstack.org/32413/1/gate/gate-glance-pep8/4922 : SUCCESS in 2m 01s\n- http://logs.openstack.org/32413/1/gate/gate-glance-python26/4367 : SUCCESS in 9m 53s\n- http://logs.openstack.org/32413/1/gate/gate-glance-python27/4398 : SUCCESS in 7m 42s\n- http://logs.openstack.org/32413/1/gate/gate-tempest-devstack-vm-full/22234 : SUCCESS in 44m 11s\n- http://logs.openstack.org/32413/1/gate/gate-tempest-devstack-vm-postgres-full/21941 : SUCCESS in 55m 49s\n- http://logs.openstack.org/32413/1/gate/gate-tempest-devstack-vm-quantum/29479 : SUCCESS in 18m 12s\n- http://logs.openstack.org/32413/1/gate/gate-grenade-devstack-vm/9395 : SUCCESS in 13m 48s (non-voting)\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "b75c86e7ddfb49d490c73c51bb470ae3ff7a0dda",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-06-11 15:19:38.000000000",
            "message": "Change has been successfully merged into the git repository.",
            "accounts_in_message": [],
            "_revision_number": 1
        }
    ],
    "requirements": [],
    "submit_records": []
}