{
    "id": "openstack%2Fglance~master~I76ecabc5ee266e2e9765740721e8ec1722cc5a7c",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bug/975655",
    "hashtags": [],
    "change_id": "I76ecabc5ee266e2e9765740721e8ec1722cc5a7c",
    "subject": "012_id_to_uuid: Also convert ramdisk + kernel ids",
    "status": "MERGED",
    "created": "2012-04-07 19:04:45.000000000",
    "updated": "2012-04-12 16:00:05.000000000",
    "submitted": "2012-04-12 16:00:05.000000000",
    "submitter": {
        "_account_id": 3,
        "name": "Jenkins",
        "username": "jenkins"
    },
    "insertions": 16,
    "deletions": 4,
    "total_comment_count": 0,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "2d46295e348e674de6a59c3f8dad212c09636a31",
    "_number": 6343,
    "owner": {
        "_account_id": 1420,
        "name": "Adam Gandelman",
        "email": "adamg@ubuntu.com",
        "username": "gandelman-a"
    },
    "labels": {
        "Verified": {
            "recommended": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 1420,
                    "name": "Adam Gandelman",
                    "email": "adamg@ubuntu.com",
                    "username": "gandelman-a"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 1,
                    "date": "2012-04-12 16:00:03.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                },
                {
                    "value": 0,
                    "_account_id": 67,
                    "name": "Vish Ishaya",
                    "email": "vishvananda@gmail.com",
                    "username": "vishvananda"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "approved": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "all": [
                {
                    "value": 2,
                    "date": "2012-04-12 15:27:23.000000000",
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 1420,
                    "name": "Adam Gandelman",
                    "email": "adamg@ubuntu.com",
                    "username": "gandelman-a"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 2,
                    "date": "2012-04-12 00:04:25.000000000",
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "date": "2012-04-12 16:00:03.000000000",
                    "permitted_voting_range": {
                        "min": 0,
                        "max": 1
                    },
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                },
                {
                    "value": 0,
                    "_account_id": 67,
                    "name": "Vish Ishaya",
                    "email": "vishvananda@gmail.com",
                    "username": "vishvananda"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "approved": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "all": [
                {
                    "value": 1,
                    "date": "2012-04-12 15:27:23.000000000",
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 1420,
                    "name": "Adam Gandelman",
                    "email": "adamg@ubuntu.com",
                    "username": "gandelman-a"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "date": "2012-04-12 00:04:25.000000000",
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                },
                {
                    "value": 0,
                    "_account_id": 67,
                    "name": "Vish Ishaya",
                    "email": "vishvananda@gmail.com",
                    "username": "vishvananda"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 1420,
                    "name": "Adam Gandelman",
                    "email": "adamg@ubuntu.com",
                    "username": "gandelman-a"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                },
                {
                    "value": 0,
                    "_account_id": 67,
                    "name": "Vish Ishaya",
                    "email": "vishvananda@gmail.com",
                    "username": "vishvananda"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            {
                "_account_id": 67,
                "name": "Vish Ishaya",
                "email": "vishvananda@gmail.com",
                "username": "vishvananda"
            },
            {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            {
                "_account_id": 1420,
                "name": "Adam Gandelman",
                "email": "adamg@ubuntu.com",
                "username": "gandelman-a"
            },
            {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2012-04-07 19:48:05.000000000",
            "updated_by": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "reviewer": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-04-11 20:47:17.000000000",
            "updated_by": {
                "_account_id": 67,
                "name": "Vish Ishaya",
                "email": "vishvananda@gmail.com",
                "username": "vishvananda"
            },
            "reviewer": {
                "_account_id": 67,
                "name": "Vish Ishaya",
                "email": "vishvananda@gmail.com",
                "username": "vishvananda"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-04-12 00:04:25.000000000",
            "updated_by": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "reviewer": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-04-12 15:27:23.000000000",
            "updated_by": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "reviewer": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-04-12 16:00:03.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "f108423f01a3285e517da21b0c6e3ae20e3a0a36",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-04-07 19:48:05.000000000",
            "message": "Patch Set 1:\n\nSmokeStack Results (patch set 1):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/17433\n\tLibvirt (Fedora 16) Success: http://smokestack.openstack.org/?go=/jobs/17431\n\tXenServer (Ubuntu 11.10) Success: http://smokestack.openstack.org/?go=/jobs/17432",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "23e1a7b1ab597f5505bba8bdaef48aa619d51853",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-04-07 22:57:05.000000000",
            "message": "Patch Set 1: I would prefer that you didn't submit this\n\nThe mapping you are updating is actually maintained by Nova, so It would make more sense to just provide a migration tool for Diablo -> Essex in the Nova codebase. I'm not really interested in putting this logic in Glance.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "ec83d56e08bac7a167b9a923f3ecd6211e08049b",
            "author": {
                "_account_id": 1420,
                "name": "Adam Gandelman",
                "email": "adamg@ubuntu.com",
                "username": "gandelman-a"
            },
            "real_author": {
                "_account_id": 1420,
                "name": "Adam Gandelman",
                "email": "adamg@ubuntu.com",
                "username": "gandelman-a"
            },
            "date": "2012-04-09 17:09:08.000000000",
            "message": "Patch Set 1:\n\nI'm not sure that mapping exists in Nova.  Or, if it does, it's not being used during instance spawn.  Paraphrased from _create_instance() in nova/compute/api.py, these IDs come directly from the registry:\n\nimage = image_service.show(context, image_id)\n...\nkernel_id = image['properties'].get('kernel_id', None)\nramdisk_id = image['properties'].get('ramdisk_id', None)\n...\nimage_service.show(context, kernel_id)\nimage_service.show(context, ramdisk_id)\n\n.. with the exceptions being raised in on the glance side during image_service.show()",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "9c9f94e2be83b19d05952adc1d6a80c07c0b7a6c",
            "author": {
                "_account_id": 1420,
                "name": "Adam Gandelman",
                "email": "adamg@ubuntu.com",
                "username": "gandelman-a"
            },
            "real_author": {
                "_account_id": 1420,
                "name": "Adam Gandelman",
                "email": "adamg@ubuntu.com",
                "username": "gandelman-a"
            },
            "date": "2012-04-09 17:10:40.000000000",
            "message": "Patch Set 1:\n\nPaste fail.. http://paste.ubuntu.com/922107/",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "b93671c0823c999d8cd1fb6d2a5b5e918a353a67",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-04-09 17:39:39.000000000",
            "message": "Patch Set 1:\n\nMy point is that Glance doesn't know what kernel_id and ramdisk_id are, they're just arbitrary properties. A user can set them to anything and Glance wouldn't care. When I say 'maintained by Nova', I mean that Nova is responsible for how the mapping is created and used.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "49a201f6a611d9d9ccf84a9e16656acdbdd7052f",
            "author": {
                "_account_id": 67,
                "name": "Vish Ishaya",
                "email": "vishvananda@gmail.com",
                "username": "vishvananda"
            },
            "real_author": {
                "_account_id": 67,
                "name": "Vish Ishaya",
                "email": "vishvananda@gmail.com",
                "username": "vishvananda"
            },
            "date": "2012-04-09 19:03:47.000000000",
            "message": "Patch Set 1:\n\nBrian: I agree that nova should be responsible for driving this, but nova has no way of finding out the old id of the images so I don't know how it could.  Perhaps we could expose an administrative method that nova could call to convert them?  Seems like in this case it is way easier to cheat and let glance do it.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "b69d1801d59fc6122ce2a7aade8af9a815bd72b3",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-04-11 05:34:49.000000000",
            "message": "Patch Set 1:\n\nOk, I don't think I see a reasonable alternative to your proposal. However, would it make sense to limit the db update to kernel_id and ramdisk_id rather than any values that matches an arbitrary integer? I'm thinking we could end up overwriting someones data unintentionally.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "5e6598462e69e2276ed6b2bf305715adb067ec4e",
            "author": {
                "_account_id": 67,
                "name": "Vish Ishaya",
                "email": "vishvananda@gmail.com",
                "username": "vishvananda"
            },
            "real_author": {
                "_account_id": 67,
                "name": "Vish Ishaya",
                "email": "vishvananda@gmail.com",
                "username": "vishvananda"
            },
            "date": "2012-04-11 20:47:17.000000000",
            "message": "Patch Set 1: I would prefer that you didn't submit this\n\nWaldon: good point. I actually thing that limiting this to look specifically for kernel_id and ramdisk_id might be best.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "a3e637999ae01f0524f8607d7fa114ffa3710d87",
            "author": {
                "_account_id": 1420,
                "name": "Adam Gandelman",
                "email": "adamg@ubuntu.com",
                "username": "gandelman-a"
            },
            "real_author": {
                "_account_id": 1420,
                "name": "Adam Gandelman",
                "email": "adamg@ubuntu.com",
                "username": "gandelman-a"
            },
            "date": "2012-04-11 21:59:08.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "02eae0e8208705c75b635966664ae8725e19c4af",
            "author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "real_author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "date": "2012-04-12 00:04:25.000000000",
            "message": "Patch Set 2: Looks good to me (core reviewer)\n\nlgtm. thx Adam.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "fdb862d9fed1df27589ceebcb9fe66f7781360ff",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-04-12 15:27:23.000000000",
            "message": "Patch Set 2: Looks good to me (core reviewer); Approved\n\nThanks for taking care of this, Adam.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "15512f6deb82faecdccd8071a4be3fa986c2117a",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-04-12 16:00:03.000000000",
            "message": "Patch Set 2: Verified\n\nBuild Successful \n \nhttps://jenkins.openstack.org/job/gate-integration-tests-devstack-vm/3450/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-merge/565/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-pep8/745/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-python26/258/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-python27/250/ : SUCCESS",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "714b9b26c5affd226bfe6f8ec09175d0daac6f85",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-04-12 16:00:05.000000000",
            "message": "Change has been successfully merged into the git repository.",
            "accounts_in_message": [],
            "_revision_number": 2
        }
    ],
    "requirements": [],
    "submit_records": []
}