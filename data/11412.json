{
    "id": "openstack%2Fglance~master~Ib351d8c1e13164d02b02685c808b30045f7850ea",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bug/1036846",
    "hashtags": [],
    "change_id": "Ib351d8c1e13164d02b02685c808b30045f7850ea",
    "subject": "Add policy enforcment for v2 api.",
    "status": "MERGED",
    "created": "2012-08-15 16:25:54.000000000",
    "updated": "2012-08-15 21:03:44.000000000",
    "submitted": "2012-08-15 21:03:44.000000000",
    "submitter": {
        "_account_id": 3,
        "name": "Jenkins",
        "username": "jenkins"
    },
    "insertions": 122,
    "deletions": 2,
    "total_comment_count": 0,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "a02fe2387403791f9f8c7a3f74e15a199f93feaa",
    "_number": 11412,
    "owner": {
        "_account_id": 177,
        "name": "Alex Meade",
        "email": "mr.alex.meade@gmail.com",
        "username": "alex-meade"
    },
    "labels": {
        "Verified": {
            "approved": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "recommended": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 1,
                    "date": "2012-08-15 20:39:17.000000000",
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 0,
                    "_account_id": 706,
                    "name": "Brian Lamar",
                    "email": "brian.lamar@rackspace.com",
                    "username": "blamar"
                },
                {
                    "value": 2,
                    "date": "2012-08-15 21:03:44.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "approved": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "all": [
                {
                    "value": 2,
                    "date": "2012-08-15 20:21:03.000000000",
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 2,
                    "date": "2012-08-15 20:45:51.000000000",
                    "_account_id": 706,
                    "name": "Brian Lamar",
                    "email": "brian.lamar@rackspace.com",
                    "username": "blamar"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "approved": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "all": [
                {
                    "value": 0,
                    "date": "2012-08-15 20:21:03.000000000",
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 1,
                    "date": "2012-08-15 20:46:19.000000000",
                    "_account_id": 706,
                    "name": "Brian Lamar",
                    "email": "brian.lamar@rackspace.com",
                    "username": "blamar"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 0,
                    "_account_id": 706,
                    "name": "Brian Lamar",
                    "email": "brian.lamar@rackspace.com",
                    "username": "blamar"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2012-08-15 20:21:03.000000000",
            "updated_by": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "reviewer": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-08-15 20:39:17.000000000",
            "updated_by": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "reviewer": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-08-15 20:46:19.000000000",
            "updated_by": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "reviewer": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-08-15 21:03:44.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "d1d938981cf75f06258f1179da66a6fcf5b857a6",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-15 16:43:17.000000000",
            "message": "Patch Set 1: Works for me\n\nBuild successful\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1775/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/1887/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/1394/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1398/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/7927/consoleFull : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "6ca31dc5ce284d618b4ca3d2b128e1357d470bf7",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-08-15 16:51:04.000000000",
            "message": "Patch Set 1: Doesn't seem to work\n\nSmokeStack Results (patch set 1):\n\tUnit Failed:Glance tests failed.  http://smokestack.openstack.org/?go=/jobs/29845\n\tLibvirt (Fedora 17) Success: http://smokestack.openstack.org/?go=/jobs/29843\n\tXenServer 5.6 (F17 domU) Success: http://smokestack.openstack.org/?go=/jobs/29844\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "b024e5cc62c158b59371e8d39d0570118de87e76",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-08-15 17:45:05.000000000",
            "message": "Patch Set 1: I would prefer that you didn't merge this\n\nThis looks pretty good. I do have some suggestions for the tests, though:\n\n1) create a separate policy-specific test case (class) and move the tests you added to it\n\n2) Rather than use the set_policy_rules helper, I would love to see you call set_rules directly on the policy.Enforcer instance. This would require creating a policy.Enforcer then using dependency injection to get it into the instance of the Controller you are using to test",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "9cde1e69e54ade67ac84a1437bfa34a28f08ac8b",
            "author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "real_author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "date": "2012-08-15 18:37:25.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "f42c6bd8aa31cbe2e8f15dfe50746b5ed8d44c67",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-15 18:50:28.000000000",
            "message": "Patch Set 2: Works for me\n\nBuild successful\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1777/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/1889/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/1396/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1400/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/7961/consoleFull : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "4653bbd269f0d9d9b63241c11b0df65486a2b180",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-08-15 18:59:58.000000000",
            "message": "Patch Set 2: Works for me\n\nSmokeStack Results (patch set 2):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/29876\n\tLibvirt (Fedora 17) Success: http://smokestack.openstack.org/?go=/jobs/29874\n\tXenServer 5.6 (F17 domU) Success: http://smokestack.openstack.org/?go=/jobs/29875\n",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "01740cf84a62b68d34f4120c889d9200edcf64cc",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-08-15 19:25:12.000000000",
            "message": "Patch Set 2: I would prefer that you didn't merge this\n\nDiscussion offline spawned one last thing to do. Stand by.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "3c75e860c7e592041ef1e498b1be7c89a9aca61a",
            "author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "real_author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "date": "2012-08-15 19:51:59.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "9166b208277769346305bfb6771a2300bedecf0b",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-15 20:04:48.000000000",
            "message": "Patch Set 3: Doesn't seem to work\n\nBuild failed\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1778/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/1890/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/1397/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1401/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/7984/consoleFull : FAILURE\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "872256e1060761f77c9164b183f6e0b8054a9e97",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-08-15 20:12:08.000000000",
            "message": "Patch Set 3: Works for me\n\nSmokeStack Results (patch set 3):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/29885\n\tLibvirt (Fedora 17) Success: http://smokestack.openstack.org/?go=/jobs/29883\n\tXenServer 5.6 (F17 domU) Success: http://smokestack.openstack.org/?go=/jobs/29884\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "4b50eea5585155ae6874c7dda3919e8a141c7714",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-08-15 20:20:41.000000000",
            "message": "Uploaded patch set 4.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "7660ee0827287802676ae11d2a35c23869a052a3",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-08-15 20:21:03.000000000",
            "message": "Patch Set 4: Looks good to me (core reviewer)\n\nI dropped the change to glance/tests/unit/base.py for you :)",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "a7746b0eeb0e44461ebd53dda868f55ba676a048",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-15 20:32:39.000000000",
            "message": "Patch Set 4: Doesn't seem to work\n\nBuild failed\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1779/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/1891/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/1398/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1402/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/7993/consoleFull : FAILURE\n",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "e49c4db79ee29cd5943360aa986621c3f1d35a82",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-08-15 20:39:17.000000000",
            "message": "Patch Set 4: Works for me\n\nSmokeStack Results (patch set 4):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/29897\n\tLibvirt (Fedora 17) Success: http://smokestack.openstack.org/?go=/jobs/29895\n\tXenServer 5.6 (F17 domU) Success: http://smokestack.openstack.org/?go=/jobs/29896\n",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "234320a3374bd5e1d7748aaccb4680a075bb9478",
            "author": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "real_author": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "date": "2012-08-15 20:45:51.000000000",
            "message": "Patch Set 4: Looks good to me (core reviewer)\n\nNice simple fix, thanks!",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "1476977af075ef7a8309f83c877071ce84b5d2e5",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-15 20:46:19.000000000",
            "message": "Patch Set 4: No score\n\nStarting gate jobs.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "076bae2d73cc57ad949a28a448df177337813ef5",
            "author": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "real_author": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "date": "2012-08-15 20:46:19.000000000",
            "message": "Patch Set 4: Approved\n\n",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "1b3dfa120bcfdaf790cd7b863f6fd576cb8f4704",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-15 21:03:44.000000000",
            "message": "Change has been successfully merged into the git repository.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "eb89dd392f7104b09628adbfa8a3aed8a82e68bd",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-15 21:03:44.000000000",
            "message": "Patch Set 4: Verified\n\nBuild successful\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1781/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/1893/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/1400/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1404/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/7998/consoleFull : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 4
        }
    ],
    "requirements": [],
    "submit_records": []
}