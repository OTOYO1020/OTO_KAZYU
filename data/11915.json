{
    "id": "openstack%2Fglance~master~I255bf6b66e2bb86fe10b9ae8a881a361772a396e",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bug/1040772",
    "hashtags": [],
    "change_id": "I255bf6b66e2bb86fe10b9ae8a881a361772a396e",
    "subject": "Change logging of process id",
    "status": "ABANDONED",
    "created": "2012-08-24 09:41:46.000000000",
    "updated": "2012-09-17 10:08:42.000000000",
    "insertions": 4,
    "deletions": 5,
    "total_comment_count": 0,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "89b1936074eefea421e175ed33e149ab0ce1a58d",
    "_number": 11915,
    "owner": {
        "_account_id": 455,
        "name": "Stuart McLaren",
        "email": "stuart.mclaren@hpe.com",
        "username": "stuart-mclaren"
    },
    "labels": {
        "Verified": {
            "recommended": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "all": [
                {
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 1,
                    "date": "2012-09-07 12:34:46.000000000",
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 1,
                    "date": "2012-09-07 12:31:43.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "rejected": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "all": [
                {
                    "value": -2,
                    "date": "2012-09-07 12:15:48.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "date": "2012-09-07 12:23:46.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "all": [
                {
                    "date": "2012-09-07 15:40:23.000000000",
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "date": "2012-09-07 12:23:46.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 0
                    },
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "_account_id": 177,
                    "name": "Alex Meade",
                    "email": "mr.alex.meade@gmail.com",
                    "username": "alex-meade"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2012-08-29 19:32:38.000000000",
            "updated_by": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "reviewer": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-09-07 12:31:43.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-09-07 12:34:46.000000000",
            "updated_by": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "reviewer": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-09-07 15:40:23.000000000",
            "updated_by": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "reviewer": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "52a15468da4098016dd360b72b33b0c60d4385b4",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2012-08-24 09:43:44.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "a1636083b3c8c8916ead983abf30038ef0125c08",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-08-24 09:54:50.000000000",
            "message": "Patch Set 2: Works for me\n\nBuild successful\n\n- https://jenkins.openstack.org/job/gate-glance-merge/1901/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-docs/79/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/2013/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/1520/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/1524/consoleFull : SUCCESS\n- https://jenkins.openstack.org/job/gate-tempest-devstack-vm/9118/consoleFull : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "b8139446c6f3a33e93cc59fa20dac922f0433bb0",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-08-24 10:03:27.000000000",
            "message": "Patch Set 2: Works for me\n\nSmokeStack Results (patch set 2):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/31313\n\tLibvirt (Fedora 17) Success: http://smokestack.openstack.org/?go=/jobs/31311\n\tXenServer 5.6 (F17 domU) Success: http://smokestack.openstack.org/?go=/jobs/31312\n",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "793fa0af28b7ad9434c30c37ee6d274e78b00d66",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-08-24 18:18:46.000000000",
            "message": "Patch Set 2: Do not merge\n\nThis change has to land upstream in openstack-common first.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "fe9461d87c70adda3f34efdda2c86e9b398d0594",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-08-24 18:58:37.000000000",
            "message": "Patch Set 2:\n\nI'm also not comfortable fixing this in this phase of development. It's a deployer-facing change that could break existing log parsing. Let's do this in Grizzly.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "f64b2b931c403614efa56d0b9990eed2512fa7a2",
            "author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "real_author": {
                "_account_id": 177,
                "name": "Alex Meade",
                "email": "mr.alex.meade@gmail.com",
                "username": "alex-meade"
            },
            "date": "2012-08-29 19:32:38.000000000",
            "message": "Patch Set 2:\n\nGood change but I agree with Waldon. I'll be looking out for this one in grizzly",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "2858b8e59b1b4b5e0460e136c660f7c938cdaf87",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2012-09-07 12:15:48.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "2713da14ce4c8c272545e267e1c23c4dc08d0bd1",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2012-09-07 12:23:46.000000000",
            "message": "Patch Set 3:\n\nI added to this so that tracebacks also display the process id, so rather than\n\n 2012-09-07 12:10:35 TRACE glance Traceback (most recent call last):\n 2012-09-07 12:10:35 TRACE glance   File \"/usr/bin/glance-api\", line 59, in <module>\n 2012-09-07 12:10:35 TRACE glance     server.wait()\n 2012-09-07 12:10:35 TRACE glance   File \"/usr/lib/python2.7/dist-packages/glance/common/wsgi.py\", line 240, in wait\n 2012-09-07 12:10:35 TRACE glance     self.wait_on_children()\n 2012-09-07 12:10:35 TRACE glance   File \"/usr/lib/python2.7/dist-packages/glance/common/wsgi.py\", line 225, in wait_on_children\n 2012-09-07 12:10:35 TRACE glance     self.run_child()\n 2012-09-07 12:10:35 TRACE glance   File \"/usr/lib/python2.7/dist-packages/glance/common/wsgi.py\", line 254, in run_child\n 2012-09-07 12:10:35 TRACE glance     print x\n 2012-09-07 12:10:35 TRACE glance NameError: global name 'x' is not defined\n 2012-09-07 12:10:35 TRACE glance\n\nyou get\n\n 2012-09-07 12:09:50 29634 TRACE glance Traceback (most recent call last):\n 2012-09-07 12:09:50 29634 TRACE glance   File \"/usr/bin/glance-api\", line 59, in <module>\n 2012-09-07 12:09:50 29634 TRACE glance     server.wait()\n 2012-09-07 12:09:50 29634 TRACE glance   File \"/usr/lib/python2.7/dist-packages/glance/common/wsgi.py\", line 240, in wait\n 2012-09-07 12:09:50 29634 TRACE glance     self.wait_on_children()\n 2012-09-07 12:09:50 29634 TRACE glance   File \"/usr/lib/python2.7/dist-packages/glance/common/wsgi.py\", line 225, in wait_on_children\n 2012-09-07 12:09:50 29634 TRACE glance     self.run_child()\n 2012-09-07 12:09:50 29634 TRACE glance   File \"/usr/lib/python2.7/dist-packages/glance/common/wsgi.py\", line 254, in run_child\n 2012-09-07 12:09:50 29634 TRACE glance     print x\n 2012-09-07 12:09:50 29634 TRACE glance NameError: global name 'x' is not defined\n 2012-09-07 12:09:50 29634 TRACE glance",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "27f5059331415a3853456b51d07ff40a7462d4e4",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-09-07 12:31:43.000000000",
            "message": "Patch Set 3: Works for me\n\nBuild successful\n\n- http://logs.openstack.org/11915/3/check/gate-glance-merge/2159 : SUCCESS\n- http://logs.openstack.org/11915/3/check/gate-glance-docs/335 : SUCCESS\n- http://logs.openstack.org/11915/3/check/gate-glance-pep8/2269 : SUCCESS\n- http://logs.openstack.org/11915/3/check/gate-glance-python26/1776 : SUCCESS\n- http://logs.openstack.org/11915/3/check/gate-glance-python27/1788 : SUCCESS\n- http://logs.openstack.org/11915/3/check/gate-tempest-devstack-vm/10732 : SUCCESS\n- http://logs.openstack.org/11915/3/check/gate-tempest-devstack-vm-cinder/713 : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "f6f7eea8f89bb1d1e94bf2d250b8bca1ae2f9e7c",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-09-07 12:34:46.000000000",
            "message": "Patch Set 3: Works for me\n\nSmokeStack Results (patch set 3):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/33527\n\tLibvirt (Fedora 17) Success: http://smokestack.openstack.org/?go=/jobs/33525\n\tXenServer 5.6 (F17 domU) Running: http://smokestack.openstack.org/?go=/jobs/33526\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "84f70e570a520f9c3d1945a2f27c2a7e3c55430d",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2012-09-07 12:39:49.000000000",
            "message": "Patch Set 3:\n\nFWIW I pushed this change up as a 'nice to have', but looking at multi-process bug 1042823 it struck me that the current code is not printing the pid in a lot of cases, eg the wsgi stuff:\n\n 2012-09-06 16:25:06 INFO eventlet.wsgi.server [-] Starting 1 workers\n\nthis makes supporting Glance (in terms of figuring out what's happening on your machine) much more difficult than in Diablo/Essex where the pid was always available. With this patch I could see a pid in *every* line of log output, which helped me hugely in finding the root cause.\n\nI wonder if this strengthens the case for including this change in Folsom?",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "8d08c4f0228841d906bf13c696979cad88cd7a23",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-09-07 15:40:23.000000000",
            "message": "Patch Set 3:\n\nI do agree this is an improvement, but how big of a risk do you think there is to breaking existing log parsers that depend on the pid at the end of the line?",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "fa2131739f6516c052dd30414db4215c3e9e2249",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2012-09-07 18:24:37.000000000",
            "message": "Patch Set 3:\n\nI wonder if putting it in now may be less disruptive.\n\nFrom a Glance point of view, the new logging style hasn't been in that long (weeks), so the risk may be quite low.\n\nIn contrast if we wait, then the old format will be in the\nwild for longer (~six months), and any new or existing log parser will expect it. Both new and existing parsers will then be tripped up when this change goes in.\n\nBut its a judgement call and I'm ok with holding off if you think that's best.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "2b901e4d5944e14fe2e3bf220a8bf588f4bd44c8",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-09-07 19:46:46.000000000",
            "message": "Patch Set 3:\n\nOk, so that is a great point. We already changed the logging format for Folsom by switching to the common log module.\n\nLet's go ahead with this - however, we can't carry changes to the common module in Glance. You'll need to land this change upstream in openstack-common.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "b0342be31098f87cf143f43b3528cc787bc1fb6e",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-09-12 20:21:22.000000000",
            "message": "Patch Set 3:\n\nI pushed up some reviews that pull in your code from openstack-common. I think you can abandon this review now.\n\nmaster: https://review.openstack.org/#/c/12849/\nmilestone-proposed: https://review.openstack.org/#/c/12850/",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "4f7cec98d04337a3a067e853c00d031fd758ca01",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2012-09-17 10:08:42.000000000",
            "message": "Patch Set 3: Abandoned\n\nChange went into openstack-common, so can abandon here.",
            "accounts_in_message": [],
            "_revision_number": 3
        }
    ],
    "requirements": [],
    "submit_records": []
}