{
    "id": "openstack%2Fglance~master~I565d21f5c6861102e96d6953ace29cde57e8ec38",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "missing-eventlethub",
    "hashtags": [],
    "change_id": "I565d21f5c6861102e96d6953ace29cde57e8ec38",
    "subject": "wsgi: do not respawn on missing eventlet hub",
    "status": "MERGED",
    "created": "2012-05-06 13:59:58.000000000",
    "updated": "2012-06-07 14:45:24.000000000",
    "submitted": "2012-05-09 19:45:40.000000000",
    "submitter": {
        "_account_id": 3,
        "name": "Jenkins",
        "username": "jenkins"
    },
    "insertions": 27,
    "deletions": 4,
    "total_comment_count": 3,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "6bb6f21dbf27738748bd8f28e0e1c1fb73b493f0",
    "_number": 7172,
    "owner": {
        "_account_id": 4211,
        "name": "Patrick Mezard",
        "email": "patrick@mezard.eu",
        "username": "pmezard"
    },
    "labels": {
        "Verified": {
            "approved": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "recommended": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 1,
                    "date": "2012-05-09 10:29:12.000000000",
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 679,
                    "name": "Kevin L. Mitchell",
                    "email": "klmitch@mit.edu",
                    "username": "klmitch"
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 4211,
                    "name": "Patrick Mezard",
                    "email": "patrick@mezard.eu",
                    "username": "pmezard"
                },
                {
                    "value": 2,
                    "date": "2012-05-09 19:45:40.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "approved": {
                "_account_id": 679,
                "name": "Kevin L. Mitchell",
                "email": "klmitch@mit.edu",
                "username": "klmitch"
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 2,
                    "date": "2012-05-09 14:52:55.000000000",
                    "_account_id": 679,
                    "name": "Kevin L. Mitchell",
                    "email": "klmitch@mit.edu",
                    "username": "klmitch"
                },
                {
                    "value": 2,
                    "date": "2012-05-09 19:25:00.000000000",
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 4211,
                    "name": "Patrick Mezard",
                    "email": "patrick@mezard.eu",
                    "username": "pmezard"
                },
                {
                    "value": 0,
                    "date": "2012-05-09 19:45:40.000000000",
                    "permitted_voting_range": {
                        "min": 0,
                        "max": 1
                    },
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "approved": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "date": "2012-05-09 14:52:55.000000000",
                    "_account_id": 679,
                    "name": "Kevin L. Mitchell",
                    "email": "klmitch@mit.edu",
                    "username": "klmitch"
                },
                {
                    "value": 1,
                    "date": "2012-05-09 19:25:00.000000000",
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 4211,
                    "name": "Patrick Mezard",
                    "email": "patrick@mezard.eu",
                    "username": "pmezard"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 679,
                    "name": "Kevin L. Mitchell",
                    "email": "klmitch@mit.edu",
                    "username": "klmitch"
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 4211,
                    "name": "Patrick Mezard",
                    "email": "patrick@mezard.eu",
                    "username": "pmezard"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            {
                "_account_id": 679,
                "name": "Kevin L. Mitchell",
                "email": "klmitch@mit.edu",
                "username": "klmitch"
            },
            {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            {
                "_account_id": 4211,
                "name": "Patrick Mezard",
                "email": "patrick@mezard.eu",
                "username": "pmezard"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2012-05-08 00:17:32.000000000",
            "updated_by": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "reviewer": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-05-09 10:29:12.000000000",
            "updated_by": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "reviewer": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-05-09 14:52:55.000000000",
            "updated_by": {
                "_account_id": 679,
                "name": "Kevin L. Mitchell",
                "email": "klmitch@mit.edu",
                "username": "klmitch"
            },
            "reviewer": {
                "_account_id": 679,
                "name": "Kevin L. Mitchell",
                "email": "klmitch@mit.edu",
                "username": "klmitch"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-05-09 19:25:00.000000000",
            "updated_by": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "reviewer": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-05-09 19:45:40.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "bd7fbedf11cb59b00cb341afef8075e80e8b0ee4",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-05-06 17:29:18.000000000",
            "message": "Patch Set 1:\n\nSmokeStack Results (patch set 1):\n\tUnit Failed:Glance tests failed. Glance pep8 failed.  http://smokestack.openstack.org/?go=/jobs/19787\n\tLibvirt (Fedora 16) Failed:Smoke tests failed. http://smokestack.openstack.org/?go=/jobs/19786\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "d2dfc1fdc54c6e26c2e5316a50d963ff6a642510",
            "author": {
                "_account_id": 4211,
                "name": "Patrick Mezard",
                "email": "patrick@mezard.eu",
                "username": "pmezard"
            },
            "real_author": {
                "_account_id": 4211,
                "name": "Patrick Mezard",
                "email": "patrick@mezard.eu",
                "username": "pmezard"
            },
            "date": "2012-05-06 18:14:40.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "aaedea9a3653ac644824da575305effc29e8dc85",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-05-07 14:10:40.000000000",
            "message": "Patch Set 2:\n\nSmokeStack Results (patch set 2):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/19791\n\tLibvirt (Fedora 16) Success: http://smokestack.openstack.org/?go=/jobs/19790\n",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "b5091affc648649934313fc1ad42409fcea71632",
            "author": {
                "_account_id": 679,
                "name": "Kevin L. Mitchell",
                "email": "klmitch@mit.edu",
                "username": "klmitch"
            },
            "real_author": {
                "_account_id": 679,
                "name": "Kevin L. Mitchell",
                "email": "klmitch@mit.edu",
                "username": "klmitch"
            },
            "date": "2012-05-07 15:47:08.000000000",
            "message": "Patch Set 2: I would prefer that you didn't merge this\n\n(2 inline comments)\n\n",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "f31922a805432554e801ab1ed9459cf5c244face",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-05-08 00:17:32.000000000",
            "message": "Patch Set 2: I would prefer that you didn't merge this\n\nSo I wasn't seeing failures running test_multiprocessing on OS X and still don't with this patch. I was seeing the tests hang when using Monty's branch (https://review.openstack.org/#/c/7007/), and now instead of hanging with his code, the tests just fail. That is an improvement, but not quite the final solution. Can you check out his code on top of yours and see what you get?",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "cd47b3d938897f4edc22a7c2ed531980124a9459",
            "author": {
                "_account_id": 4211,
                "name": "Patrick Mezard",
                "email": "patrick@mezard.eu",
                "username": "pmezard"
            },
            "real_author": {
                "_account_id": 4211,
                "name": "Patrick Mezard",
                "email": "patrick@mezard.eu",
                "username": "pmezard"
            },
            "date": "2012-05-08 10:01:51.000000000",
            "message": "Patch Set 2:\n\nI should not have said \"Fix Bug 994609\" in the changelog. As Brian noticed, this patch only makes the test suite terminate instead of hanging.\n\nThe real issue is the use of \"poll\" API which Kevin questioned in the inline diff. I intended to look into that in a second patchset, when trying to fix the failure itself. My reasons to split the fix in two parts are:\n- This is my first contribution to openstack and I wanted to keep things simple until I know more about the whole process.\n- There are many ways to deal with the \"poll\" issue (autodetect, make it configurable, etc.), and I expect the next patchset to require more design and polish, while the current one seemed straightforward (coding conventions nonwithstanding).\n\nI skimmed Monty patchset but could not see anything related to test_multiprocessing/wsgi/eventlet so I do not think it address the same problem. I consistently reproduced the issue on glance master.\n\nWould this patch be acceptable if:\n- The \"Fix Bug 994609\" mention is dropped from the changelog\n- UnrecoverableWorkerError exception class is moved into the correct file and inherit glance base exception\n?\n\nOtherwise I would stop this approach and focus on the eventlet bug itself.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "c4915cf6916726e4e00eca3bc625c41b861d93d7",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-05-08 16:17:12.000000000",
            "message": "Patch Set 2:\n\nSo I confirmed that this stops the test from hanging on a machine that acts similarly to yours. This is ok to land once Kevin's fixes are implemented with the understanding that you'll try to fix the root cause. If this were causing the tests to fail on the Jenkins boxes, we couldn't merge it, but if it's not causing any regressions there AND it's helping those with the problem get around it then I think this is ok.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "35d4f16ae89c8dab08d0bc4c1f84a1c4554a6be6",
            "author": {
                "_account_id": 4211,
                "name": "Patrick Mezard",
                "email": "patrick@mezard.eu",
                "username": "pmezard"
            },
            "real_author": {
                "_account_id": 4211,
                "name": "Patrick Mezard",
                "email": "patrick@mezard.eu",
                "username": "pmezard"
            },
            "date": "2012-05-09 10:00:44.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "e46bbde51e71357b5a95f7b5ee459d51afb24f60",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-05-09 10:29:12.000000000",
            "message": "Patch Set 3: Works for me\n\nSmokeStack Results (patch set 3):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/19990\n\tLibvirt (Fedora 16) Success: http://smokestack.openstack.org/?go=/jobs/19988\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "781c375ec4012eb6139be3f487ea77a5cec479b3",
            "author": {
                "_account_id": 679,
                "name": "Kevin L. Mitchell",
                "email": "klmitch@mit.edu",
                "username": "klmitch"
            },
            "real_author": {
                "_account_id": 679,
                "name": "Kevin L. Mitchell",
                "email": "klmitch@mit.edu",
                "username": "klmitch"
            },
            "date": "2012-05-09 14:52:55.000000000",
            "message": "Patch Set 3: Looks good to me (core reviewer)\n\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "c2c4dba63d760b12abf042c85b2a61257a2030bf",
            "author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "real_author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "date": "2012-05-09 19:25:00.000000000",
            "message": "Patch Set 3: Looks good to me (core reviewer); Approved\n\nSimple enough",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "36289606ae10aa407bf35d8b13eeacedb8dd398a",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-05-09 19:45:40.000000000",
            "message": "Patch Set 3: Verified\n\nBuild Successful \n \nhttps://jenkins.openstack.org/job/gate-integration-tests-devstack-vm/4001/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-merge/640/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-pep8/821/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-python26/337/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-python27/337/ : SUCCESS",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "2f98da12e75228460630d8432647425cc828308d",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-05-09 19:45:40.000000000",
            "message": "Change has been successfully merged into the git repository.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "9cbb803fd03bcab8c23dab4b3e34f1037e3c66cf",
            "author": {
                "_account_id": 2759,
                "name": "Huang Zhiteng",
                "email": "winston.d@gmail.com",
                "username": "zhiteng-huang"
            },
            "real_author": {
                "_account_id": 2759,
                "name": "Huang Zhiteng",
                "email": "winston.d@gmail.com",
                "username": "zhiteng-huang"
            },
            "date": "2012-06-07 14:45:24.000000000",
            "message": "Patch Set 3: (1 inline comment)\n\nPlease see the inlined comment for possible simple fix for 'missing eventlet hub' issue.",
            "accounts_in_message": [],
            "_revision_number": 3
        }
    ],
    "requirements": [],
    "submit_records": []
}