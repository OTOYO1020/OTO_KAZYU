{
    "id": "openstack%2Fglance~master~I231dc710554198bfd1fdcb82c3c3768963f64bd8",
    "project": "openstack/glance",
    "branch": "master",
    "hashtags": [],
    "change_id": "I231dc710554198bfd1fdcb82c3c3768963f64bd8",
    "subject": "Allow specifying the current version in 'glance-manage version_control'",
    "status": "MERGED",
    "created": "2012-03-27 14:27:20.000000000",
    "updated": "2012-03-29 22:18:34.000000000",
    "submitted": "2012-03-29 22:18:33.000000000",
    "submitter": {
        "_account_id": 3,
        "name": "Jenkins",
        "username": "jenkins"
    },
    "insertions": 64,
    "deletions": 30,
    "total_comment_count": 4,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "ffdcfc0ea6a06b3c9458b9fb65ba662c4c028f08",
    "_number": 5862,
    "owner": {
        "_account_id": 1247,
        "name": "Mark McLoughlin",
        "email": "markmc@redhat.com",
        "username": "markmc"
    },
    "labels": {
        "Verified": {
            "recommended": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "value": 0,
                    "_account_id": 1247,
                    "name": "Mark McLoughlin",
                    "email": "markmc@redhat.com",
                    "username": "markmc"
                },
                {
                    "value": 0,
                    "_account_id": 360,
                    "name": "Dan Prince",
                    "email": "dprince@redhat.com",
                    "username": "dan-prince"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 1,
                    "date": "2012-03-29 22:18:33.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "approved": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "all": [
                {
                    "value": 2,
                    "date": "2012-03-28 08:39:57.000000000",
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "value": 0,
                    "date": "2012-03-28 06:25:51.000000000",
                    "permitted_voting_range": {
                        "min": 0,
                        "max": 1
                    },
                    "_account_id": 1247,
                    "name": "Mark McLoughlin",
                    "email": "markmc@redhat.com",
                    "username": "markmc"
                },
                {
                    "value": 2,
                    "date": "2012-03-29 22:09:10.000000000",
                    "_account_id": 360,
                    "name": "Dan Prince",
                    "email": "dprince@redhat.com",
                    "username": "dan-prince"
                },
                {
                    "value": 0,
                    "date": "2012-03-28 12:57:16.000000000",
                    "permitted_voting_range": {
                        "min": 0,
                        "max": 1
                    },
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "date": "2012-03-29 22:18:33.000000000",
                    "permitted_voting_range": {
                        "min": 0,
                        "max": 1
                    },
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "approved": {
                "_account_id": 360,
                "name": "Dan Prince",
                "email": "dprince@redhat.com",
                "username": "dan-prince"
            },
            "all": [
                {
                    "value": 0,
                    "date": "2012-03-28 07:44:58.000000000",
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "value": 0,
                    "date": "2012-03-28 06:20:45.000000000",
                    "_account_id": 1247,
                    "name": "Mark McLoughlin",
                    "email": "markmc@redhat.com",
                    "username": "markmc"
                },
                {
                    "value": 1,
                    "date": "2012-03-29 22:09:10.000000000",
                    "_account_id": 360,
                    "name": "Dan Prince",
                    "email": "dprince@redhat.com",
                    "username": "dan-prince"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "value": 0,
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "value": 0,
                    "_account_id": 1247,
                    "name": "Mark McLoughlin",
                    "email": "markmc@redhat.com",
                    "username": "markmc"
                },
                {
                    "value": 0,
                    "_account_id": 360,
                    "name": "Dan Prince",
                    "email": "dprince@redhat.com",
                    "username": "dan-prince"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            {
                "_account_id": 360,
                "name": "Dan Prince",
                "email": "dprince@redhat.com",
                "username": "dan-prince"
            },
            {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2012-03-27 15:55:30.000000000",
            "updated_by": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "reviewer": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-03-28 07:44:58.000000000",
            "updated_by": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "reviewer": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-03-28 12:57:16.000000000",
            "updated_by": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "reviewer": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-03-29 22:09:10.000000000",
            "updated_by": {
                "_account_id": 360,
                "name": "Dan Prince",
                "email": "dprince@redhat.com",
                "username": "dan-prince"
            },
            "reviewer": {
                "_account_id": 360,
                "name": "Dan Prince",
                "email": "dprince@redhat.com",
                "username": "dan-prince"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-03-29 22:18:33.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "d894ff4ebd968f53bf0fc5e6270bbf44111ff3d7",
            "author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "real_author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "date": "2012-03-27 14:45:59.000000000",
            "message": "Patch Set 1: Looks good to me (core reviewer)\n\nThanks for the patch ... one non-blocking observation, would it be worth expanding the test with target versions other than the current default (version=0)?\n\nCheers,\nEoghan",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "ae4a96a395d191c4f9979ce0c6a490a4bac16172",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-03-27 15:15:01.000000000",
            "message": "Patch Set 1:\n\nSmokeStack Results (patch set 1):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/16589\n\tLibvirt (Fedora 16) Success: http://smokestack.openstack.org/?go=/jobs/16587\n\tXenServer (Ubuntu 11.10) Success: http://smokestack.openstack.org/?go=/jobs/16588",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "63f9c445fd8496d57f9d4450f7841459495fe430",
            "author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "real_author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "date": "2012-03-27 15:55:30.000000000",
            "message": "Patch Set 1: I would prefer that you didn't submit this\n\n(1 inline comment)\n\nSee inline. To be sold that this works, I'm going to need to see some tests that stress the new code paths, specifically for the case when the database is already under version control and a db_sync() is issued (which should not raise an error but instead upgrade to the latest version)",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "81f8de1b84c278dec633be4ddf5f9b4f50e619d8",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-03-28 06:20:45.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "f867ffa5b3e9178d4a1c3861926c9fd7bdcae7d0",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-03-28 06:25:51.000000000",
            "message": "Patch Set 2:\n\nI've extended the tests",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "19823a791b0cd471db3ac2bd1630d8605a7c6dbd",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-03-28 06:26:08.000000000",
            "message": "Patch Set 1: (1 inline comment)\n\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "1b4c8cdd696862b3301b5f0f983c988c295543c6",
            "author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "real_author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "date": "2012-03-28 07:44:58.000000000",
            "message": "Patch Set 2: (1 inline comment)\n\nA question inline on the test coverage.\n\nCheers,\nEoghan",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "b121dd97b6dc71525af645cbea86a018afe4c590",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-03-28 08:12:41.000000000",
            "message": "Patch Set 2: (1 inline comment)\n\n",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "df40cc77f89c08ecb3dc3c11f59e128d8f6a28dc",
            "author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "real_author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "date": "2012-03-28 08:39:57.000000000",
            "message": "Patch Set 2: Looks good to me (core reviewer)\n\nOK, sounds like a reasonable  approach to coverage of db_sync versus direct calls to upgrade.\n\nCheers,\nEoghan",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "c1ab134a61b1505d918dc2e143b15997d3caabda",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-03-28 12:57:16.000000000",
            "message": "Patch Set 2:\n\nSmokeStack Results (patch set 2):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/16677\n\tLibvirt (Fedora 16) Success: http://smokestack.openstack.org/?go=/jobs/16675\n\tXenServer (Ubuntu 11.10) Success: http://smokestack.openstack.org/?go=/jobs/16676",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "43389c04b0b0b21fd7304b70801a4cb243161879",
            "author": {
                "_account_id": 360,
                "name": "Dan Prince",
                "email": "dprince@redhat.com",
                "username": "dan-prince"
            },
            "real_author": {
                "_account_id": 360,
                "name": "Dan Prince",
                "email": "dprince@redhat.com",
                "username": "dan-prince"
            },
            "date": "2012-03-29 17:40:24.000000000",
            "message": "Patch Set 2:\n\nI like the idea of being able to upgrade/downgrade the DB version via 'glance-manage db_sync <version>'.\n\nI'm not sure the ability to set the version explicitly with 'glance-manage version_control' is a good idea however. Seems like if a user *really* wanted to do this they could just do it manually. Actually... what is the point of 'version_control' anyway. Shouldn't it just go away entirely since it is the DB migrations that should set the version right?",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "48c2c588ee4e6c961576ab8dc51c03dca368ab1f",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-03-29 18:28:57.000000000",
            "message": "Patch Set 2:\n\n'glance-manage version_control' is only useful at the moment because the DB auto-created by glance on startup isn't version controlled\n\nSo, e.g. if glance auto-created a DB in your Diablo install and you upgrade to essex, you need to do:\n\n  $> glance-manage version_control 9\n  $> glance-manage db_sync\n\nWith my other fix, I make sure that auto-created DBs are version controlled so the command should be less useful in future",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "32307f2bb90ea22df85df4898732ac8270cf29c9",
            "author": {
                "_account_id": 360,
                "name": "Dan Prince",
                "email": "dprince@redhat.com",
                "username": "dan-prince"
            },
            "real_author": {
                "_account_id": 360,
                "name": "Dan Prince",
                "email": "dprince@redhat.com",
                "username": "dan-prince"
            },
            "date": "2012-03-29 22:09:10.000000000",
            "message": "Patch Set 2: Looks good to me (core reviewer); Approved\n\nThanks for the clarification Mark. Using 'version_control' as a means to upgrade un-versioned DB sounds reasonable. \n\nPerhaps post-folsom we can deprecate the option...",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "6c9f6f84b9b1dc5ad608f3328b489646d1629e85",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-03-29 22:18:33.000000000",
            "message": "Patch Set 2: Verified\n\nBuild Successful \n \nhttps://jenkins.openstack.org/job/gate-integration-tests-devstack-vm/3113/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-merge/525/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-pep8/705/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-python26/217/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-python27/207/ : SUCCESS",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "ffdcfc0ea6a06b3c9458b9fb65ba662c4c028f08",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-03-29 22:18:34.000000000",
            "message": "Change has been successfully merged into the git repository.",
            "accounts_in_message": [],
            "_revision_number": 2
        }
    ],
    "requirements": [],
    "submit_records": []
}