{
    "id": "openstack%2Fglance~master~I90761b69cc556b14fd4bdb931541804244b653e8",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bug/929762",
    "hashtags": [],
    "change_id": "I90761b69cc556b14fd4bdb931541804244b653e8",
    "subject": "Don't fail response if caching failed",
    "status": "MERGED",
    "created": "2012-02-09 19:20:03.000000000",
    "updated": "2012-02-10 19:29:16.000000000",
    "submitted": "2012-02-10 18:59:47.000000000",
    "submitter": {
        "_account_id": 3,
        "name": "Jenkins",
        "username": "jenkins"
    },
    "insertions": 78,
    "deletions": 5,
    "total_comment_count": 2,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "1672cd82dbffe4eea76d4f9d4d422e5a809019af",
    "_number": 3974,
    "owner": {
        "_account_id": 616,
        "name": "Mark Washenberger",
        "email": "mark.washenberger@markwash.net",
        "username": "markwash"
    },
    "labels": {
        "Verified": {
            "recommended": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 1561,
                    "name": "Russell Bryant",
                    "email": "rbryant@redhat.com",
                    "username": "russellb"
                },
                {
                    "value": 0,
                    "_account_id": 475,
                    "name": "Rick Harris",
                    "email": "rick.harris@rackspace.com",
                    "username": "rconradharris"
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 706,
                    "name": "Brian Lamar",
                    "email": "brian.lamar@rackspace.com",
                    "username": "blamar"
                },
                {
                    "value": 1,
                    "date": "2012-02-10 18:59:47.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "approved": {
                "_account_id": 475,
                "name": "Rick Harris",
                "email": "rick.harris@rackspace.com",
                "username": "rconradharris"
            },
            "all": [
                {
                    "value": 0,
                    "date": "2012-02-10 18:38:56.000000000",
                    "permitted_voting_range": {
                        "min": 0,
                        "max": 1
                    },
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 1561,
                    "name": "Russell Bryant",
                    "email": "rbryant@redhat.com",
                    "username": "russellb"
                },
                {
                    "value": 2,
                    "date": "2012-02-10 18:36:46.000000000",
                    "_account_id": 475,
                    "name": "Rick Harris",
                    "email": "rick.harris@rackspace.com",
                    "username": "rconradharris"
                },
                {
                    "value": 2,
                    "date": "2012-02-10 18:50:00.000000000",
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 706,
                    "name": "Brian Lamar",
                    "email": "brian.lamar@rackspace.com",
                    "username": "blamar"
                },
                {
                    "value": 0,
                    "date": "2012-02-10 18:59:47.000000000",
                    "permitted_voting_range": {
                        "min": 0,
                        "max": 1
                    },
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "approved": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 1561,
                    "name": "Russell Bryant",
                    "email": "rbryant@redhat.com",
                    "username": "russellb"
                },
                {
                    "value": 0,
                    "date": "2012-02-10 18:36:46.000000000",
                    "_account_id": 475,
                    "name": "Rick Harris",
                    "email": "rick.harris@rackspace.com",
                    "username": "rconradharris"
                },
                {
                    "value": 1,
                    "date": "2012-02-10 18:50:00.000000000",
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 706,
                    "name": "Brian Lamar",
                    "email": "brian.lamar@rackspace.com",
                    "username": "blamar"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 1561,
                    "name": "Russell Bryant",
                    "email": "rbryant@redhat.com",
                    "username": "russellb"
                },
                {
                    "value": 0,
                    "_account_id": 475,
                    "name": "Rick Harris",
                    "email": "rick.harris@rackspace.com",
                    "username": "rconradharris"
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 706,
                    "name": "Brian Lamar",
                    "email": "brian.lamar@rackspace.com",
                    "username": "blamar"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            {
                "_account_id": 475,
                "name": "Rick Harris",
                "email": "rick.harris@rackspace.com",
                "username": "rconradharris"
            },
            {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            {
                "_account_id": 1561,
                "name": "Russell Bryant",
                "email": "rbryant@redhat.com",
                "username": "russellb"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2012-02-09 20:11:59.000000000",
            "updated_by": {
                "_account_id": 1561,
                "name": "Russell Bryant",
                "email": "rbryant@redhat.com",
                "username": "russellb"
            },
            "reviewer": {
                "_account_id": 1561,
                "name": "Russell Bryant",
                "email": "rbryant@redhat.com",
                "username": "russellb"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-02-10 16:37:25.000000000",
            "updated_by": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "reviewer": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-02-10 18:36:46.000000000",
            "updated_by": {
                "_account_id": 475,
                "name": "Rick Harris",
                "email": "rick.harris@rackspace.com",
                "username": "rconradharris"
            },
            "reviewer": {
                "_account_id": 475,
                "name": "Rick Harris",
                "email": "rick.harris@rackspace.com",
                "username": "rconradharris"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-02-10 18:50:00.000000000",
            "updated_by": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "reviewer": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-02-10 18:59:47.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "4b35036ba6a689588e8cb8d29476f6d28843cf20",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-02-09 19:21:29.000000000",
            "message": "Patch Set 1:\n\nFolks,\n\nFor the life of me, I can't figure out why I'm getting these test failures:\n\n\nFAIL: test_cache_manage_delete_cached_images (glance.tests.functional.test_cache_middleware.TestImageCacheManageSqlite)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/markw/devel/openstack/glance/glance/tests/utils.py\", line 167, in wrapped\n    func(*a, **kwargs)\n  File \"/home/markw/devel/openstack/glance/glance/tests/functional/test_cache_middleware.py\", line 327, in test_cache_manage_delete_cached_images\n    self.start_servers(**self.__dict__.copy())\n  File \"/home/markw/devel/openstack/glance/glance/tests/functional/__init__.py\", line 517, in start_servers\n    self.wait_for_servers([self.api_port, self.registry_port])\n  File \"/home/markw/devel/openstack/glance/glance/tests/functional/__init__.py\", line 559, in wait_for_servers\n    self.assertFalse(expect_launch, \"Unexpected server launch status\")\nAssertionError: Unexpected server launch status\n\n\nAnybody got any hints?",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "7fa6f4c061d916803274ab43fe637f94963e7790",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-02-09 19:38:48.000000000",
            "message": "Patch Set 1:\n\nThis is to addres https://bugs.launchpad.net/glance/+bug/929762 by the way.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "84a7cfc569bedcde192d8f02fdf4f6f888751a38",
            "author": {
                "_account_id": 1561,
                "name": "Russell Bryant",
                "email": "rbryant@redhat.com",
                "username": "russellb"
            },
            "real_author": {
                "_account_id": 1561,
                "name": "Russell Bryant",
                "email": "rbryant@redhat.com",
                "username": "russellb"
            },
            "date": "2012-02-09 20:11:59.000000000",
            "message": "Patch Set 1: I would prefer that you didn't submit this\n\nCan you add the bug number to the commit message and set the topic to \"bug/XXXXXX\" ?  That will get this patch automatically linked up with the bug.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "4a18ff53b5739ab6826d04e3fe1b7704c527f0b8",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-02-09 21:05:49.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "057e9de4b3b9e19a3d20b92d23f08b79d08013b1",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-02-10 03:38:59.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "4d89047061009afa2982eb7b458962e4cf5f697e",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-02-10 03:39:37.000000000",
            "message": "Patch Set 3:\n\nFixed previously mentioned test error. This is all ready for review.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "b9d78593b55e1fb80c0f94120a5fa008f861d7ef",
            "author": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "real_author": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "date": "2012-02-10 16:37:25.000000000",
            "message": "Patch Set 3: Looks good to me (core reviewer)\n\nThis looks good to me. After talking to you about the \"new()\" method I'm not certain of the naming but the logic is sound and I think it looks clean!",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "6702e2b02590438351498756050a3683eb2b382c",
            "author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "real_author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "date": "2012-02-10 17:04:27.000000000",
            "message": "Patch Set 3:\n\nCould someone enlighten me on why it was necessary to use the @classmethod new() in this patch?\n\nThanks,\n-jay",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "d6d49e77bf94d396b85558bb19b161901501ce90",
            "author": {
                "_account_id": 475,
                "name": "Rick Harris",
                "email": "rick.harris@rackspace.com",
                "username": "rconradharris"
            },
            "real_author": {
                "_account_id": 475,
                "name": "Rick Harris",
                "email": "rick.harris@rackspace.com",
                "username": "rconradharris"
            },
            "date": "2012-02-10 17:04:45.000000000",
            "message": "Patch Set 3: (1 inline comment)\n\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "79be75798f96ca4e49ea51ec54de6eaee0500239",
            "author": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "real_author": {
                "_account_id": 706,
                "name": "Brian Lamar",
                "email": "brian.lamar@rackspace.com",
                "username": "blamar"
            },
            "date": "2012-02-10 17:21:04.000000000",
            "message": "Patch Set 3: (1 inline comment)\n\nInline comment for Rick/Jay",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "e631bb3fe33fc1a035d45eecc19e8c9b0f95900e",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-02-10 18:21:49.000000000",
            "message": "Uploaded patch set 4.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "1eb64bdc3f47d631f758ac553be3eb5226a5151f",
            "author": {
                "_account_id": 475,
                "name": "Rick Harris",
                "email": "rick.harris@rackspace.com",
                "username": "rconradharris"
            },
            "real_author": {
                "_account_id": 475,
                "name": "Rick Harris",
                "email": "rick.harris@rackspace.com",
                "username": "rconradharris"
            },
            "date": "2012-02-10 18:36:46.000000000",
            "message": "Patch Set 4: Looks good to me (core reviewer)\n\nLGTM.  The stub route feels a little nicer than either the factory or DI approach.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "73a583a74a619c2d433ab9a773057b57c088ec35",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-02-10 18:38:56.000000000",
            "message": "Patch Set 4:\n\nHonestly, guys, I wasn't trying to be fancy, just did it the way it occurred to me. I don't love the di_argument=None + conditional logic in __init__ because it seems less explicit to me. Also, I'm not super familiar with stubs--so it was really easier for me to do it the way I did it at first.\n\nIn terms of programming style, I just don't see what's good about stubs. The argument seems to be \"we have a dynamic language, so we can hardcode dependencies in an object since it will always be possible to modify the namespace the object depends on.\" But the way an object depends on the namespace is generally a private detail that should be encapsulated, so I don't feel comfortable using this technique.\n\nThe whole idea of encapsulation is that small interfaces make it easier to have loose coupling. But stubs treat every private detail of an object as available for substitution, which blows the interface wide open and creates tremendous opportunity for tight coupling to creep in.\n\nBut again, I wasn't really trying to move glance away from stubs in this change, just doing it as it most naturally occurred to me.\n\nLet me know if there are any other concerns about the DI style in the latest patchset. (Although I kinda need this fix in so if you'd let me backfill style in another patch I'd prefer that.)",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "3d5cffbb9b561170328aa31cc03282d86fc2994a",
            "author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "real_author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "date": "2012-02-10 18:50:00.000000000",
            "message": "Patch Set 4: Looks good to me (core reviewer); Approved\n\nThank you, Mark!",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "7b6cfd91b11a817964577353f87f28991b3f1a1f",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-02-10 18:59:47.000000000",
            "message": "Patch Set 4: Verified\n\nBuild Successful \n \nhttps://jenkins.openstack.org/job/gate-integration-tests-devstack-vm/1327/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-merge/345/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-pep8/524/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-python26/3/ : SUCCESS \nhttps://jenkins.openstack.org/job/gate-glance-python27/3/ : SUCCESS",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "c5281f5f348ce9c42e0e0263ef704d86bc795efa",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-02-10 18:59:48.000000000",
            "message": "Change has been successfully merged into the git repository.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "eda56c6c94a197e11052d937be0359bb5f9f019b",
            "author": {
                "_account_id": 475,
                "name": "Rick Harris",
                "email": "rick.harris@rackspace.com",
                "username": "rconradharris"
            },
            "real_author": {
                "_account_id": 475,
                "name": "Rick Harris",
                "email": "rick.harris@rackspace.com",
                "username": "rconradharris"
            },
            "date": "2012-02-10 19:05:47.000000000",
            "message": "Patch Set 4:\n\nMark, Brian:\n\nYeah the DI vs Factory vs Stubs is a good discussion to have. I see your point about keeping the details of the class private; on the other hand, what I like about stubs is that it keeps the implementation code fairly simple.\n\nInstead of having multiple implementations of something (factory-methods), or having to pass in arbitrary code (DI), stubs keep that (invariably ugly) testing code confined to the test w/o making the original implementation code harder to read.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "6184f8370f26009913f83330435e8c55b0def704",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-02-10 19:29:16.000000000",
            "message": "Patch Set 4:\n\nBuild Failed \n \nhttps://jenkins.openstack.org/job/glance-tarball/361/ : FAILURE",
            "accounts_in_message": [],
            "_revision_number": 4
        }
    ],
    "requirements": [],
    "submit_records": []
}