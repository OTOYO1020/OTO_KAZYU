{
    "id": "openstack%2Fglance~master~If77d45c684dd7d4dda9eefd519fc3d36fc57e07a",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bug/1172719",
    "hashtags": [],
    "change_id": "If77d45c684dd7d4dda9eefd519fc3d36fc57e07a",
    "subject": "Prevent '500' error when admin uses private marker",
    "status": "MERGED",
    "created": "2013-04-25 14:09:21.000000000",
    "updated": "2013-06-12 10:49:09.000000000",
    "submitted": "2013-06-12 10:49:08.000000000",
    "submitter": {
        "_account_id": 3,
        "name": "Jenkins",
        "username": "jenkins"
    },
    "insertions": 91,
    "deletions": 16,
    "total_comment_count": 1,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "63b594f35f2e4b58be05db1e3b5ad34b96b01ad2",
    "_number": 27491,
    "owner": {
        "_account_id": 455,
        "name": "Stuart McLaren",
        "email": "stuart.mclaren@hpe.com",
        "username": "stuart-mclaren"
    },
    "labels": {
        "Verified": {
            "approved": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "recommended": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 6159,
                    "name": "Flavio Percoco",
                    "display_name": "flaper87",
                    "email": "fpercoco@redhat.com",
                    "username": "flaper87"
                },
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 1,
                    "date": "2013-06-10 12:20:13.000000000",
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 2,
                    "date": "2013-06-12 10:49:08.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "approved": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "all": [
                {
                    "value": 2,
                    "date": "2013-06-12 09:25:26.000000000",
                    "_account_id": 6159,
                    "name": "Flavio Percoco",
                    "display_name": "flaper87",
                    "email": "fpercoco@redhat.com",
                    "username": "flaper87"
                },
                {
                    "value": 2,
                    "date": "2013-06-10 22:29:03.000000000",
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "approved": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "all": [
                {
                    "value": 1,
                    "date": "2013-06-12 09:25:26.000000000",
                    "_account_id": 6159,
                    "name": "Flavio Percoco",
                    "display_name": "flaper87",
                    "email": "fpercoco@redhat.com",
                    "username": "flaper87"
                },
                {
                    "value": 0,
                    "date": "2013-06-10 22:29:03.000000000",
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "value": 0,
                    "_account_id": 6159,
                    "name": "Flavio Percoco",
                    "display_name": "flaper87",
                    "email": "fpercoco@redhat.com",
                    "username": "flaper87"
                },
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2013-06-10 12:20:13.000000000",
            "updated_by": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "reviewer": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-06-10 22:29:03.000000000",
            "updated_by": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "reviewer": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-06-12 09:25:26.000000000",
            "updated_by": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "reviewer": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-06-12 10:49:08.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "b7c6a59668822c34e9b90de1ca5cc1d5a6278f14",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2013-04-25 14:26:28.000000000",
            "message": "Patch Set 1: Works for me\n\nSmokeStack Results (patch set 1):\n\tLibvirt (Fedora 18) Success: http://smokestack.openstack.org/?go=/jobs/84465\n\tXenServer 5.6 (F18 domU) Success: http://smokestack.openstack.org/?go=/jobs/84466\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "256e09396c7c1c73fe743397936caa1ae6dfb894",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-04-25 14:46:35.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "e41bbb4d7623c269d4d5c46731c77401511cf8b0",
            "author": {
                "_account_id": 5494,
                "name": "Trivial Rebase",
                "email": "trivial-rebase@review.openstack.org",
                "username": "trivial-rebase"
            },
            "real_author": {
                "_account_id": 5494,
                "name": "Trivial Rebase",
                "email": "trivial-rebase@review.openstack.org",
                "username": "trivial-rebase"
            },
            "date": "2013-04-25 14:46:43.000000000",
            "message": "Patch Set 2:\n\nNew patchset patch-id matches previous patchset, but commit message has changed.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "84856aaa8ba2a43f3292b7d8bae68d180ed235c5",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-04-25 15:01:56.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "c77d2c0914475c955b3d4cf137aecf0811d2c83d",
            "author": {
                "_account_id": 5494,
                "name": "Trivial Rebase",
                "email": "trivial-rebase@review.openstack.org",
                "username": "trivial-rebase"
            },
            "real_author": {
                "_account_id": 5494,
                "name": "Trivial Rebase",
                "email": "trivial-rebase@review.openstack.org",
                "username": "trivial-rebase"
            },
            "date": "2013-04-25 15:02:04.000000000",
            "message": "Patch Set 3:\n\nNew patchset patch-id matches previous patchset, but commit message has changed.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "b594cc7fda6efc00252ec1d4277f5003456c37f3",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2013-04-25 15:18:52.000000000",
            "message": "Patch Set 3: Works for me\n\nSmokeStack Results (patch set 3):\n\tLibvirt (Fedora 18) Success: http://smokestack.openstack.org/?go=/jobs/84473\n\tXenServer 5.6 (F18 domU) Success: http://smokestack.openstack.org/?go=/jobs/84474\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "2730f87b5aabd9e6baf81b4e2f7fe33324b588e2",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-04-25 15:46:38.000000000",
            "message": "Patch Set 3: Works for me\n\nBuild succeeded.\n\n- http://logs.openstack.org/27491/3/check/gate-glance-pep8/4525 : SUCCESS\n- http://docs-draft.openstack.org/27491/3/check/gate-glance-docs/2552/doc/build/html/ : SUCCESS\n- http://logs.openstack.org/27491/3/check/gate-glance-python26/3970 : SUCCESS\n- http://logs.openstack.org/27491/3/check/gate-glance-python26-rhel6/186 : SUCCESS (non-voting)\n- http://logs.openstack.org/27491/3/check/gate-glance-python27/4001 : SUCCESS\n- http://logs.openstack.org/27491/3/check/gate-tempest-devstack-vm-full/13577 : SUCCESS\n- http://logs.openstack.org/27491/3/check/gate-tempest-devstack-vm-postgres-full/13292 : FAILURE (non-voting)\n- http://logs.openstack.org/27491/3/check/gate-tempest-devstack-vm-quantum/19534 : SUCCESS\n- http://logs.openstack.org/27491/3/check/gate-grenade-devstack-vm/1443 : FAILURE (non-voting)\n",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "215b9f406f961d33b17a9662c1d91bfe7c572a01",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2013-04-25 16:30:40.000000000",
            "message": "Patch Set 3: I would prefer that you didn't merge this\n\nHi Stuart!\n\nI have a few questions:\n\n1. The bug you filed also notes an issue with PUT's returning a 500 error; does this patch address that problem as well, or should there be more patches?\n\n\n2. Can we process these index/detail requests as normal rather than returning 4xx? There is an implicit relationship between /images?marker=foo and /images/foo, so it seems a bit odd to get a 404 in the former case but a 200 in the latter.\n\n\n3. While I (now) agree that 404 is the correct response when a marker is not found or intentionally hidden, I'm not sure that the benefits of correctness outweigh the general burden against API changes, especially in v1. Would you be okay with dropping that part of the change?",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "f0d48d37ee5ec28d14ab33a4343bbaefc9564a40",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-04-25 16:41:39.000000000",
            "message": "Patch Set 3:\n\nHi Mark,\n\nI agree this is a bit confusing.\n\nLet me try to explain where I'm coming from with the main change and why I think its consist with the slightly eccentric current behaviour.\n\nImagine there are 6 images, three public images (A, B, C) and three private images (a, b, c) owned by user '2'. The admin is user '1'.\n\nIf the admin does a GET to:\n\n/v1/images\n\nthey will see a list of three images (the public ones).\n\nif they do a GET to:\n\n/v1/images?is_public=None\n\nthey will see all six images.\n\nWithout this patch a GET to:\n\n/v1/images?marker=b\n\nwill return 500\n\nwith this patch a GET to\n\n/v1/images?marker=b\n\nwill return 404 (which is consistent with 'b' not being in the list).\n\na GET to /v1/images?is_public=None?marker=b\n\nwill get a 'hit' and will traverse the list.\n\nSo, none of this is ideal, and I'm open to other suggestions, but if we don't return 404 to the '/v1/images?marker=b' what happens? Do we return 'c' or nothing? I think 404 might be the least worst option...but always open to suggestions!",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "48412d05051d1e835e1392f76c843859755679e2",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2013-04-25 17:06:40.000000000",
            "message": "Patch Set 3:\n\nI think it makes sense to say that a valid marker is any image id that you can get directly. For example, isn't it true that if I do\n\nGET /v1/images?name=ubuntu&marker=abcd\n\nI can get a valid list of images with name == \"ubuntu\" even if image 'abcd' has name == \"fedora\"?",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "3a8bb9bf5429c184a7cc61cc04a735c2754770c6",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-04-25 19:14:34.000000000",
            "message": "Patch Set 3:\n\nHere's how I'd see it...\n\nGoing back to my previous example, if an admin does\n\nGET /v1/images\n\nthey will see three ids [A,B,C] listed. The way I see markers is that the admin can subsequently choose to use a marker to start from one of those three ids, ie to get a subset of the original list. Like a bookmark -- in this case for a book with three pages. I think of trying to use a marker to select one of the images that is not listed [a, b, c] as being a bit like trying to start from page 5 of a book with only three pages.\n\nSo I'd see:\n\nGET /v1/images?name=ubuntu&marker=A\n\nas getting a list of [B,C] and matching any of those whose name may be ubuntu, but\nI'd see\n\nGET /v1/images?name=ubuntu&marker=b\n\nas returning a 404 because b is not visible in the original list.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "b3e2f5b28fa1792243f4a22f1e7a694167914e92",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2013-04-26 06:37:39.000000000",
            "message": "Patch Set 3:\n\nRolling the dice of gerrit formatting!\n\nWhile this view of markers makes sense, it is not consistent with current api behavior. For a (lengthy) example, if I have the following list of images\n\n  ~/devstack$ curl -X GET -H \"X-Auth-Token: $token\" -H 'Content-Type: application/json' -H 'User-Agent: python-glanceclient' 'http://10.130.50.38:9292/v1/images?status=queued' 2>/dev/null | python -m json.tool | egrep -v \"format|checksum|size\"\n  {\n    \"images\": [\n        {\n            \"id\": \"5fc53a63-b63f-4f2f-81b3-fb1eff8b236f\",\n            \"name\": \"fedora\",\n        },\n        {\n            \"id\": \"f70be544-4813-42e9-bba6-cf014c2c3f28\",\n            \"name\": \"ubuntu\",\n        },\n        {\n            \"id\": \"8f75c4b9-3b0b-4c97-9b7f-bfb826e61258\",\n            \"name\": \"fedora\",\n        },\n        {\n            \"id\": \"11659ec4-3621-4387-8d42-abe3d34c18e5\",\n            \"name\": \"fedora\",\n        },\n        {\n            \"id\": \"384d29ff-050b-47fc-808c-bfc38e4c3778\",\n            \"name\": \"ubuntu\",\n        },\n        {\n            \"id\": \"52b86835-603c-46bd-a94c-13bb0231cc43\",\n            \"name\": \"ubuntu\",\n        }\n    ]\n  } \n\n\nI am free to use the id of the 3rd fedora image as a marker for an ubuntu image search:\n\n  ~/devstack$ curl -X GET -H \"X-Auth-Token: $token\" -H 'Content-Type: application/json' -H 'User-Agent: python-glanceclient' 'http://10.130.50.38:9292/v1/images?status=queued&name=ubuntu&marker=11659ec4-3621-4387-8d42-abe3d34c18e5' 2>/dev/null | python -m json.tool | egrep -v \"format|checksum|size\"\n  {\n    \"images\": [\n        {\n            \"id\": \"384d29ff-050b-47fc-808c-bfc38e4c3778\",\n            \"name\": \"ubuntu\",\n        },\n        {\n            \"id\": \"52b86835-603c-46bd-a94c-13bb0231cc43\",\n            \"name\": \"ubuntu\",\n        }\n    ]\n  }\n\nEven though the fedora image would never show up in an ubuntu image search:\n\n~/devstack$ curl -X GET -H \"X-Auth-Token: $token\" -H 'Content-Type: application/json' -H 'User-Agent: python-glanceclient' 'http://10.130.50.38:9292/v1/images?status=queued&name=ubuntu' 2>/dev/null | python -m json.tool | egrep -v \"format|checksum|size\"\n  {\n    \"images\": [\n        {\n            \"id\": \"f70be544-4813-42e9-bba6-cf014c2c3f28\",\n            \"name\": \"ubuntu\",\n        },\n        {\n            \"id\": \"384d29ff-050b-47fc-808c-bfc38e4c3778\",\n            \"name\": \"ubuntu\",\n        },\n        {\n            \"id\": \"52b86835-603c-46bd-a94c-13bb0231cc43\",\n            \"name\": \"ubuntu\",\n        }\n    ]\n  }",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "4f931c8eda612bb4551db2a97ad89644f74ec7d3",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-04-26 12:22:19.000000000",
            "message": "Patch Set 3:\n\nHi Mark,\n\nThanks for your comment. You won the gerrit formatting bet!\n\nI do agree with your last comment, I but don't think that this patch will affect that behaviour.\n\nI think its the behaviour in the multi-user case which is the open question.\n\nAlso running the gauntlet of gerrit formatting!\n\nConsider two users 'glance',who is an admin, and 'demo' a regular, non-admin user.\nImagine six images exist -- three public and three private images *which are owned by 'demo'*:\n\nIf user demo lists images he sees all six:\n\n $ curl -H \"x-auth-token: `cat demo.token`\" http://localhost:9292/v1/images 2>/dev/null | python -mjson.tool | egrep -v 'checksum|container|disk|size'\n {\n    \"images\": [\n        {\n            \"id\": \"545ac52f-3985-4331-b366-d6058c84b017\",\n            \"name\": \"private-demo-3\",\n        },\n        {\n            \"id\": \"4db5ccbd-f673-44fb-840e-036ccc30d260\",\n            \"name\": \"private-demo-2\",\n        },\n        {\n            \"id\": \"1f886904-5eff-498e-ac5a-418f3cb069bc\",\n            \"name\": \"private-demo-1\",\n        },\n        {\n            \"id\": \"6c86fbe5-5efb-4513-80b2-28bdf309d6ba\",\n            \"name\": \"public3\",\n        },\n        {\n            \"id\": \"34c9bf52-03a5-4637-8fc4-9ce5298bc9a5\",\n            \"name\": \"public1\",\n        },\n        {\n            \"id\": \"151134a5-62e2-44a2-8ede-7b22a9b4c5cc\",\n            \"name\": \"public2\",\n        }\n    ]\n }\n\n\nIf user 'glance' lists images he sees only the three public ones (despite being an admin):\n\n $ curl -H \"x-auth-token: `cat glance.token`\" http://localhost:9292/v1/images 2>/dev/null | python -mjson.tool | egrep -v 'checksum|container|disk|size'\n {\n    \"images\": [\n        {\n            \"id\": \"6c86fbe5-5efb-4513-80b2-28bdf309d6ba\",\n            \"name\": \"public3\",\n        },\n        {\n            \"id\": \"34c9bf52-03a5-4637-8fc4-9ce5298bc9a5\",\n            \"name\": \"public1\",\n        },\n        {\n            \"id\": \"151134a5-62e2-44a2-8ede-7b22a9b4c5cc\",\n            \"name\": \"public2\",\n        }\n    ]\n }\n\nie this API call means \"give me only public images and images that I [glance] own\".\n\nSo ... its legal for the 'glance' user to do this:\n\n GET //v1/images/detail?sort_key=name&sort_dir=asc&limit=1&marker=34c9bf52-03a5-4637-8fc4-9ce5298bc9a5\n GET //v1/images/detail?sort_key=name&sort_dir=asc&limit=1&marker=151134a5-62e2-44a2-8ede-7b22a9b4c5cc\n GET //v1/images/detail?sort_key=name&sort_dir=asc&limit=1&marker=6c86fbe5-5efb-4513-80b2-28bdf309d6ba\n\n(this is what the glance cli command will do if you set --page-size 1)\n\nbecause in each case the three markers exist in the original list. \n\nHowever, this:\n\n GET //v1/images/detail?marker=545ac52f-3985-4331-b366-d6058c84b017\n\nshould return a 404 since \"545ac52f-3985-4331-b366-d6058c84b017\" is neither \"a public image or an\nimage that I [glance] own\". (Currently this is what returns a 500).\n\nNote that it *is* possible for the glance admin to list all six images, by using the is_public=None query string:\n\n $ curl -H \"x-auth-token: `cat glance.token`\" http://localhost:9292/v1/images?is_public=None 2>/dev/null | python -mjson.tool | egrep -v 'checksum|container|disk|size'\n {\n    \"images\": [\n        {\n            \"id\": \"545ac52f-3985-4331-b366-d6058c84b017\",\n            \"name\": \"private-demo-3\",\n        },\n        {\n            \"id\": \"4db5ccbd-f673-44fb-840e-036ccc30d260\",\n            \"name\": \"private-demo-2\",\n        },\n        {\n            \"id\": \"1f886904-5eff-498e-ac5a-418f3cb069bc\",\n            \"name\": \"private-demo-1\",\n        },\n        {\n            \"id\": \"6c86fbe5-5efb-4513-80b2-28bdf309d6ba\",\n            \"name\": \"public3\",\n        },\n        {\n            \"id\": \"34c9bf52-03a5-4637-8fc4-9ce5298bc9a5\",\n            \"name\": \"public1\",\n        },\n        {\n            \"id\": \"151134a5-62e2-44a2-8ede-7b22a9b4c5cc\",\n            \"name\": \"public2\",\n        }\n    ]\n }\n\nThis call means 'give me all images -- whether I own them or not'. It follows that\nin this case it *is* legal for 'glance' to use 545ac52f-3985-4331-b366-d6058c84b017 as a marker, and\nthis works fine with or without the patch:\n\n $ curl -H \"x-auth-token: `cat glance.token`\" 'http://localhost:9292/v1/images?is_public=None&marker=545ac52f-3985-4331-b366-d6058c84b017' | python -mjson.tool | egrep -v 'checksum|container|disk|size'\n {\n    \"images\": [\n        {\n            \"id\": \"4db5ccbd-f673-44fb-840e-036ccc30d260\",\n            \"name\": \"private-demo-2\",\n        },\n        {\n            \"id\": \"1f886904-5eff-498e-ac5a-418f3cb069bc\",\n            \"name\": \"private-demo-1\",\n        },\n        {\n            \"id\": \"6c86fbe5-5efb-4513-80b2-28bdf309d6ba\",\n            \"name\": \"public3\",\n        },\n        {\n            \"id\": \"34c9bf52-03a5-4637-8fc4-9ce5298bc9a5\",\n            \"name\": \"public1\",\n        },\n        {\n            \"id\": \"151134a5-62e2-44a2-8ede-7b22a9b4c5cc\",\n            \"name\": \"public2\",\n        }\n    ]\n }",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "8503bbac07529dcb9f78f1d73be09fce21c72e57",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2013-04-26 16:25:29.000000000",
            "message": "Patch Set 3:\n\nI think I understand your point, and I agree that this patch won't affect the behavior I posted in my comment. However, what I was trying to show with my comment is that other query parameters should not affect the validity of a given marker. So, <private image uuid> is a valid marker in a list of public + owned + shared images (the default filter), just as <fedora image uuid> is a valid marker in a list of ubuntu images.\n\nDoes this make sense? If not, care to take up the gauntlet in #openstack-glance ?\n\nThanks!",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "b12ec13f0f75e77a8787a2d71839e6920782a196",
            "author": {
                "_account_id": 9,
                "name": "LaunchpadSync",
                "username": "launchpadsync"
            },
            "real_author": {
                "_account_id": 9,
                "name": "LaunchpadSync",
                "username": "launchpadsync"
            },
            "date": "2013-05-04 06:03:04.000000000",
            "message": "Patch Set 3: Abandoned\n\ncode review expired after 1 week of no activity after a negative review, it can be restored using the `Restore Change` button under the Patch Set on the web interface",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "b9ffad528940ac6050c1c3339966043cdcd80a84",
            "author": {
                "_account_id": 9,
                "name": "LaunchpadSync",
                "username": "launchpadsync"
            },
            "real_author": {
                "_account_id": 9,
                "name": "LaunchpadSync",
                "username": "launchpadsync"
            },
            "date": "2013-05-04 06:03:04.000000000",
            "message": "Patch Set 3:\n\ncode review expired after 1 week of no activity after a negative review, it can be restored using the `Restore Change` button under the Patch Set on the web interface",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "72cc05a05058c3ac10a805e78ac3b5fc7cbf3f0f",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-05-09 15:34:40.000000000",
            "message": "Patch Set 3: Restored\n\nNew patch.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "5348d123a39822a145c9295cf24202d83f604475",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-05-09 15:34:54.000000000",
            "message": "Uploaded patch set 4.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "87e641cff8d1b6845d3c1ba8bb6a4219bff6506f",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2013-05-09 15:58:44.000000000",
            "message": "Patch Set 4: Works for me\n\nSmokeStack Results (patch set 4):\n\tLibvirt (Fedora 18) Success: http://smokestack.openstack.org/?go=/jobs/85964\n",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "d89867b5f7ea9def120f141433078734507543ec",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-05-09 16:20:18.000000000",
            "message": "Patch Set 4: Doesn't seem to work\n\nBuild failed.  For information on how to proceed, see https://wiki.openstack.org/wiki/GerritJenkinsGithub#Test_Failures\n\n- http://logs.openstack.org/27491/4/check/gate-glance-pep8/4636 : FAILURE in 00:01:21\n- http://docs-draft.openstack.org/27491/4/check/gate-glance-docs/2663/doc/build/html/ : SUCCESS in 00:01:36\n- http://logs.openstack.org/27491/4/check/gate-glance-python26/4081 : SUCCESS in 00:12:02\n- http://logs.openstack.org/27491/4/check/gate-glance-python26-centos6/66 : SUCCESS in 00:10:21 (non-voting)\n- http://logs.openstack.org/27491/4/check/gate-glance-python27/4112 : SUCCESS in 00:08:37\n- http://logs.openstack.org/27491/4/check/gate-tempest-devstack-vm-full/15233 : SUCCESS in 00:45:11\n- http://logs.openstack.org/27491/4/check/gate-tempest-devstack-vm-postgres-full/14948 : FAILURE in 00:45:02 (non-voting)\n- http://logs.openstack.org/27491/4/check/gate-tempest-devstack-vm-quantum/21499 : SUCCESS in 00:21:27\n- http://logs.openstack.org/27491/4/check/gate-grenade-devstack-vm/2972 : SUCCESS in 00:13:59 (non-voting)\n",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "8ceccbcb743716e2babce3cd57773443b89475a2",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-05-10 10:42:19.000000000",
            "message": "Uploaded patch set 5.",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "a208b9be67a86adf74378e680499be8043157175",
            "author": {
                "_account_id": 5494,
                "name": "Trivial Rebase",
                "email": "trivial-rebase@review.openstack.org",
                "username": "trivial-rebase"
            },
            "real_author": {
                "_account_id": 5494,
                "name": "Trivial Rebase",
                "email": "trivial-rebase@review.openstack.org",
                "username": "trivial-rebase"
            },
            "date": "2013-05-10 10:42:27.000000000",
            "message": "Patch Set 5:\n\nNew patchset patch-id matches previous patchset, but whitespace content has changed.",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "c82ad895d805552bb4fa17d9323f254d27622053",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-05-10 11:27:40.000000000",
            "message": "Patch Set 5: Doesn't seem to work\n\nBuild failed.  For information on how to proceed, see https://wiki.openstack.org/wiki/GerritJenkinsGithub#Test_Failures\n\n- http://logs.openstack.org/27491/5/check/gate-glance-pep8/4646 : SUCCESS in 00:01:23\n- http://docs-draft.openstack.org/27491/5/check/gate-glance-docs/2673/doc/build/html/ : SUCCESS in 00:01:26\n- http://logs.openstack.org/27491/5/check/gate-glance-python26/4092 : SUCCESS in 00:12:28\n- http://logs.openstack.org/27491/5/check/gate-glance-python27/4122 : FAILURE in 00:08:42\n- http://logs.openstack.org/27491/5/check/gate-tempest-devstack-vm-full/15378 : SUCCESS in 00:45:00\n- http://logs.openstack.org/27491/5/check/gate-tempest-devstack-vm-postgres-full/15094 : FAILURE in 00:44:58 (non-voting)\n- http://logs.openstack.org/27491/5/check/gate-tempest-devstack-vm-quantum/21664 : SUCCESS in 00:21:04\n- http://logs.openstack.org/27491/5/check/gate-grenade-devstack-vm/3109 : FAILURE in 00:10:13 (non-voting)\n",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "2278552a3fa62f5a28d3a003d4627a6c7978a629",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-05-10 12:48:23.000000000",
            "message": "Patch Set 5:\n\nrecheck 1178667",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "6da05dd8f826fb357eab214160cb6c9ab08e66db",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-05-13 08:49:42.000000000",
            "message": "Patch Set 5:\n\nrecheck 1178667",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "1c1de3c4ad9adda1f5ffd5faa33cbd5f9b508f51",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-05-14 09:00:00.000000000",
            "message": "Patch Set 5:\n\nrecheck 1178667",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "52f299286f7f3a7955babbfff52c4085709e3c91",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-05-14 10:22:10.000000000",
            "message": "Patch Set 5:\n\nrecheck bug 1178667",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "a0e1b50195c012484c1647d67a57c72b4c908a86",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-05-14 11:11:24.000000000",
            "message": "Patch Set 5: Works for me\n\nBuild succeeded.\n\n- http://logs.openstack.org/27491/5/check/gate-glance-pep8/4664 : SUCCESS in 00:01:28\n- http://docs-draft.openstack.org/27491/5/check/gate-glance-docs/2691/doc/build/html/ : SUCCESS in 00:02:48\n- http://logs.openstack.org/27491/5/check/gate-glance-python26/4110 : SUCCESS in 00:12:27\n- http://logs.openstack.org/27491/5/check/gate-glance-python27/4140 : SUCCESS in 00:09:07\n- http://logs.openstack.org/27491/5/check/gate-tempest-devstack-vm-full/15859 : SUCCESS in 00:45:26\n- http://logs.openstack.org/27491/5/check/gate-tempest-devstack-vm-postgres-full/15575 : FAILURE in 00:48:59 (non-voting)\n- http://logs.openstack.org/27491/5/check/gate-tempest-devstack-vm-quantum/22299 : SUCCESS in 00:20:14\n- http://logs.openstack.org/27491/5/check/gate-grenade-devstack-vm/3511 : FAILURE in 00:09:44 (non-voting)\n",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "3252575713d0271e162fea9f5d5971d7b27cd844",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2013-05-17 01:36:09.000000000",
            "message": "Patch Set 5: I would prefer that you didn't merge this\n\nSorry for the -1, but I want to understand why the previous step of removing is_public doesn't prevent the 500, and its taking me some time to sort that out.\n\nAt minimum though, I would imagine that this change to the sqlalchemy db api would need to be reflected in the simple db api as well.",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "eed6134a4a537957d3318a4115bc09d936fc9d8e",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-05-17 09:23:12.000000000",
            "message": "Patch Set 5: (1 inline comment)\n\nHey Mark thanks for the revieW (no need to apologise!).\n\nI left a new comment on my last patch set to try and clarify. Let me know if that makes sense.",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "35ac61e254e0f01492a2d9e4d879d3fb550c8678",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2013-05-17 17:27:55.000000000",
            "message": "Patch Set 5: No score\n\nStuart,\n\nYou really hit the nail on the head. I understand now.\n\nAny thoughts about squaring up the interfaces between the simple and sqlalchemy apis? (oh and maybe a db functional test?)\n\nThree cheers,\nmarkwash",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "80ce5e185603737e4c21eaea0aaf6e10260da749",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-05-21 17:25:05.000000000",
            "message": "Uploaded patch set 6.",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "4595a8725a924d22eb3e3584f614eae35b642870",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-05-21 18:15:27.000000000",
            "message": "Patch Set 6: Works for me\n\nBuild succeeded.\n\n- http://logs.openstack.org/27491/6/check/gate-glance-pep8/4720 : SUCCESS in 1m 34s\n- http://docs-draft.openstack.org/27491/6/check/gate-glance-docs/2747/doc/build/html/ : SUCCESS in 1m 36s\n- http://logs.openstack.org/27491/6/check/gate-glance-python26/4166 : SUCCESS in 12m 46s\n- http://logs.openstack.org/27491/6/check/gate-glance-python27/4196 : SUCCESS in 9m 28s\n- http://logs.openstack.org/27491/6/check/gate-tempest-devstack-vm-full/17362 : SUCCESS in 44m 46s\n- http://logs.openstack.org/27491/6/check/gate-tempest-devstack-vm-postgres-full/17072 : FAILURE in 50m 09s (non-voting)\n- http://logs.openstack.org/27491/6/check/gate-tempest-devstack-vm-quantum/24034 : SUCCESS in 20m 41s\n- http://logs.openstack.org/27491/6/check/gate-grenade-devstack-vm/4898 : FAILURE in 10m 33s (non-voting)\n",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "d92cf623c0eadf2acf5762d1ff4915ab18b33647",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2013-05-28 17:08:51.000000000",
            "message": "Patch Set 6: Looks good to me (core reviewer)\n\nGreat! Thanks Stuart.",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "7ac12dfd35ef2c4dbd693a77377a6f484270468c",
            "author": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "real_author": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "date": "2013-06-07 08:02:23.000000000",
            "message": "Patch Set 6: Looks good to me (core reviewer); Approved\n\n",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "9358c3a8f1408d19a010a6b4772f609c007a0af1",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-06-07 08:02:25.000000000",
            "message": "Patch Set 6: No score\n\nStarting gate jobs.\nhttp://status.openstack.org/zuul/",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "02af8afc1bd98a8196d68ccafc5b5d7f9804f96f",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-06-07 08:44:42.000000000",
            "message": "Patch Set 6: Fails\n\nBuild failed.  For information on how to proceed, see https://wiki.openstack.org/wiki/GerritJenkinsGithub#Test_Failures\n\nThis change was unable to be automatically merged with the current state of the repository. Please rebase your change and upload a new patchset.",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "7d69e108cbd69fbf6de673a6ead09d1f08383161",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2013-06-10 11:58:19.000000000",
            "message": "Uploaded patch set 7.",
            "accounts_in_message": [],
            "_revision_number": 7
        },
        {
            "id": "6ea773f8fd8e411febfabac5a84589fbc404a4b9",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2013-06-10 12:20:13.000000000",
            "message": "Patch Set 7: Works for me\n\nSmokeStack Results (patch set 7):\n\tLibvirt (Fedora 18) Success: http://smokestack.openstack.org/?go=/jobs/90344\n",
            "accounts_in_message": [],
            "_revision_number": 7
        },
        {
            "id": "4b257910ade917805ea92b20e997b07bc874b885",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-06-10 12:43:47.000000000",
            "message": "Patch Set 7: Works for me\n\nBuild succeeded.\n\n- http://logs.openstack.org/27491/7/check/gate-glance-pep8/4912 : SUCCESS in 1m 58s\n- http://docs-draft.openstack.org/27491/7/check/gate-glance-docs/2940/doc/build/html/ : SUCCESS in 2m 12s\n- http://logs.openstack.org/27491/7/check/gate-glance-python26/4357 : SUCCESS in 9m 47s\n- http://logs.openstack.org/27491/7/check/gate-glance-python27/4388 : SUCCESS in 7m 13s\n- http://logs.openstack.org/27491/7/check/gate-tempest-devstack-vm-full/21868 : SUCCESS in 44m 49s\n- http://logs.openstack.org/27491/7/check/gate-tempest-devstack-vm-postgres-full/21575 : SUCCESS in 44m 21s\n- http://logs.openstack.org/27491/7/check/gate-tempest-devstack-vm-quantum/29053 : SUCCESS in 18m 42s\n- http://logs.openstack.org/27491/7/check/gate-grenade-devstack-vm/9080 : SUCCESS in 16m 44s (non-voting)\n",
            "accounts_in_message": [],
            "_revision_number": 7
        },
        {
            "id": "bd1058841cf74a6eafa353ee5f69f053d6945c6b",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2013-06-10 22:29:03.000000000",
            "message": "Patch Set 7: Looks good to me (core reviewer)\n\n",
            "accounts_in_message": [],
            "_revision_number": 7
        },
        {
            "id": "b9c17d0bd7ab8c7e87df81729927f8551a3054ba",
            "author": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "real_author": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "date": "2013-06-12 09:25:26.000000000",
            "message": "Patch Set 7: Looks good to me (core reviewer); Approved\n\nThanks Stuart!",
            "accounts_in_message": [],
            "_revision_number": 7
        },
        {
            "id": "999a60fe4f4c0bcd9be66faa4bcd1986e32237ca",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-06-12 09:25:27.000000000",
            "message": "Patch Set 7: No score\n\nStarting gate jobs.\nhttp://status.openstack.org/zuul/",
            "accounts_in_message": [],
            "_revision_number": 7
        },
        {
            "id": "437ec36850267aed1365569ed020c09ce1d82089",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-06-12 10:49:08.000000000",
            "message": "Patch Set 7: Verified\n\nBuild succeeded.\n\n- http://docs-draft.openstack.org/27491/7/gate/gate-glance-docs/2967/doc/build/html/ : SUCCESS in 2m 28s\n- http://logs.openstack.org/27491/7/gate/gate-glance-pep8/4939 : SUCCESS in 2m 12s\n- http://logs.openstack.org/27491/7/gate/gate-glance-python26/4384 : SUCCESS in 11m 30s\n- http://logs.openstack.org/27491/7/gate/gate-glance-python27/4415 : SUCCESS in 7m 36s\n- http://logs.openstack.org/27491/7/gate/gate-tempest-devstack-vm-full/22513 : SUCCESS in 39m 36s\n- http://logs.openstack.org/27491/7/gate/gate-tempest-devstack-vm-postgres-full/22220 : SUCCESS in 42m 24s\n- http://logs.openstack.org/27491/7/gate/gate-tempest-devstack-vm-quantum/29786 : SUCCESS in 17m 43s\n- http://logs.openstack.org/27491/7/gate/gate-grenade-devstack-vm/9655 : SUCCESS in 17m 18s (non-voting)\n",
            "accounts_in_message": [],
            "_revision_number": 7
        },
        {
            "id": "5ff4b813fb0a7b1daf9cf60a281baab3e26395e1",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-06-12 10:49:09.000000000",
            "message": "Change has been successfully merged into the git repository.",
            "accounts_in_message": [],
            "_revision_number": 7
        }
    ],
    "requirements": [],
    "submit_records": []
}