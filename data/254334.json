{
    "id": "openstack%2Fglance~master~Ie9353bc254d11870abc102a7b9b4c7db3917abb4",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bug/1549869",
    "hashtags": [],
    "change_id": "Ie9353bc254d11870abc102a7b9b4c7db3917abb4",
    "subject": "Return 204 rather than 403 when no image data",
    "status": "MERGED",
    "created": "2015-12-07 18:02:23.000000000",
    "updated": "2016-03-04 22:06:58.000000000",
    "submitted": "2016-03-04 22:06:56.000000000",
    "submitter": {
        "_account_id": 3,
        "name": "Jenkins",
        "username": "jenkins"
    },
    "insertions": 9,
    "deletions": 32,
    "total_comment_count": 0,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "e33387b5d8334026ea9919caff8e144ab8ad2159",
    "_number": 254334,
    "owner": {
        "_account_id": 455,
        "name": "Stuart McLaren",
        "email": "stuart.mclaren@hpe.com",
        "username": "stuart-mclaren"
    },
    "labels": {
        "Verified": {
            "approved": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 11391,
                    "name": "Mikhail Fedosin",
                    "email": "mfedosin@redhat.com",
                    "username": "fedosinme"
                },
                {
                    "value": 0,
                    "_account_id": 6159,
                    "name": "Flavio Percoco",
                    "display_name": "flaper87",
                    "email": "fpercoco@redhat.com",
                    "username": "flaper87"
                },
                {
                    "value": 0,
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 0,
                    "_account_id": 12000,
                    "name": "Ian Cordasco",
                    "email": "sigmavirus24@gmail.com",
                    "username": "sigmavirus24"
                },
                {
                    "value": 0,
                    "_account_id": 5314,
                    "name": "Brian Rosmaita",
                    "email": "rosmaita.fossdev@gmail.com",
                    "username": "brian-rosmaita"
                },
                {
                    "value": 0,
                    "_account_id": 5202,
                    "name": "Erno Kuvaja",
                    "email": "jokke@usr.fi",
                    "username": "jokke"
                },
                {
                    "value": 2,
                    "date": "2016-03-04 22:06:56.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                },
                {
                    "value": 0,
                    "_account_id": 17123,
                    "name": "Tom Cocozzello (tjcocozz)",
                    "email": "tjcocozz@us.ibm.com",
                    "username": "tcocozzello"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "approved": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "all": [
                {
                    "value": 2,
                    "date": "2016-03-04 14:44:54.000000000",
                    "_account_id": 11391,
                    "name": "Mikhail Fedosin",
                    "email": "mfedosin@redhat.com",
                    "username": "fedosinme"
                },
                {
                    "value": 1,
                    "date": "2016-02-26 17:20:52.000000000",
                    "permitted_voting_range": {
                        "min": 1,
                        "max": 1
                    },
                    "_account_id": 6159,
                    "name": "Flavio Percoco",
                    "display_name": "flaper87",
                    "email": "fpercoco@redhat.com",
                    "username": "flaper87"
                },
                {
                    "value": 0,
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 2,
                    "date": "2016-03-04 17:04:14.000000000",
                    "_account_id": 12000,
                    "name": "Ian Cordasco",
                    "email": "sigmavirus24@gmail.com",
                    "username": "sigmavirus24"
                },
                {
                    "value": 0,
                    "date": "2016-03-01 21:00:17.000000000",
                    "permitted_voting_range": {
                        "min": 0,
                        "max": 2
                    },
                    "_account_id": 5314,
                    "name": "Brian Rosmaita",
                    "email": "rosmaita.fossdev@gmail.com",
                    "username": "brian-rosmaita"
                },
                {
                    "value": 2,
                    "date": "2016-03-04 13:47:55.000000000",
                    "permitted_voting_range": {
                        "min": 2,
                        "max": 2
                    },
                    "_account_id": 5202,
                    "name": "Erno Kuvaja",
                    "email": "jokke@usr.fi",
                    "username": "jokke"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                },
                {
                    "value": 1,
                    "date": "2016-03-04 14:22:09.000000000",
                    "permitted_voting_range": {
                        "min": 1,
                        "max": 1
                    },
                    "_account_id": 17123,
                    "name": "Tom Cocozzello (tjcocozz)",
                    "email": "tjcocozz@us.ibm.com",
                    "username": "tcocozzello"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "approved": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 11391,
                    "name": "Mikhail Fedosin",
                    "email": "mfedosin@redhat.com",
                    "username": "fedosinme"
                },
                {
                    "value": 0,
                    "_account_id": 6159,
                    "name": "Flavio Percoco",
                    "display_name": "flaper87",
                    "email": "fpercoco@redhat.com",
                    "username": "flaper87"
                },
                {
                    "value": 0,
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 1,
                    "date": "2016-03-04 17:04:14.000000000",
                    "_account_id": 12000,
                    "name": "Ian Cordasco",
                    "email": "sigmavirus24@gmail.com",
                    "username": "sigmavirus24"
                },
                {
                    "value": 0,
                    "_account_id": 5314,
                    "name": "Brian Rosmaita",
                    "email": "rosmaita.fossdev@gmail.com",
                    "username": "brian-rosmaita"
                },
                {
                    "value": 0,
                    "_account_id": 5202,
                    "name": "Erno Kuvaja",
                    "email": "jokke@usr.fi",
                    "username": "jokke"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                },
                {
                    "value": 0,
                    "_account_id": 17123,
                    "name": "Tom Cocozzello (tjcocozz)",
                    "email": "tjcocozz@us.ibm.com",
                    "username": "tcocozzello"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "value": 0,
                    "_account_id": 11391,
                    "name": "Mikhail Fedosin",
                    "email": "mfedosin@redhat.com",
                    "username": "fedosinme"
                },
                {
                    "value": 0,
                    "_account_id": 6159,
                    "name": "Flavio Percoco",
                    "display_name": "flaper87",
                    "email": "fpercoco@redhat.com",
                    "username": "flaper87"
                },
                {
                    "value": 0,
                    "_account_id": 455,
                    "name": "Stuart McLaren",
                    "email": "stuart.mclaren@hpe.com",
                    "username": "stuart-mclaren"
                },
                {
                    "value": 0,
                    "_account_id": 12000,
                    "name": "Ian Cordasco",
                    "email": "sigmavirus24@gmail.com",
                    "username": "sigmavirus24"
                },
                {
                    "value": 0,
                    "_account_id": 5314,
                    "name": "Brian Rosmaita",
                    "email": "rosmaita.fossdev@gmail.com",
                    "username": "brian-rosmaita"
                },
                {
                    "value": 0,
                    "_account_id": 5202,
                    "name": "Erno Kuvaja",
                    "email": "jokke@usr.fi",
                    "username": "jokke"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                },
                {
                    "value": 0,
                    "_account_id": 17123,
                    "name": "Tom Cocozzello (tjcocozz)",
                    "email": "tjcocozz@us.ibm.com",
                    "username": "tcocozzello"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            {
                "_account_id": 5202,
                "name": "Erno Kuvaja",
                "email": "jokke@usr.fi",
                "username": "jokke"
            },
            {
                "_account_id": 5314,
                "name": "Brian Rosmaita",
                "email": "rosmaita.fossdev@gmail.com",
                "username": "brian-rosmaita"
            },
            {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            {
                "_account_id": 17123,
                "name": "Tom Cocozzello (tjcocozz)",
                "email": "tjcocozz@us.ibm.com",
                "username": "tcocozzello"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2016-02-26 17:20:52.000000000",
            "updated_by": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "reviewer": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-03-01 21:00:17.000000000",
            "updated_by": {
                "_account_id": 5314,
                "name": "Brian Rosmaita",
                "email": "rosmaita.fossdev@gmail.com",
                "username": "brian-rosmaita"
            },
            "reviewer": {
                "_account_id": 5314,
                "name": "Brian Rosmaita",
                "email": "rosmaita.fossdev@gmail.com",
                "username": "brian-rosmaita"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-03-04 13:47:55.000000000",
            "updated_by": {
                "_account_id": 5202,
                "name": "Erno Kuvaja",
                "email": "jokke@usr.fi",
                "username": "jokke"
            },
            "reviewer": {
                "_account_id": 5202,
                "name": "Erno Kuvaja",
                "email": "jokke@usr.fi",
                "username": "jokke"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-03-04 14:22:09.000000000",
            "updated_by": {
                "_account_id": 17123,
                "name": "Tom Cocozzello (tjcocozz)",
                "email": "tjcocozz@us.ibm.com",
                "username": "tcocozzello"
            },
            "reviewer": {
                "_account_id": 17123,
                "name": "Tom Cocozzello (tjcocozz)",
                "email": "tjcocozz@us.ibm.com",
                "username": "tcocozzello"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-03-04 14:44:54.000000000",
            "updated_by": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "reviewer": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-03-04 17:04:14.000000000",
            "updated_by": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "reviewer": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-03-04 22:06:56.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "f6075f242e173db8bdb3941c55de230a953b84ee",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2015-12-07 18:02:23.000000000",
            "message": "Uploaded patch set 1.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "55923c9c429b6ca62e307048c7c968bcbd454708",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2015-12-07 18:06:19.000000000",
            "message": "Patch Set 1:\n\nSuggested client side fixes:\n\nhttps://review.openstack.org/#/c/199549/\n\nhttps://review.openstack.org/#/c/254328/",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "e35cb7431681a40ecb7fd0ef299ca6a12aff9754",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2015-12-08 01:33:35.000000000",
            "message": "Patch Set 1: Verified+1\n\nBuild succeeded (check pipeline).\n\n- gate-glance-python34 http://logs.openstack.org/34/254334/1/check/gate-glance-python34/634764a/ : SUCCESS in 4m 27s\n- gate-glance-pep8 http://logs.openstack.org/34/254334/1/check/gate-glance-pep8/a0c5b82/ : SUCCESS in 1m 36s\n- gate-glance-docs http://docs-draft.openstack.org/34/254334/1/check/gate-glance-docs/800c84d//doc/build/html/ : SUCCESS in 1m 44s\n- gate-glance-python27 http://logs.openstack.org/34/254334/1/check/gate-glance-python27/7914f18/ : SUCCESS in 7m 39s\n- gate-tempest-dsvm-full http://logs.openstack.org/34/254334/1/check/gate-tempest-dsvm-full/9584ead/ : SUCCESS in 51m 44s\n- gate-tempest-dsvm-postgres-full http://logs.openstack.org/34/254334/1/check/gate-tempest-dsvm-postgres-full/c8d9eee/ : SUCCESS in 51m 23s\n- gate-tempest-dsvm-neutron-full http://logs.openstack.org/34/254334/1/check/gate-tempest-dsvm-neutron-full/0210665/ : SUCCESS in 1h 13m 23s\n- gate-grenade-dsvm http://logs.openstack.org/34/254334/1/check/gate-grenade-dsvm/b4b05eb/ : SUCCESS in 41m 32s\n- gate-tempest-dsvm-large-ops http://logs.openstack.org/34/254334/1/check/gate-tempest-dsvm-large-ops/f0642a2/ : SUCCESS in 34m 27s\n- gate-tempest-dsvm-neutron-large-ops http://logs.openstack.org/34/254334/1/check/gate-tempest-dsvm-neutron-large-ops/844f2e5/ : SUCCESS in 32m 55s\n- gate-tempest-dsvm-full-ceph http://logs.openstack.org/34/254334/1/check/gate-tempest-dsvm-full-ceph/5824473/ : SUCCESS in 51m 48s\n- gate-rally-dsvm-glance http://logs.openstack.org/34/254334/1/check/gate-rally-dsvm-glance/c986dec/ : SUCCESS in 46m 46s (non-voting)\n- gate-glance-python27-constraints http://logs.openstack.org/34/254334/1/check/gate-glance-python27-constraints/657afe1/ : SUCCESS in 6m 30s (non-voting)\n- gate-glance-python34-constraints http://logs.openstack.org/34/254334/1/check/gate-glance-python34-constraints/8b166a5/ : SUCCESS in 4m 35s (non-voting)\n- gate-glance-docs-constraints http://docs-draft.openstack.org/34/254334/1/check/gate-glance-docs-constraints/419b0af//doc/build/html/ : SUCCESS in 1m 51s (non-voting)\n- gate-glance-pep8-constraints http://logs.openstack.org/34/254334/1/check/gate-glance-pep8-constraints/79c620c/ : SUCCESS in 1m 35s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "64c1279092b5d7e07f5857061190ee6904f13253",
            "author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "real_author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "date": "2016-01-15 13:17:22.000000000",
            "message": "Patch Set 1: Code-Review-2\n\nStuart, I think you're wrong here. You confuse 2 cases:\n\n1. If image has no data, but it's active glance returns 204 and it's correct. It may happen if we created an empty image and provided size=0. See this paste: http://paste.openstack.org/show/484006/\n\n2. If we want to download data from image that is not active it returns 403.\n\nSo Darja's code is right and we shouldn't revert it.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "b42af9876a3bb51ea2f6a72ed30d46e2df49f033",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2016-02-22 17:14:56.000000000",
            "message": "Patch Set 1:\n\n> 1. If image has no data, but it's active glance returns 204 and it's correct.\n\nActually, if you set disk_format and container_format, a zero size active image returns 200:\n\nhttp://paste.openstack.org/show/487773\n\nObviously the successful download of a zero size image should have the same response code as a download of a 1 byte image.\n\n(Why would you would ever want to mix 204 with Content-Length: 0?)\n\n> 2. If we want to download data from image that is not active it returns 403.\n\nThat is the problem. It was 204 in kilo. We shouldn't have changed it.\n\nYou +2'd this patch: https://review.openstack.org/#/c/199549 which says:\n\n Glance client will also get a 204 response when an image is in a queued\n state (this is true for 'master' and liberty/kilo/juno based servers).\n\nIt looks like we are now in this inconsistent situation:\n\njuno: 204 (released)\nkilo: 204 (released)\nliberty: 403 (released)",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "f9afbaf12fd8243b79e3ce393d38eb499503b189",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2016-02-22 17:20:43.000000000",
            "message": "Patch Set 1:\n\nOops, this was still 204 in liberty, so this is where we're at:\n\njuno: 204 (released)\nkilo: 204 (released)\nliberty: 204 (released)\nmitaka: 403 (not released)\n\nSo it's not too late to revert for mitaka.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "aa13265d572b3d5290f3fd02235f180ae0c785b2",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2016-02-22 17:38:18.000000000",
            "message": "Patch Set 1:\n\nHere is Liberty returning 204 for a queued image:\n\nhttp://paste.openstack.org/show/487782\n\nAnd 200 for a zero size image:\n\nhttp://paste.openstack.org/show/487784",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "51b08b4dfdf5a62816ed09392054a2725a98f8f0",
            "author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "real_author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "date": "2016-02-25 16:07:19.000000000",
            "message": "Patch Set 1:\n\nI meant that Glance still returns 204 when image was created with v1 and size=0.\n\nIn other case you're right. I proposed a patch that returns the old behavior back without reverts. https://review.openstack.org/#/c/284780/1",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "f95fd24188e430321ccb537e4de81b42b5cb6623",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2016-02-25 16:28:40.000000000",
            "message": "Patch Set 1:\n\nMike,\n\nhttps://review.openstack.org/#/c/284780\n\ndoesn't give the old kilo behaviour back. Eg an image in 'saving' state used to return 204, but with https://review.openstack.org/#/c/284780 it returns 403.\n\nLet me push up another patch here. I'll keep the 'or not req.context.is_admin' part, so it won't be a full revert.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "5f955ad8627992df776b31c3d74d08e4f84db0ed",
            "author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "real_author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "date": "2016-02-25 16:34:23.000000000",
            "message": "Patch Set 1:\n\nAh, if we just need to add 'saving there, then there is no problem at all. Add a new patch.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "21d324ce4a5c3ae409b061d1e7206ece882685ea",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2016-02-25 16:37:07.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "4d05d4eabb79ff7a08438b3031ed6ca756ebac75",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2016-02-25 16:51:31.000000000",
            "message": "Patch Set 2:\n\n> Ah, if we just need to add 'saving there, then there is no problem at all. Add a new patch.\n\nWe'd need to add all states, eg \"killed\" aswell. I think it's best to just add the 'deactivate' check.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "825ff003b40fc210c0e2754e9e735b395e8f49e3",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2016-02-25 20:32:02.000000000",
            "message": "Patch Set 2: Verified-1\n\nBuild failed (check pipeline).  For information on how to proceed, see http://docs.openstack.org/infra/manual/developers.html#automated-testing\n\n- gate-glance-python34 http://logs.openstack.org/34/254334/2/check/gate-glance-python34/c92697d/ : SUCCESS in 3m 37s\n- gate-glance-pep8 http://logs.openstack.org/34/254334/2/check/gate-glance-pep8/454d414/ : SUCCESS in 1m 10s\n- gate-glance-docs http://docs-draft.openstack.org/34/254334/2/check/gate-glance-docs/22bef55//doc/build/html/ : SUCCESS in 1m 22s\n- gate-glance-python27 http://logs.openstack.org/34/254334/2/check/gate-glance-python27/9d4a780/ : FAILURE in 5m 51s\n- gate-tempest-dsvm-full http://logs.openstack.org/34/254334/2/check/gate-tempest-dsvm-full/ac17e4d/ : SUCCESS in 52m 48s\n- gate-tempest-dsvm-postgres-full http://logs.openstack.org/34/254334/2/check/gate-tempest-dsvm-postgres-full/b83149e/ : SUCCESS in 58m 09s\n- gate-tempest-dsvm-neutron-full http://logs.openstack.org/34/254334/2/check/gate-tempest-dsvm-neutron-full/e7de8e4/ : SUCCESS in 1h 14m 20s\n- gate-grenade-dsvm http://logs.openstack.org/34/254334/2/check/gate-grenade-dsvm/4acfe62/ : SUCCESS in 42m 13s\n- gate-tempest-dsvm-full-ceph http://logs.openstack.org/34/254334/2/check/gate-tempest-dsvm-full-ceph/9486da4/ : FAILURE in 39m 08s\n- gate-tempest-dsvm-full-devstack-plugin-ceph-nv http://logs.openstack.org/34/254334/2/check/gate-tempest-dsvm-full-devstack-plugin-ceph-nv/e7d7ba7/ : SUCCESS in 32m 24s (non-voting)\n- gate-rally-dsvm-glance http://logs.openstack.org/34/254334/2/check/gate-rally-dsvm-glance/f6e2cbc/ : SUCCESS in 56m 07s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "10190b91b2073d88dbc73e3bf759f75a564a3a8b",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2016-02-26 14:50:48.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "56b4294192aed7bbc66c8245bd71d3e4f0d0f49f",
            "author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "real_author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "date": "2016-02-26 15:45:08.000000000",
            "message": "Patch Set 3:\n\nSeriously, return 204 when image is killed is dumb :) I understand if we do it in queued or saving statuses, but never in killed! Read API-WG guidelines...\n\nMoreover, after reading the standard I tend to believe that 403 is absolutely correct response if user wants to download image in statuses other, than 'active' or 'deactivated' with admin's context.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "a4baf3195f83a543b3e18873df147c509fccd7f3",
            "author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "real_author": {
                "_account_id": 455,
                "name": "Stuart McLaren",
                "email": "stuart.mclaren@hpe.com",
                "username": "stuart-mclaren"
            },
            "date": "2016-02-26 16:31:49.000000000",
            "message": "Patch Set 3:\n\n> Seriously, return 204 when image is killed is dumb\n\nI'm not convinced that keeping our API backwards compatible is dumb.\n\n(Imagine we changed the API every time a developer didn't like something. Would users thank us?)\n\nIf backwards compatibility of the OpenStack Image API is considered important (maybe it isn't) we should continue to have the same behaviour here as we had in juno/kilo/liberty.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "66a753b97c00a07c616e6788e5aca29985804a8b",
            "author": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "real_author": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "date": "2016-02-26 16:41:59.000000000",
            "message": "Patch Set 3: Code-Review-1\n\nSo I've talked this out with Mike on IRC (this was mostly a monologue that covered many different image states and requests during those states).\n\nI think a 403 makes the most sense for a deactivated image (and we should update our API reference). Here's why:\n\n- If an image exists with data and a user requests the data, they'll get a 200 with the data\n- An administrator then deactivates the image\n- That user then requests the image data again and they are effectively unable to do so, the error code should help describe why.\n\nSo let's look at our options then:\n\n204 - No content. That implies to me that there never was content (e.g., the image is queued) or that the image data was purged and the status set back to queued\n\n403 - Forbidden. Access to this image data has been restricted by someone. I should look at the image metadata to see why.\n\n404 - Not found. This image has been deleted potentially or I've requested the wrong image id.\n\n410 - Gone. This image existed but has probably been deleted (e.g., killed). I should upload a new image so I can use that instead.\n\nOf those options, I prefer 403.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "d002711039f780aa78553d662e3fe64396e6aa4a",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2016-02-26 17:18:01.000000000",
            "message": "Patch Set 3: Verified+1\n\nBuild succeeded (check pipeline).\n\n- gate-glance-python34 http://logs.openstack.org/34/254334/3/check/gate-glance-python34/3a1a5e1/ : SUCCESS in 8m 36s\n- gate-glance-pep8 http://logs.openstack.org/34/254334/3/check/gate-glance-pep8/3dcb7cc/ : SUCCESS in 59s\n- gate-glance-docs http://docs-draft.openstack.org/34/254334/3/check/gate-glance-docs/9a1ca72//doc/build/html/ : SUCCESS in 2m 17s\n- gate-glance-python27 http://logs.openstack.org/34/254334/3/check/gate-glance-python27/44a0246/ : SUCCESS in 6m 01s\n- gate-tempest-dsvm-full http://logs.openstack.org/34/254334/3/check/gate-tempest-dsvm-full/3ab4e6c/ : SUCCESS in 35m 29s\n- gate-tempest-dsvm-postgres-full http://logs.openstack.org/34/254334/3/check/gate-tempest-dsvm-postgres-full/1aa5e65/ : SUCCESS in 37m 32s\n- gate-tempest-dsvm-neutron-full http://logs.openstack.org/34/254334/3/check/gate-tempest-dsvm-neutron-full/930bb2d/ : SUCCESS in 1h 10m 27s\n- gate-grenade-dsvm http://logs.openstack.org/34/254334/3/check/gate-grenade-dsvm/73d676b/ : SUCCESS in 39m 38s\n- gate-tempest-dsvm-full-ceph http://logs.openstack.org/34/254334/3/check/gate-tempest-dsvm-full-ceph/a87e002/ : SUCCESS in 31m 27s\n- gate-tempest-dsvm-full-devstack-plugin-ceph-nv http://logs.openstack.org/34/254334/3/check/gate-tempest-dsvm-full-devstack-plugin-ceph-nv/13c1f00/ : SUCCESS in 37m 22s (non-voting)\n- gate-rally-dsvm-glance http://logs.openstack.org/34/254334/3/check/gate-rally-dsvm-glance/4de5f53/ : SUCCESS in 36m 16s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "7593a912c9b8266249ef25ca190f5460a06dfd41",
            "author": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "real_author": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "date": "2016-02-26 17:20:52.000000000",
            "message": "Patch Set 3: Code-Review+1\n\nI think the point being made by Stuart is that the ay this issue was fixed broke the API's compatibility as it's changing the status code. This will likely break scripts depending on the Liberty's behavior.\n\nThe way this was addressed is different from how we've been addressing this kind of issues where we simply suck it up and never change the API.\n\nTBH, bumping the API version is not even enough. From a backwards compatibility standpoint, I think this should be reverted.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "5353f6b759f50d946fd61d184cf7e69fcce692eb",
            "author": {
                "_account_id": 5314,
                "name": "Brian Rosmaita",
                "email": "rosmaita.fossdev@gmail.com",
                "username": "brian-rosmaita"
            },
            "real_author": {
                "_account_id": 5314,
                "name": "Brian Rosmaita",
                "email": "rosmaita.fossdev@gmail.com",
                "username": "brian-rosmaita"
            },
            "date": "2016-03-01 14:13:33.000000000",
            "message": "Patch Set 3: Code-Review+2\n\nI think we are stuck with the 204, despite the excellent arguments that have been made that there are much better response codes that could be used in this context.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "813a8ed40a9f4672ef55bc029f01e3038c82d7aa",
            "author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "real_author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "date": "2016-03-01 16:24:24.000000000",
            "message": "Patch Set 3:\n\nBrian, Flavio - this commit reverts a bug fix. If we merge it, then admin won't be able to download deactivated images.\n\nI made a commit that safely brings old behavior back. Please take a look -> https://review.openstack.org/#/c/284780/",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "365b2a6c2dbfa7bd21f6aed4761654fc557bcac9",
            "author": {
                "_account_id": 5314,
                "name": "Brian Rosmaita",
                "email": "rosmaita.fossdev@gmail.com",
                "username": "brian-rosmaita"
            },
            "real_author": {
                "_account_id": 5314,
                "name": "Brian Rosmaita",
                "email": "rosmaita.fossdev@gmail.com",
                "username": "brian-rosmaita"
            },
            "date": "2016-03-01 21:00:17.000000000",
            "message": "Patch Set 3: -Code-Review\n\nMike, thanks for the explanation!",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "bb3caf0544d9493492262e13b886be3fa2b68c63",
            "author": {
                "_account_id": 5202,
                "name": "Erno Kuvaja",
                "email": "jokke@usr.fi",
                "username": "jokke"
            },
            "real_author": {
                "_account_id": 5202,
                "name": "Erno Kuvaja",
                "email": "jokke@usr.fi",
                "username": "jokke"
            },
            "date": "2016-03-04 13:47:55.000000000",
            "message": "Patch Set 3: Code-Review+2\n\nI think we should merge this revert and fix the original bug with new patch in a way that does not break the API.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "b9a9b139f7bc3076fe74c5d975bea27fb0ee498a",
            "author": {
                "_account_id": 17123,
                "name": "Tom Cocozzello (tjcocozz)",
                "email": "tjcocozz@us.ibm.com",
                "username": "tcocozzello"
            },
            "real_author": {
                "_account_id": 17123,
                "name": "Tom Cocozzello (tjcocozz)",
                "email": "tjcocozz@us.ibm.com",
                "username": "tcocozzello"
            },
            "date": "2016-03-04 14:22:09.000000000",
            "message": "Patch Set 3: Code-Review+1\n\nYes this change the change should be reverted.  According to the docs  under 'changes are generally NOT considered acceptable'\n\n\"A change such that a request which was successful before now results in an error response\" <- http://specs.openstack.org/openstack/api-wg/guidelines/evaluating_api_changes.html#guidance",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "e735f8f2a1e26f144d80e4355bd4e635c6df9ae5",
            "author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "real_author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "date": "2016-03-04 14:39:08.000000000",
            "message": "Patch Set 3: -Code-Review",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "50f0e40fcc5f41aabd89ea8a7e550827efa5ab5b",
            "author": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "real_author": {
                "_account_id": 6159,
                "name": "Flavio Percoco",
                "display_name": "flaper87",
                "email": "fpercoco@redhat.com",
                "username": "flaper87"
            },
            "date": "2016-03-04 14:42:03.000000000",
            "message": "Patch Set 3:\n\nMike proposed a change to revert the behavior similar to this one. The change is in: https://review.openstack.org/#/c/284780/\n\nI'd like to get Mike's +2 on this change and understand why a new one was proposed.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "1cc9baaaf1531daf64891e7b7403a30c5077daf1",
            "author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "real_author": {
                "_account_id": 11391,
                "name": "Mikhail Fedosin",
                "email": "mfedosin@redhat.com",
                "username": "fedosinme"
            },
            "date": "2016-03-04 14:44:54.000000000",
            "message": "Patch Set 3: Code-Review+2",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "6a2ee1aa2ed19f6463f5c5a20a2cc578d9a16a59",
            "author": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "real_author": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "date": "2016-03-04 17:04:14.000000000",
            "message": "Patch Set 3: Code-Review+2 Workflow+1\n\nI heartily disagree with whomever designed this initially, but we do have backwards compatibility concerns we need to address. Sadly I'll approve this.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "2f42b89eeaa592e7f53e72a1fa3b780005f8f861",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2016-03-04 17:04:19.000000000",
            "message": "Patch Set 3: -Verified\n\nStarting gate jobs.\nhttp://status.openstack.org/zuul/",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "b952b65d24a3f2a399f6797ad63ee849a3a0f7cb",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2016-03-04 22:06:56.000000000",
            "message": "Patch Set 3: Verified+2\n\nBuild succeeded (gate pipeline).\n\n- gate-glance-python34 http://logs.openstack.org/34/254334/3/gate/gate-glance-python34/aaf675d/ : SUCCESS in 3m 53s\n- gate-glance-docs http://docs-draft.openstack.org/34/254334/3/gate/gate-glance-docs/ead53d9//doc/build/html/ : SUCCESS in 5m 13s\n- gate-glance-pep8 http://logs.openstack.org/34/254334/3/gate/gate-glance-pep8/e6a8661/ : SUCCESS in 2m 30s\n- gate-glance-python27 http://logs.openstack.org/34/254334/3/gate/gate-glance-python27/e33c6e0/ : SUCCESS in 8m 53s\n- gate-tempest-dsvm-full http://logs.openstack.org/34/254334/3/gate/gate-tempest-dsvm-full/b8e619a/ : SUCCESS in 1h 19m 20s\n- gate-tempest-dsvm-postgres-full http://logs.openstack.org/34/254334/3/gate/gate-tempest-dsvm-postgres-full/8192dbb/ : SUCCESS in 1h 23m 33s\n- gate-tempest-dsvm-neutron-full http://logs.openstack.org/34/254334/3/gate/gate-tempest-dsvm-neutron-full/817ef02/ : SUCCESS in 1h 26m 27s\n- gate-grenade-dsvm http://logs.openstack.org/34/254334/3/gate/gate-grenade-dsvm/77d16df/ : SUCCESS in 40m 10s\n- gate-tempest-dsvm-full-ceph http://logs.openstack.org/34/254334/3/gate/gate-tempest-dsvm-full-ceph/9c25f65/ : SUCCESS in 49m 43s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "df9b4c718321873d997309fb7b7e753f0daf7acd",
            "date": "2016-03-04 22:06:58.000000000",
            "message": "Change has been successfully merged into the git repository by Jenkins",
            "accounts_in_message": [],
            "_revision_number": 3
        }
    ],
    "requirements": [],
    "submit_records": []
}