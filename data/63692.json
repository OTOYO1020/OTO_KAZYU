{
    "id": "openstack%2Fglance~master~Ibd34d515b83f658bbca2d102d6b582faf118faa6",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bugfix/1199359",
    "hashtags": [],
    "change_id": "Ibd34d515b83f658bbca2d102d6b582faf118faa6",
    "subject": "Return 403 for exception.Forbidden exceptions",
    "status": "ABANDONED",
    "created": "2013-12-23 09:04:34.000000000",
    "updated": "2014-01-06 01:33:41.000000000",
    "insertions": 4,
    "deletions": 4,
    "total_comment_count": 0,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "962edc828c21cc72e44e4ccca78942a91ace092f",
    "_number": 63692,
    "owner": {
        "_account_id": 9520,
        "name": "David Koo (koofoss)",
        "email": "david.koo@huawei.com",
        "username": "koofoss"
    },
    "labels": {
        "Verified": {
            "recommended": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "all": [
                {
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "_account_id": 6484,
                    "name": "Feilong Wang",
                    "email": "hustemb@gmail.com",
                    "username": "flwang"
                },
                {
                    "_account_id": 6549,
                    "name": "Zhi Yan Liu",
                    "email": "lzy.dev@gmail.com",
                    "username": "lzy-dev"
                },
                {
                    "_account_id": 9520,
                    "name": "David Koo (koofoss)",
                    "email": "david.koo@huawei.com",
                    "username": "koofoss"
                },
                {
                    "value": 1,
                    "date": "2013-12-23 09:44:12.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "rejected": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "all": [
                {
                    "value": -2,
                    "date": "2014-01-01 22:04:14.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "value": -2,
                    "date": "2013-12-30 07:05:09.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 6484,
                    "name": "Feilong Wang",
                    "email": "hustemb@gmail.com",
                    "username": "flwang"
                },
                {
                    "value": 0,
                    "date": "2013-12-23 13:57:45.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 6549,
                    "name": "Zhi Yan Liu",
                    "email": "lzy.dev@gmail.com",
                    "username": "lzy-dev"
                },
                {
                    "value": 0,
                    "date": "2013-12-23 12:04:21.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 9520,
                    "name": "David Koo (koofoss)",
                    "email": "david.koo@huawei.com",
                    "username": "koofoss"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "all": [
                {
                    "date": "2014-01-01 22:04:14.000000000",
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "date": "2013-12-30 07:05:09.000000000",
                    "_account_id": 6484,
                    "name": "Feilong Wang",
                    "email": "hustemb@gmail.com",
                    "username": "flwang"
                },
                {
                    "date": "2013-12-23 10:21:21.000000000",
                    "_account_id": 6549,
                    "name": "Zhi Yan Liu",
                    "email": "lzy.dev@gmail.com",
                    "username": "lzy-dev"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 0
                    },
                    "_account_id": 9520,
                    "name": "David Koo (koofoss)",
                    "email": "david.koo@huawei.com",
                    "username": "koofoss"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "_account_id": 4463,
                    "name": "iccha-sethi",
                    "email": "iccha.sethi@rackspace.com",
                    "username": "iccha-sethi"
                },
                {
                    "_account_id": 6484,
                    "name": "Feilong Wang",
                    "email": "hustemb@gmail.com",
                    "username": "flwang"
                },
                {
                    "_account_id": 6549,
                    "name": "Zhi Yan Liu",
                    "email": "lzy.dev@gmail.com",
                    "username": "lzy-dev"
                },
                {
                    "_account_id": 9520,
                    "name": "David Koo (koofoss)",
                    "email": "david.koo@huawei.com",
                    "username": "koofoss"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            {
                "_account_id": 9520,
                "name": "David Koo (koofoss)",
                "email": "david.koo@huawei.com",
                "username": "koofoss"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2013-12-23 09:44:12.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-12-23 10:21:21.000000000",
            "updated_by": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "reviewer": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2013-12-30 07:05:09.000000000",
            "updated_by": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "reviewer": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2014-01-01 22:04:14.000000000",
            "updated_by": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "reviewer": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "def2948059117081d727d1049bb49e60849fbd87",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2013-12-23 09:44:12.000000000",
            "message": "Patch Set 1: Works for me\n\nBuild succeeded.\n\n- gate-glance-pep8 http://logs.openstack.org/92/63692/1/check/gate-glance-pep8/5d0005a : SUCCESS in 2m 12s\n- gate-glance-docs http://docs-draft.openstack.org/92/63692/1/check/gate-glance-docs/5e21dab/doc/build/html/ : SUCCESS in 1m 49s\n- gate-glance-python26 http://logs.openstack.org/92/63692/1/check/gate-glance-python26/cffb6e9 : SUCCESS in 10m 39s\n- gate-glance-python27 http://logs.openstack.org/92/63692/1/check/gate-glance-python27/2769162 : SUCCESS in 10m 36s\n- check-tempest-dsvm-full http://logs.openstack.org/92/63692/1/check/check-tempest-dsvm-full/0da5d32 : SUCCESS in 39m 22s\n- check-tempest-dsvm-postgres-full http://logs.openstack.org/92/63692/1/check/check-tempest-dsvm-postgres-full/aa1ccc4 : SUCCESS in 37m 50s\n- check-tempest-dsvm-neutron http://logs.openstack.org/92/63692/1/check/check-tempest-dsvm-neutron/814e032 : SUCCESS in 37m 08s\n- gate-tempest-dsvm-large-ops http://logs.openstack.org/92/63692/1/check/gate-tempest-dsvm-large-ops/c2b7db5 : SUCCESS in 15m 21s\n- gate-tempest-dsvm-neutron-large-ops http://logs.openstack.org/92/63692/1/check/gate-tempest-dsvm-neutron-large-ops/039508e : SUCCESS in 15m 55s\n- check-grenade-dsvm http://logs.openstack.org/92/63692/1/check/check-grenade-dsvm/c7a2000 : SUCCESS in 32m 18s\n",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "b5d21c2e6060003de20b504e4bee1b0110f4e25b",
            "author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "real_author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "date": "2013-12-23 10:21:21.000000000",
            "message": "Patch Set 1: I would prefer that you didn't merge this\n\nHello David, I think original exception is make more sense to me, raise NotFound but Forbidden can prevent potential sensitive info disclosure, avoid security issue.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "0cb03bae2d38da33373e1688928c3a8540aa69be",
            "author": {
                "_account_id": 9520,
                "name": "David Koo (koofoss)",
                "email": "david.koo@huawei.com",
                "username": "koofoss"
            },
            "real_author": {
                "_account_id": 9520,
                "name": "David Koo (koofoss)",
                "email": "david.koo@huawei.com",
                "username": "koofoss"
            },
            "date": "2013-12-23 12:04:21.000000000",
            "message": "Patch Set 1:\n\n> raise NotFound but Forbidden can prevent potential sensitive\n> info disclosure, avoid security issue.\n\nThat was my initial guess when I took up the bug so I took a closer look at the code. The registry server where the actual work is done actually checks for permissions.\n\nFor e.g. in registry/api/v1/members.py:Controller.update there is a check for image ownership first - if it is not visible to the caller then a 404 is returned. 403 is returned only if the image is visible to the caller but the caller doesn't have permission to manipulate membership.\n\nSo it doesn't seem to be a security hole, does it?",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "0be3d52b3818d6b1e96f71d81206a61c9f206a8f",
            "author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "real_author": {
                "_account_id": 6549,
                "name": "Zhi Yan Liu",
                "email": "lzy.dev@gmail.com",
                "username": "lzy-dev"
            },
            "date": "2013-12-23 13:57:45.000000000",
            "message": "Patch Set 1: No score\n\nI'm a little wondering why those only three delete(), update() and update_all() actions do this conversation but others, is this result has some consideration?\n\nI'd like to know other reviewers comments.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "735bd9be9b78c9847a86343a3e2d28420245e947",
            "author": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "real_author": {
                "_account_id": 6484,
                "name": "Feilong Wang",
                "email": "hustemb@gmail.com",
                "username": "flwang"
            },
            "date": "2013-12-30 07:05:09.000000000",
            "message": "Patch Set 1: Do not merge\n\nGiven the security risk of v1 image sharing, I prefer to keep the original design. I mean do not let the user know if the membership is existed or not, given he is not permitted.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "f18da4975613b611bb6a5c02be50b0363fda8403",
            "author": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "real_author": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "date": "2014-01-01 22:04:14.000000000",
            "message": "Patch Set 1: Do not merge\n\nHey David,\n\nI agree with Fei on this one.\n\nWe do not want to make the user aware of the other members. Hence we have Not Found vs Forbidden. Feel free to ping us if you have any questions regarding the same.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "bd7102bedd11a7262011a001b0c996e584666336",
            "author": {
                "_account_id": 9520,
                "name": "David Koo (koofoss)",
                "email": "david.koo@huawei.com",
                "username": "koofoss"
            },
            "real_author": {
                "_account_id": 9520,
                "name": "David Koo (koofoss)",
                "email": "david.koo@huawei.com",
                "username": "koofoss"
            },
            "date": "2014-01-02 02:01:45.000000000",
            "message": "Patch Set 1:\n\nFei, Iccha, just to confirm if I've understood the problem properly ...\n\n*) Private images may not be modified/visible to anybody except the owner (and admin).\n\n*) The policy file only specifies policies for *all* images and not per image instance. Therefore, if the policy file grants a user permission to modify image memberships, it does not mean that the user has permission to modify image memberships of *all* images - (s)he can modify membership info of only shared images.\n\n*) The registry makes sure that even though a user has permission to modify membership info (granted by policy), the user still needs to be the image owner (or admin) to be able to modify image attributes of private images. If not, the registry will not leak image info (including existence and ownership) to the user. Therefore all Forbidden errors are translated to NotExist errors.\n\nIs my understanding correct? If so should we add a comment in the front-end code as well (just as in the registry code) so that nobody raises such a bug again in future?\n\nAnd also mark the bug in launchpad as \"not a bug\" so that other newbies won't be misled ;)?",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "334994d6148b3c3ada65d600e2d8dd0b51fc4c22",
            "author": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "real_author": {
                "_account_id": 4463,
                "name": "iccha-sethi",
                "email": "iccha.sethi@rackspace.com",
                "username": "iccha-sethi"
            },
            "date": "2014-01-02 20:02:31.000000000",
            "message": "Patch Set 1:\n\nYes your understanding is perfectly correct David, and you have listed all the points very well.\n\nYes you are right that we should mark the bug as invalid.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "43794e3b335be6caa59d1b472f96b69a9e850fac",
            "author": {
                "_account_id": 9520,
                "name": "David Koo (koofoss)",
                "email": "david.koo@huawei.com",
                "username": "koofoss"
            },
            "real_author": {
                "_account_id": 9520,
                "name": "David Koo (koofoss)",
                "email": "david.koo@huawei.com",
                "username": "koofoss"
            },
            "date": "2014-01-06 01:33:41.000000000",
            "message": "Patch Set 1: Abandoned\n\nAfter discussion with the cores it was concluded that this is not a bug - the original bug report should be marked as invalid.",
            "accounts_in_message": [],
            "_revision_number": 1
        }
    ],
    "requirements": [],
    "submit_records": []
}