{
    "id": "openstack%2Fglance~master~Ieb8a96731a441b065784e99b3b7e810ff3177c87",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bug/939257",
    "hashtags": [],
    "change_id": "Ieb8a96731a441b065784e99b3b7e810ff3177c87",
    "subject": "make container_format a mandatory option for \"glance add\"",
    "status": "ABANDONED",
    "created": "2012-02-23 07:23:08.000000000",
    "updated": "2012-03-05 06:03:03.000000000",
    "insertions": 9,
    "deletions": 1,
    "total_comment_count": 0,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "46416866415d8df582bad3a925f5c964e5ac94dd",
    "_number": 4443,
    "owner": {
        "_account_id": 1427,
        "name": "reynolds.chin",
        "email": "benzwt@gmail.com",
        "username": "reynolds.chin"
    },
    "labels": {
        "Verified": {
            "all": [
                {
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "_account_id": 1427,
                    "name": "reynolds.chin",
                    "email": "benzwt@gmail.com",
                    "username": "reynolds.chin"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "rejected": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "all": [
                {
                    "value": -2,
                    "date": "2012-02-26 21:19:33.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": -1,
                    "date": "2012-02-23 09:49:10.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "value": 0,
                    "date": "2012-02-23 08:49:06.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 1427,
                    "name": "reynolds.chin",
                    "email": "benzwt@gmail.com",
                    "username": "reynolds.chin"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "all": [
                {
                    "date": "2012-02-26 21:19:33.000000000",
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "date": "2012-02-23 09:49:10.000000000",
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 0
                    },
                    "_account_id": 1427,
                    "name": "reynolds.chin",
                    "email": "benzwt@gmail.com",
                    "username": "reynolds.chin"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "_account_id": 1427,
                    "name": "reynolds.chin",
                    "email": "benzwt@gmail.com",
                    "username": "reynolds.chin"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            {
                "_account_id": 1427,
                "name": "reynolds.chin",
                "email": "benzwt@gmail.com",
                "username": "reynolds.chin"
            },
            {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2012-02-23 07:25:50.000000000",
            "updated_by": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "reviewer": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-02-23 08:49:06.000000000",
            "updated_by": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "reviewer": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-02-23 09:49:10.000000000",
            "updated_by": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "reviewer": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-02-26 21:19:33.000000000",
            "updated_by": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "reviewer": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "f07600b8e45a3a0d1ac87187ed9c4782b811cd10",
            "author": {
                "_account_id": 1427,
                "name": "reynolds.chin",
                "email": "benzwt@gmail.com",
                "username": "reynolds.chin"
            },
            "real_author": {
                "_account_id": 1427,
                "name": "reynolds.chin",
                "email": "benzwt@gmail.com",
                "username": "reynolds.chin"
            },
            "date": "2012-02-23 07:25:16.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "c0f86a537efe05f77d9307e91a6572412f3b762d",
            "author": {
                "_account_id": 1427,
                "name": "reynolds.chin",
                "email": "benzwt@gmail.com",
                "username": "reynolds.chin"
            },
            "real_author": {
                "_account_id": 1427,
                "name": "reynolds.chin",
                "email": "benzwt@gmail.com",
                "username": "reynolds.chin"
            },
            "date": "2012-02-23 07:31:17.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "035632e5622b4fe840532d3d82fff67bd891fd19",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-02-23 08:49:06.000000000",
            "message": "Patch Set 3:\n\nSmokeStack Results (patch set 3):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/13384\n\tLibvirt(Fedora 16) Success: http://smokestack.openstack.org/?go=/jobs/13382\n\tXenServer(Ubuntu 11.04) Success: http://smokestack.openstack.org/?go=/jobs/13383",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "4d606edc74fd48604bb1347eb52d455b2b34cfd9",
            "author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "real_author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "date": "2012-02-23 09:49:10.000000000",
            "message": "Patch Set 3: I would prefer that you didn't submit this\n\nHi Reynolds,\n\nThanks for the patch.\n\nWe had some debate around whether disk and container formats should be mandatory or defaulted.\n\nThe outcome from:\n\n  https://review.openstack.org/#change,4272\n\nwas to make both formats mandatory, and to ensure consistency by enforcing this requirement within the API layer, so that we'd get the same result regardless of whether the image was added via the CLI or the python/REST APIs.\n\nThis approach turned out to be over-restrictive, as in some cases the image is simply being \"reserved\" by the initial POST and the disk/container formats aren't known until the image content is provided via a subsequent PUT. This led to a loosening of the restriction, such that the disk/container formats need not be supplied when an image is added without any image content initially:\n\n  https://review.openstack.org/#change,4330\n\nNow I'm not sure there's a great deal of value in duplicating this policy in the CLI, but at the very least you'd need to be consistent by checking for both disk & conatiner formats, only enforcing in the cases where the image data is provided on the initial add (i.e. 'glance add < /path/to/image' or 'glance add location=URI' or 'glance add copy_from=URI').\n\nThere would be further complication where the image was initially created with neither image content nor disk/container formats specified. The CLI would have to detect this and enforce the requirement for the formats to be present in a subsequent 'glance update location=URI'.\n\nThe other option would be for the CLI to simply pass through wharever formats the user provided (as it does now) and allow the cases where a required format is missing to be detected and rejected within the API layer.\n\nCheers,\nEoghan",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "74f9650eac09521236488bd8b9ed7b8b9258d4c4",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-02-26 21:19:33.000000000",
            "message": "Patch Set 3: Do not submit\n\nI think it makes more sense to allow the API to handle the policy of disk/container_formats being required on activate. We just need to make sure it's handled properly at this level.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "2826586aeccfa89883dcbc865646089e2ca43ee3",
            "author": {
                "_account_id": 9,
                "name": "LaunchpadSync",
                "username": "launchpadsync"
            },
            "real_author": {
                "_account_id": 9,
                "name": "LaunchpadSync",
                "username": "launchpadsync"
            },
            "date": "2012-03-05 06:03:02.000000000",
            "message": "Patch Set 3:\n\ncode review expired after 1 week of no activity after a negative review",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "21749b52387e713374a26738179a2d5ff0098d62",
            "author": {
                "_account_id": 9,
                "name": "LaunchpadSync",
                "username": "launchpadsync"
            },
            "real_author": {
                "_account_id": 9,
                "name": "LaunchpadSync",
                "username": "launchpadsync"
            },
            "date": "2012-03-05 06:03:03.000000000",
            "message": "Patch Set 3: Abandoned\n\ncode review expired after 1 week of no activity after a negative review",
            "accounts_in_message": [],
            "_revision_number": 3
        }
    ],
    "requirements": [],
    "submit_records": []
}