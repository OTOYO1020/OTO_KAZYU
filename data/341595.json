{
    "id": "openstack%2Fglance~stable%2Fmitaka~I885c898c1487c450abdfa7d6a79f526a132fbbcb",
    "project": "openstack/glance",
    "branch": "stable/mitaka",
    "topic": "bug/1602715",
    "hashtags": [],
    "change_id": "I885c898c1487c450abdfa7d6a79f526a132fbbcb",
    "subject": "Catch barbicanclient not existing",
    "status": "ABANDONED",
    "created": "2016-07-13 14:56:00.000000000",
    "updated": "2016-07-20 13:45:54.000000000",
    "insertions": 1,
    "deletions": 1,
    "total_comment_count": 3,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "a2ae69dc0be11ef87578e55ef2c099f537c340bd",
    "_number": 341595,
    "owner": {
        "_account_id": 17116,
        "name": "Niall Bunting",
        "email": "niall.bunting@hpe.com",
        "username": "NiallBunting"
    },
    "labels": {
        "Verified": {
            "recommended": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "all": [
                {
                    "_account_id": 2537,
                    "name": "Nikhil Komawar",
                    "email": "nik.komawar@gmail.com",
                    "username": "nikhil-komawar"
                },
                {
                    "_account_id": 15524,
                    "name": "dane-fichter",
                    "email": "dane.fichter@jhuapl.edu",
                    "username": "dane-fichter"
                },
                {
                    "_account_id": 6802,
                    "name": "Joel Coffman",
                    "email": "jmc7tp@gmail.com",
                    "username": "joel-coffman"
                },
                {
                    "value": 1,
                    "date": "2016-07-13 16:19:53.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": 1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "disliked": {
                "_account_id": 15524,
                "name": "dane-fichter",
                "email": "dane.fichter@jhuapl.edu",
                "username": "dane-fichter"
            },
            "all": [
                {
                    "value": -1,
                    "date": "2016-07-14 21:06:16.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 2537,
                    "name": "Nikhil Komawar",
                    "email": "nik.komawar@gmail.com",
                    "username": "nikhil-komawar"
                },
                {
                    "value": -1,
                    "date": "2016-07-20 13:05:02.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 15524,
                    "name": "dane-fichter",
                    "email": "dane.fichter@jhuapl.edu",
                    "username": "dane-fichter"
                },
                {
                    "value": -1,
                    "date": "2016-07-19 17:49:35.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 6802,
                    "name": "Joel Coffman",
                    "email": "jmc7tp@gmail.com",
                    "username": "joel-coffman"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "value": -1,
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "all": [
                {
                    "_account_id": 2537,
                    "name": "Nikhil Komawar",
                    "email": "nik.komawar@gmail.com",
                    "username": "nikhil-komawar"
                },
                {
                    "date": "2016-07-19 17:41:41.000000000",
                    "_account_id": 15524,
                    "name": "dane-fichter",
                    "email": "dane.fichter@jhuapl.edu",
                    "username": "dane-fichter"
                },
                {
                    "_account_id": 6802,
                    "name": "Joel Coffman",
                    "email": "jmc7tp@gmail.com",
                    "username": "joel-coffman"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "_account_id": 2537,
                    "name": "Nikhil Komawar",
                    "email": "nik.komawar@gmail.com",
                    "username": "nikhil-komawar"
                },
                {
                    "_account_id": 15524,
                    "name": "dane-fichter",
                    "email": "dane.fichter@jhuapl.edu",
                    "username": "dane-fichter"
                },
                {
                    "_account_id": 6802,
                    "name": "Joel Coffman",
                    "email": "jmc7tp@gmail.com",
                    "username": "joel-coffman"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 2537,
                "name": "Nikhil Komawar",
                "email": "nik.komawar@gmail.com",
                "username": "nikhil-komawar"
            },
            {
                "_account_id": 6802,
                "name": "Joel Coffman",
                "email": "jmc7tp@gmail.com",
                "username": "joel-coffman"
            },
            {
                "_account_id": 15524,
                "name": "dane-fichter",
                "email": "dane.fichter@jhuapl.edu",
                "username": "dane-fichter"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2016-07-13 16:19:53.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-07-14 21:06:16.000000000",
            "updated_by": {
                "_account_id": 2537,
                "name": "Nikhil Komawar",
                "email": "nik.komawar@gmail.com",
                "username": "nikhil-komawar"
            },
            "reviewer": {
                "_account_id": 2537,
                "name": "Nikhil Komawar",
                "email": "nik.komawar@gmail.com",
                "username": "nikhil-komawar"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-07-19 17:41:41.000000000",
            "updated_by": {
                "_account_id": 15524,
                "name": "dane-fichter",
                "email": "dane.fichter@jhuapl.edu",
                "username": "dane-fichter"
            },
            "reviewer": {
                "_account_id": 15524,
                "name": "dane-fichter",
                "email": "dane.fichter@jhuapl.edu",
                "username": "dane-fichter"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-07-19 17:49:35.000000000",
            "updated_by": {
                "_account_id": 6802,
                "name": "Joel Coffman",
                "email": "jmc7tp@gmail.com",
                "username": "joel-coffman"
            },
            "reviewer": {
                "_account_id": 6802,
                "name": "Joel Coffman",
                "email": "jmc7tp@gmail.com",
                "username": "joel-coffman"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "8dac84b5714ff6ae04835f849b68652ee68a38c1",
            "author": {
                "_account_id": 17116,
                "name": "Niall Bunting",
                "email": "niall.bunting@hpe.com",
                "username": "NiallBunting"
            },
            "real_author": {
                "_account_id": 17116,
                "name": "Niall Bunting",
                "email": "niall.bunting@hpe.com",
                "username": "NiallBunting"
            },
            "date": "2016-07-13 14:56:00.000000000",
            "message": "Uploaded patch set 1.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "83ef159bc3c722226cb4595f14ce680b21fb60d2",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2016-07-13 16:19:53.000000000",
            "message": "Patch Set 1: Verified+1\n\nBuild succeeded (check pipeline).\n\n- gate-glance-python34-db http://logs.openstack.org/95/341595/1/check/gate-glance-python34-db/ebbbc5f/ : SUCCESS in 7m 19s\n- gate-glance-docs http://docs-draft.openstack.org/95/341595/1/check/gate-glance-docs/aeaad53//doc/build/html/ : SUCCESS in 5m 06s\n- gate-glance-pep8 http://logs.openstack.org/95/341595/1/check/gate-glance-pep8/ea6f265/ : SUCCESS in 3m 09s\n- gate-glance-python27-db http://logs.openstack.org/95/341595/1/check/gate-glance-python27-db/e9779c0/ : SUCCESS in 11m 58s\n- gate-tempest-dsvm-full http://logs.openstack.org/95/341595/1/check/gate-tempest-dsvm-full/e5ab836/ : SUCCESS in 38m 38s\n- gate-tempest-dsvm-postgres-full http://logs.openstack.org/95/341595/1/check/gate-tempest-dsvm-postgres-full/a9777aa/ : SUCCESS in 51m 14s\n- gate-tempest-dsvm-neutron-full http://logs.openstack.org/95/341595/1/check/gate-tempest-dsvm-neutron-full/d75a175/ : SUCCESS in 1h 02m 22s\n- gate-grenade-dsvm http://logs.openstack.org/95/341595/1/check/gate-grenade-dsvm/6f57ac3/ : SUCCESS in 40m 48s\n- gate-tempest-dsvm-full-devstack-plugin-ceph http://logs.openstack.org/95/341595/1/check/gate-tempest-dsvm-full-devstack-plugin-ceph/b07f7b2/ : SUCCESS in 38m 56s\n- gate-rally-dsvm-glance http://logs.openstack.org/95/341595/1/check/gate-rally-dsvm-glance/a8bd1d8/ : SUCCESS in 24m 16s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "1d0b9e17870383fa51cd8b5efb3e2056e0bc167b",
            "author": {
                "_account_id": 2537,
                "name": "Nikhil Komawar",
                "email": "nik.komawar@gmail.com",
                "username": "nikhil-komawar"
            },
            "real_author": {
                "_account_id": 2537,
                "name": "Nikhil Komawar",
                "email": "nik.komawar@gmail.com",
                "username": "nikhil-komawar"
            },
            "date": "2016-07-14 21:06:16.000000000",
            "message": "Patch Set 1: Code-Review-1\n\n(1 comment)\n\nI am not sure if the change is addressing barbicanclient dependency, is that dependency is an issue.\n\nTake a look at the inline comment to see the issue may be with castellan which is in glance requirements as of today https://github.com/openstack/glance/blob/472e8d64c25f5e01a744cbb2e9290dc8f5dd53eb/requirements.txt#L57",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "5468a430d6e000376e213894920ae6f4c9ad59da",
            "author": {
                "_account_id": 2537,
                "name": "Nikhil Komawar",
                "email": "nik.komawar@gmail.com",
                "username": "nikhil-komawar"
            },
            "real_author": {
                "_account_id": 2537,
                "name": "Nikhil Komawar",
                "email": "nik.komawar@gmail.com",
                "username": "nikhil-komawar"
            },
            "date": "2016-07-14 21:15:45.000000000",
            "message": "Patch Set 1:\n\nI digged into logs more closely and found the relevant part to reveal that the dependency between castellan and barbicanclient is strange. While the former is using the later for accessing key manager, ideally one would expect the dependency be installed along with castellan. \n\nPlease educate me on why it is the way it is.\n\n2016-07-13 09:26:03.602 28677 ERROR glance.api.v2.image_data File \"/opt/stack/venv/glance-20160712T142933Z/lib/python2.7/site-packages/castellan/key_manager/barbican_key_manager.py\", line 42, in <module>\n2016-07-13 09:26:03.602 28677 ERROR glance.api.v2.image_data from barbicanclient import client as barbican_client\n2016-07-13 09:26:03.602 28677 ERROR glance.api.v2.image_data ImportError: No module named barbicanclient",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "e7d160f0b44be16d0c12b807a82e5fdb1dea2dca",
            "author": {
                "_account_id": 6802,
                "name": "Joel Coffman",
                "email": "jmc7tp@gmail.com",
                "username": "joel-coffman"
            },
            "real_author": {
                "_account_id": 6802,
                "name": "Joel Coffman",
                "email": "jmc7tp@gmail.com",
                "username": "joel-coffman"
            },
            "date": "2016-07-19 17:49:35.000000000",
            "message": "Patch Set 1: Code-Review-1\n\n(2 comments)\n\nIt seems like an internal server error (HTTP 500) is appropriate if the key manager backend hasn't been installed.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "b447bb9578c5ce092f37e87dcaa646428ff14da6",
            "author": {
                "_account_id": 15524,
                "name": "dane-fichter",
                "email": "dane.fichter@jhuapl.edu",
                "username": "dane-fichter"
            },
            "real_author": {
                "_account_id": 15524,
                "name": "dane-fichter",
                "email": "dane.fichter@jhuapl.edu",
                "username": "dane-fichter"
            },
            "date": "2016-07-20 13:05:02.000000000",
            "message": "Patch Set 1: Code-Review-1\n\nEchoing the issues Joel mentions. A 500 sounds appropriate if there's no key manager backend.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "b594b91e1a18933a60047b4347c244f54d7b53f3",
            "author": {
                "_account_id": 17116,
                "name": "Niall Bunting",
                "email": "niall.bunting@hpe.com",
                "username": "NiallBunting"
            },
            "real_author": {
                "_account_id": 17116,
                "name": "Niall Bunting",
                "email": "niall.bunting@hpe.com",
                "username": "NiallBunting"
            },
            "date": "2016-07-20 13:45:54.000000000",
            "message": "Abandoned\n\nComments above make sense.",
            "accounts_in_message": [],
            "_revision_number": 1
        }
    ],
    "requirements": [],
    "submit_records": []
}