{
    "id": "openstack%2Fglance~master~Ia34959b3ba52cbe933d5d347f31319271b2e14f9",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "bp/cfg-global-object",
    "hashtags": [],
    "change_id": "Ia34959b3ba52cbe933d5d347f31319271b2e14f9",
    "subject": "Add cfg's new global CONF object",
    "status": "MERGED",
    "created": "2012-05-29 07:51:56.000000000",
    "updated": "2012-06-06 12:43:53.000000000",
    "submitted": "2012-06-06 12:43:53.000000000",
    "submitter": {
        "_account_id": 3,
        "name": "Jenkins",
        "username": "jenkins"
    },
    "insertions": 653,
    "deletions": 628,
    "total_comment_count": 0,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "26c3e4f3d2666f676107f624819dae5d6abfdd4c",
    "_number": 7860,
    "owner": {
        "_account_id": 1247,
        "name": "Mark McLoughlin",
        "email": "markmc@redhat.com",
        "username": "markmc"
    },
    "labels": {
        "Verified": {
            "approved": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "all": [
                {
                    "value": 0,
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 1247,
                    "name": "Mark McLoughlin",
                    "email": "markmc@redhat.com",
                    "username": "markmc"
                },
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 2,
                    "date": "2012-06-06 12:43:53.000000000",
                    "post_submit": true,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "approved": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "all": [
                {
                    "value": 2,
                    "date": "2012-06-06 12:32:12.000000000",
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "date": "2012-06-05 21:19:31.000000000",
                    "permitted_voting_range": {
                        "min": 0,
                        "max": 1
                    },
                    "_account_id": 1247,
                    "name": "Mark McLoughlin",
                    "email": "markmc@redhat.com",
                    "username": "markmc"
                },
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "approved": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "all": [
                {
                    "value": 1,
                    "date": "2012-06-06 12:32:12.000000000",
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 1247,
                    "name": "Mark McLoughlin",
                    "email": "markmc@redhat.com",
                    "username": "markmc"
                },
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "value": 0,
                    "_account_id": 2284,
                    "name": "Eoghan Glynn",
                    "email": "eglynn@redhat.com",
                    "username": "eglynn"
                },
                {
                    "value": 0,
                    "_account_id": 1132,
                    "name": "Brian Waldon",
                    "email": "brian@waldon.cc",
                    "username": "bcwaldon"
                },
                {
                    "value": 0,
                    "_account_id": 1247,
                    "name": "Mark McLoughlin",
                    "email": "markmc@redhat.com",
                    "username": "markmc"
                },
                {
                    "value": 0,
                    "_account_id": 616,
                    "name": "Mark Washenberger",
                    "email": "mark.washenberger@markwash.net",
                    "username": "markwash"
                },
                {
                    "value": 0,
                    "_account_id": 2166,
                    "name": "SmokeStack CI",
                    "username": "smokestack",
                    "tags": [
                        "SERVICE_USER"
                    ]
                },
                {
                    "value": 0,
                    "_account_id": 7,
                    "name": "Jay Pipes",
                    "email": "jaypipes@gmail.com",
                    "username": "jaypipes"
                },
                {
                    "value": 0,
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2012-05-30 15:12:31.000000000",
            "updated_by": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "reviewer": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-05-30 19:13:44.000000000",
            "updated_by": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "reviewer": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-05-30 22:31:30.000000000",
            "updated_by": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "reviewer": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-06-04 19:03:58.000000000",
            "updated_by": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "reviewer": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-06-06 12:32:12.000000000",
            "updated_by": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "reviewer": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2012-06-06 12:43:53.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "16595f86e50b60b6eb1543716cbe53c214ab3747",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-05-29 07:54:16.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "f33e746264719bf8406c54bbf5ccd7ef1095fc83",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-05-29 08:06:47.000000000",
            "message": "Patch Set 2:\n\nThis is patch 4 of 6 in the cfg-global-object series",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "ad74cd678e95bbb5b2d942d291a8f59ff60dd7e6",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-05-29 09:13:23.000000000",
            "message": "Patch Set 2: Works for me\n\nBuild Successful \n \nhttps://jenkins.openstack.org/job/check-glance-pep8/15/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-merge/15/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-python26/15/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-python27/15/ : SUCCESS",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "11e19ce8a985cd66d42acb541beece5ae73cefc9",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-05-29 15:56:37.000000000",
            "message": "Patch Set 2: Works for me\n\nSmokeStack Results (patch set 2):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/21568\n\tLibvirt (Fedora 16) Success: http://smokestack.openstack.org/?go=/jobs/21567\n",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "37af79a66ecca0895dde39547db57bd462ecb7f5",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-05-29 18:54:49.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "c2ae12f73373c6766432f2bfcf5d2afd2bc89f53",
            "author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "real_author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "date": "2012-05-29 19:07:58.000000000",
            "message": "Patch Set 3: I would prefer that you didn't merge this\n\nUgh, I really can't stand the global config object. I thought it was to be *optional*, not required, as this code makes it...",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "1ec85ef226b0b46427762961c5eff9e593d6b97d",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-05-29 19:32:06.000000000",
            "message": "Patch Set 3: Works for me\n\nBuild Successful \n \nhttps://jenkins.openstack.org/job/check-glance-pep8/23/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-merge/23/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-python26/23/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-python27/23/ : SUCCESS",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "089742adb46a4cd72e553ad89de421cdf2ae18f3",
            "author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "real_author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "date": "2012-05-30 11:29:09.000000000",
            "message": "Patch Set 3: I would prefer that you didn't merge this\n\nHi Mark,\n\nOverall I'm not a fan of the global CONF object approach, however in this case I'd have to reluctantly concede that the value in aligning with the other openstack project trumps my aversion.\n\nOne question/suggestion though ... there's a recurring pattern in the patch where options that were previously defined/registered at class-level scope close to where they're are used, are now registered at module-level scope. Is this move necessary? Could the CONF variable continue to be defined at module-level scope, but the option registration remain where it is currently?\n\nThis would seem to be a less disruptive change, and would retain the advantage of options being introduced in the code closer to where they are used.\n\nCheers,\nEoghan",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "dd306382ea5bffef876b930cb09e2afebd88f8cb",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-05-30 12:57:05.000000000",
            "message": "Patch Set 3:\n\n> Ugh, I really can't stand the global config object. I \n> thought it was to be *optional*, not required, as this \n> code makes it...\n\nAs I've said from the start:\n\n  https://lists.launchpad.net/openstack/msg08329.html\n\n  I really think it will be beneficial if we can share \n  common idioms and patterns across projects, rather than \n  just using the same library in different ways\n\nMy instinct is to avoid using a global object, but I care much more about sharing the same patterns across OpenStack projects.\n\nAlso, the more I try - and you have to admit, I've tried pretty damn hard - to defend the \"global objects, ugh!\" position, the arguments appear fairly weak. Pragmatically speaking, it causes few practical problems whereas passing a conf object around everywhere is truly a pain in the arse.\n\nPlease actually checkout the tree from I222d3c58308bc2f504cd802c0c8405d3baa2e49a and poke around. I actually quite like the end result. In comparison, I don't think I'd like the end result of a patch to remove the global object from Nova - the pain of passing around a conf object there would be massive.\n\nThe \"share common idioms, not just common code\" thing isn't just a stylistic thing either. We're in the process of moving the RPC API into openstack-common and it will be quite painful to support global and non-global cfg usage. Another example would be if we wanted to move the auth_token middleware configuration out of paste.ini into the main config files, we'd need to support global and non-global config. And the same will be true for a bunch of other stuff we want to move into openstack-common.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "822b62f57d478971a213a90a6460e3257ec96439",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-05-30 13:02:12.000000000",
            "message": "Patch Set 3:\n\n> Overall I'm not a fan of the global CONF object approach, \n> however in this case I'd have to reluctantly concede that \n> the value in aligning with the other openstack project \n> trumps my aversion.\n\nThanks! :)\n\n> One question/suggestion though ... there's a recurring \n> pattern in the patch where options that were previously \n> defined/registered at class-level scope close to where \n> they're are used, are now registered at module-level \n> scope. Is this move necessary? Could the CONF variable \n> continue to be defined at module-level scope, but the \n> option registration remain where it is currently?\n\nThat's a fair question. I do have a slight preference for the option scoping we achieved in places in glance, but it didn't always work out so well - e.g. the likes of wsgi.get_bind_addr()\n\nI see the module-level option definition thing as part of the common idiom here and it's what Nova and Keystone do.\n\nAlso, in Nova, there's work in progress on a tool to pull all the option schemas from the code and generate a sample config file. This tool relies on options being defined at module import time. It'd be nice for this tool to be able to evolve to a point that all projects can use it.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "6eb85ddba83a79625560ebce8e798573ec974a22",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-05-30 13:02:36.000000000",
            "message": "Uploaded patch set 4.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "3f252b5df19ec97a8cb39f3f53b1cad1f1f32447",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-05-30 13:30:03.000000000",
            "message": "Patch Set 4: Works for me\n\nBuild Successful \n \nhttps://jenkins.openstack.org/job/check-glance-pep8/32/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-merge/32/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-python26/32/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-python27/32/ : SUCCESS",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "a5ceee4f218e76326d8fabe179e509251a1bad37",
            "author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "real_author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "date": "2012-05-30 13:37:49.000000000",
            "message": "Patch Set 4: Looks good to me (core reviewer)\n\n> there's work in progress on a tool to pull all the option\n> schemas from the code and generate a sample config file.\n> This tool relies on options being defined at module import\n> time. It'd be nice for this tool to be able to evolve to a\n> point that all projects can use it.\n\nThat's a good enough reason.\n\nCheers,\nEoghan",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "9122ed80c19e982d3e3dd0f1f9c40cd417b2f680",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-05-30 15:12:31.000000000",
            "message": "Patch Set 4:\n\nAccepting that the common idiom goal will require some projects to change their idiom, why did you choose to move in the direction of global CONF rather than the other way around?",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "492d3fbc5700f646db17273f17016e9fcf59e341",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-05-30 15:33:35.000000000",
            "message": "Patch Set 4:\n\n> Accepting that the common idiom goal will require some projects to change their idiom, why did you choose to move in the direction of global CONF rather than the other way around?\n\nBecause - while it was difficult to get many people to express much of an opinion either way - I got a strong impression that a lot of folks valued the simplicity of the global approach.\n\nhttps://lists.launchpad.net/openstack/msg12418.html\n\nAlso, comparing the amount of code in OpenStack core using the global approach (i.e. Nova and Keystone) vs code using the non-global approach (i.e. Glance) I think the pragmatic approach is to accept that global is the most prevalent idiom. I don't think anyone relishes the prospect of a patch to move Nova to non-global.\n\nI did my best to shift consensus towards the non-global approach and I failed. I can now clearly see very good pragmatic arguments for the global approach.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "50d64c254a4eab0792466a9a33cb0a85594d3dc4",
            "author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "real_author": {
                "_account_id": 616,
                "name": "Mark Washenberger",
                "email": "mark.washenberger@markwash.net",
                "username": "markwash"
            },
            "date": "2012-05-30 17:49:26.000000000",
            "message": "Patch Set 4: Looks good to me, but someone else must approve\n\nMark,\n\nI was quite impressed by your arguments about avoiding global objects--however, that means: if you are satisfied that we can easily deal with any problems global CONF might cause, then so am I.",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "12500734328d5c1648f37b07ff8bd834bbe83164",
            "author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "real_author": {
                "_account_id": 7,
                "name": "Jay Pipes",
                "email": "jaypipes@gmail.com",
                "username": "jaypipes"
            },
            "date": "2012-05-30 19:13:44.000000000",
            "message": "Patch Set 4: Looks good to me (core reviewer)\n\nSure, whatever... it's better to be consistent than not. But, what really annoys me is that termie's insistence on keeping the \"config shortcuts\" in Keystone is being placated and yet my issues with the global conf object are ignored. :(",
            "accounts_in_message": [],
            "_revision_number": 4
        },
        {
            "id": "45f6567a7c5d8afcc725d310f82d6a31d9ea479d",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-05-30 21:25:16.000000000",
            "message": "Uploaded patch set 5.",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "3f4b90016ebadf60d9e8f2c5d7d0f3e6e73781bc",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-05-30 21:54:18.000000000",
            "message": "Patch Set 5: Works for me\n\nBuild Successful \n \nhttps://jenkins.openstack.org/job/check-glance-pep8/38/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-merge/38/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-python26/38/ : SUCCESS \nhttps://jenkins.openstack.org/job/check-glance-python27/38/ : SUCCESS",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "d917a3ce6e09ee0413666ec12550da4d39802860",
            "author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "real_author": {
                "_account_id": 2166,
                "name": "SmokeStack CI",
                "username": "smokestack",
                "tags": [
                    "SERVICE_USER"
                ]
            },
            "date": "2012-05-30 22:31:30.000000000",
            "message": "Patch Set 5: Works for me\n\nSmokeStack Results (patch set 5):\n\tUnit Success: http://smokestack.openstack.org/?go=/jobs/21740\n\tLibvirt (Fedora 16) Success: http://smokestack.openstack.org/?go=/jobs/21739\n",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "9fbc88eafcd0d994a78969e717dc5ce894d9bfd8",
            "author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "real_author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "date": "2012-05-31 09:22:43.000000000",
            "message": "Patch Set 5: Looks good to me (core reviewer)\n\n",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "ce17d51f2239da3cde6b11b89abff3431f7c01c2",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-05-31 18:06:17.000000000",
            "message": "Patch Set 5: I would prefer that you didn't merge this\n\nWhy do we need to define a module-level CONF everywhere we import the cfg module? Why not just reference cfg.CONF directly?",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "31eb87c0e405d31960ef01789293c3274bd1c099",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-05-31 18:32:15.000000000",
            "message": "Patch Set 5:\n\n> Why do we need to define a module-level CONF everywhere we import the cfg module? Why not just reference cfg.CONF directly?\n\nFair question, it seems to just be the pattern\n\nYou can see it being copied in Nova with QUOTAS. You see it with BASE in glance.registry.db.api too",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "f2f12c6b3742b5719772179ce567386706ad49da",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-05-31 18:43:27.000000000",
            "message": "Patch Set 5:\n\nI don't think there's much sense in the pattern if you aren't doing any work with it. It makes sense for LOG, where a logger is created, saving a getLogger call all over the code. It also makes sense for assigning a shorter alias to a long module path. In this case, we already have a short module path 'cfg.CONF'. I would prefer if that part of this patch were removed.",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "f913e480f606cfb1454b69e9cef56faaf0463598",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-05-31 20:00:06.000000000",
            "message": "Patch Set 5:\n\n> I don't think there's much sense in the pattern if you aren't doing any work with it. It makes sense for LOG, where a logger is created, saving a getLogger call all over the code. It also makes sense for assigning a shorter alias to a long module path. In this case, we already have a short module path 'cfg.CONF'. I would prefer if that part of this patch were removed.\n\nAs discussed, the whole point of what we're doing here is trying to get to a common pattern across OpenStack. Why adopt the common pattern in glance and then have it be arbitrarily slightly different?\n\ni.e. I'd be very happy for you to later put forward those arguments and propose s/CONF/cfg.CONF/ patches for the core projects, but I'd be very sad if glance had cfg.CONF and other projects had CONF for fairly minor reasons",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "b1de40618a8f74910f42eee7e9fab3328b43a1f9",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-06-01 18:23:26.000000000",
            "message": "Patch Set 5:\n\nWhy is adding an arbitrary line of code something we need to duplicate? These are independent projects being run by somewhat independent groups of people. We don't need to do things in this project just because we do in another. Why should Glance be required to conform to whatever nova-core approves?",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "006350f726f48e661e41317370133746cc7c2c23",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-06-03 08:56:03.000000000",
            "message": "Patch Set 5:\n\nWhy be arbitrarily different?\n\nWhat do you think it says about OpenStack if we have to tell contributors \"type CONF in project A, B and C but type cfg.CONF in project D\"?\n\nI'm not trying to \"require\" Glance to \"conform\" to anything. I just think this kind of arbitrary deviation from the idiom used by other projects is downright silly.",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "cca56086d415afb445c68bd05e69a1fb9b5e4bb8",
            "author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "real_author": {
                "_account_id": 1132,
                "name": "Brian Waldon",
                "email": "brian@waldon.cc",
                "username": "bcwaldon"
            },
            "date": "2012-06-04 19:03:58.000000000",
            "message": "Patch Set 5: Looks good to me (core reviewer); Approved\n\nI'm about done arguing over this...\n\nI'm not asking for an arbitrary difference. I've clearly explained why it is objectively better to leave out the 'CONF = cfg.CONF' lines. This is not just a personal preference.\n\nWith that said, I'm going to approve this so you can move on with any other work.",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "f5de31d783f1919a5274b1852969e702bf69566b",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-06-04 20:02:44.000000000",
            "message": "Patch Set 5: Fails\n\nBuild Failed \n \nhttps://jenkins.openstack.org/job/gate-integration-tests-devstack-vm/4508/ : FAILURE \nhttps://jenkins.openstack.org/job/gate-glance-merge/703/ : This change was unable to be automatically merged with the current state of the repository. Please rebase your change and upload a new patchset. \nhttps://jenkins.openstack.org/job/gate-glance-pep8/888/ : FAILURE \nhttps://jenkins.openstack.org/job/gate-glance-python26/397/ : FAILURE \nhttps://jenkins.openstack.org/job/gate-glance-python27/399/ : FAILURE",
            "accounts_in_message": [],
            "_revision_number": 5
        },
        {
            "id": "aae626fe246d6bf454b5cadd04b393509710418d",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-06-05 21:15:21.000000000",
            "message": "Uploaded patch set 6.",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "c776becd37e2d94080896a82e972c434670a9393",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-06-05 21:19:31.000000000",
            "message": "Patch Set 6:\n\nThanks Brian.\n\nJust to clarify - \"arbitrary difference\" was not about whether your comment made sense or not, it was about how arbitrary \"these projects do it this way and that project it does it that way\" would appear to new contributors",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "7748da03dc4cc1aadf9328c6b30a0842d234fbd2",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-06-05 21:30:25.000000000",
            "message": "Patch Set 6: Doesn't seem to work\n\nBuild failed\n\n- https://jenkins.openstack.org/job/gate-glance-merge/708/ : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/892/ : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/401/ : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/403/ : SUCCESS\n- https://jenkins.openstack.org/job/gate-integration-tests-devstack-vm/4553/ : FAILURE\n",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "d506bf65756f2ce500dd237e7fe610ffe0586f70",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-06-05 22:49:42.000000000",
            "message": "Patch Set 6:\n\nHmm, euca test says:\n\n  server didn't become active within 150 seconds\n\nOnly promising error in the logs I see are:\n\n  2012-06-05 21:25:08 ERROR nova.image.s3 [req-488ff601-9e36-474f-879a-47f7e33fe6d2 fcf57276cc3040938d6b1ea0fe244e32 84cb5b28a5354e099c539c760c4c321d] Failed to upload testbucket/bundle.img.manifest.xml to /tmp/tmpjabHfI\n  ...\n  ImageNotFound: Image efb0f495-a152-43e1-8a8a-ad4ab454e1a6 could not be found.",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "58284a624654c15e654c2bc24598a723052fe18c",
            "author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "real_author": {
                "_account_id": 1247,
                "name": "Mark McLoughlin",
                "email": "markmc@redhat.com",
                "username": "markmc"
            },
            "date": "2012-06-05 22:51:53.000000000",
            "message": "Patch Set 6:\n\nHmm, that ImageNotFound error is seen in successful runs too",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "2bff82c30ec7c95a8ae63166b6c94a9b8c99f59e",
            "author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "real_author": {
                "_account_id": 2284,
                "name": "Eoghan Glynn",
                "email": "eglynn@redhat.com",
                "username": "eglynn"
            },
            "date": "2012-06-06 12:32:12.000000000",
            "message": "Patch Set 6: Looks good to me (core reviewer); Approved\n\nLets unleash the Jenkins on this once more to rule out a transient issue in devstack.",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "a061820bd2bcf2105e5c48ab5589072641fab0f1",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-06-06 12:43:53.000000000",
            "message": "Change has been successfully merged into the git repository.",
            "accounts_in_message": [],
            "_revision_number": 6
        },
        {
            "id": "8d50565729dae83803876da76aa6111b8b6b8a7f",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2012-06-06 12:43:53.000000000",
            "message": "Patch Set 6: Verified\n\nBuild successful\n\n- https://jenkins.openstack.org/job/gate-glance-merge/713/ : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-pep8/898/ : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python26/407/ : SUCCESS\n- https://jenkins.openstack.org/job/gate-glance-python27/409/ : SUCCESS\n- https://jenkins.openstack.org/job/gate-integration-tests-devstack-vm/4582/ : SUCCESS\n",
            "accounts_in_message": [],
            "_revision_number": 6
        }
    ],
    "requirements": [],
    "submit_records": []
}