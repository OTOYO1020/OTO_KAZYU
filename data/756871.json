{
    "id": "openstack%2Fglance~stable%2Fussuri~I6df065cbae90e855809044efab02f8d21f74de48",
    "project": "openstack/glance",
    "branch": "stable/ussuri",
    "hashtags": [],
    "change_id": "I6df065cbae90e855809044efab02f8d21f74de48",
    "subject": "Add warnings that running under wsgi/uwsgi is not production ready",
    "status": "ABANDONED",
    "created": "2020-10-08 15:40:17.000000000",
    "updated": "2020-10-08 18:23:53.000000000",
    "insertions": 3,
    "deletions": 0,
    "total_comment_count": 0,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "52719e8fcd02fff0c38cca6f35e0942e46eebe9d",
    "_number": 756871,
    "owner": {
        "_account_id": 14525,
        "name": "Vasyl Saienko",
        "email": "vsaienko@mirantis.com",
        "username": "vsaienko"
    },
    "labels": {
        "Verified": {
            "all": [
                {
                    "date": "2020-10-08 18:23:45.000000000",
                    "_account_id": 14525,
                    "name": "Vasyl Saienko",
                    "email": "vsaienko@mirantis.com",
                    "username": "vsaienko"
                },
                {
                    "_account_id": 4393,
                    "name": "Dan Smith",
                    "email": "dms@danplanet.com",
                    "username": "danms"
                },
                {
                    "_account_id": 11904,
                    "name": "Sean McGinnis",
                    "email": "sean.mcginnis@gmail.com",
                    "username": "SeanM"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "rejected": {
                "_account_id": 11904,
                "name": "Sean McGinnis",
                "email": "sean.mcginnis@gmail.com",
                "username": "SeanM"
            },
            "all": [
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 14525,
                    "name": "Vasyl Saienko",
                    "email": "vsaienko@mirantis.com",
                    "username": "vsaienko"
                },
                {
                    "value": -1,
                    "date": "2020-10-08 15:49:31.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 4393,
                    "name": "Dan Smith",
                    "email": "dms@danplanet.com",
                    "username": "danms"
                },
                {
                    "value": -2,
                    "date": "2020-10-08 15:43:22.000000000",
                    "permitted_voting_range": {
                        "min": -2,
                        "max": 2
                    },
                    "_account_id": 11904,
                    "name": "Sean McGinnis",
                    "email": "sean.mcginnis@gmail.com",
                    "username": "SeanM"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "all": [
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 0
                    },
                    "_account_id": 14525,
                    "name": "Vasyl Saienko",
                    "email": "vsaienko@mirantis.com",
                    "username": "vsaienko"
                },
                {
                    "_account_id": 4393,
                    "name": "Dan Smith",
                    "email": "dms@danplanet.com",
                    "username": "danms"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 11904,
                    "name": "Sean McGinnis",
                    "email": "sean.mcginnis@gmail.com",
                    "username": "SeanM"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "_account_id": 14525,
                    "name": "Vasyl Saienko",
                    "email": "vsaienko@mirantis.com",
                    "username": "vsaienko"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 2
                    },
                    "_account_id": 4393,
                    "name": "Dan Smith",
                    "email": "dms@danplanet.com",
                    "username": "danms"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 2
                    },
                    "_account_id": 11904,
                    "name": "Sean McGinnis",
                    "email": "sean.mcginnis@gmail.com",
                    "username": "SeanM"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 4393,
                "name": "Dan Smith",
                "email": "dms@danplanet.com",
                "username": "danms"
            },
            {
                "_account_id": 11904,
                "name": "Sean McGinnis",
                "email": "sean.mcginnis@gmail.com",
                "username": "SeanM"
            },
            {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2020-10-08 15:43:22.000000000",
            "updated_by": {
                "_account_id": 11904,
                "name": "Sean McGinnis",
                "email": "sean.mcginnis@gmail.com",
                "username": "SeanM"
            },
            "reviewer": {
                "_account_id": 11904,
                "name": "Sean McGinnis",
                "email": "sean.mcginnis@gmail.com",
                "username": "SeanM"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2020-10-08 15:49:31.000000000",
            "updated_by": {
                "_account_id": 4393,
                "name": "Dan Smith",
                "email": "dms@danplanet.com",
                "username": "danms"
            },
            "reviewer": {
                "_account_id": 4393,
                "name": "Dan Smith",
                "email": "dms@danplanet.com",
                "username": "danms"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "5301990998aa58a50707daabc5af9a1fe8c9e958",
            "author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "real_author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "date": "2020-10-08 15:40:17.000000000",
            "message": "Patch Set 1: Cherry Picked from branch master.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "d973674ed363b3046c66887fb309244082317481",
            "author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "real_author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "date": "2020-10-08 15:40:26.000000000",
            "message": "Patch Set 1: Cherry Picked\n\nThis patchset was cherry picked to branch stable/train as commit e26f7685a712ff8b186e5917715d0936561ca70e",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "105c64b50c3e468e5d5ddbab73b186f910fc3af5",
            "author": {
                "_account_id": 11904,
                "name": "Sean McGinnis",
                "email": "sean.mcginnis@gmail.com",
                "username": "SeanM"
            },
            "real_author": {
                "_account_id": 11904,
                "name": "Sean McGinnis",
                "email": "sean.mcginnis@gmail.com",
                "username": "SeanM"
            },
            "date": "2020-10-08 15:43:22.000000000",
            "message": "Patch Set 1: Code-Review-2\n\nNeed proper cherry-pick metadata in the commit message and needs to be merged to more recent branches first. Since the master branch patch has a -2, I doubt we want to proceed with this.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "fe05805ae89a06da430350f63e5b16d19d15b27f",
            "author": {
                "_account_id": 4393,
                "name": "Dan Smith",
                "email": "dms@danplanet.com",
                "username": "danms"
            },
            "real_author": {
                "_account_id": 4393,
                "name": "Dan Smith",
                "email": "dms@danplanet.com",
                "username": "danms"
            },
            "date": "2020-10-08 15:49:31.000000000",
            "message": "Patch Set 1: Code-Review-1\n\nI'm also not in favor of this, for a couple reasons. First, it claims that wsgi mode is not production-ready, yet we know production deployments are running it. Second, in ussuri, glance was *only* tested under wsgi mode, as that's how all the devstack jobs were configured. Third, logging a warning at error level is not appropriate, and not in line with our logging guidelines.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "98d358a53f1d0857e32fd28bff750d635c215d88",
            "author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "real_author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "date": "2020-10-08 18:02:18.000000000",
            "message": "Patch Set 1:\n\n> I'm also not in favor of this, for a couple reasons. First, it\n > claims that wsgi mode is not production-ready, yet we know\n > production deployments are running it. Second, in ussuri, glance\n > was *only* tested under wsgi mode, as that's how all the devstack\n > jobs were configured. Third, logging a warning at error level is\n > not appropriate, and not in line with our logging guidelines.\n\nThis patch just highlights was is written in documentation https://docs.openstack.org/glance/train/admin/apache-httpd.html. And warn users directly, as we all know that reading all places of docs is not realistic. If we know what doesn't work, IMO better to warn user especially if it impacts service workability (some parts of API - import/tasks doesn't work at all).\nRegarding wsgi tesability - the image import was explicitly disabled, and wasn't working in U cycle https://review.opendev.org/740322, especially when there are no tempest tests that test image import feature.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "bcabeb1cead27b1ee69cdcaafd93b09124e8edbf",
            "author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "real_author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "date": "2020-10-08 18:08:14.000000000",
            "message": "Patch Set 1:\n\n> > I'm also not in favor of this, for a couple reasons. First, it\n > > claims that wsgi mode is not production-ready, yet we know\n > > production deployments are running it. Second, in ussuri, glance\n > > was *only* tested under wsgi mode, as that's how all the devstack\n > > jobs were configured. Third, logging a warning at error level is\n > > not appropriate, and not in line with our logging guidelines.\n > \n > This patch just highlights was is written in documentation\n > https://docs.openstack.org/glance/train/admin/apache-httpd.html.\n > And warn users directly, as we all know that reading all places of\n > docs is not realistic. If we know what doesn't work, IMO better to\n > warn user especially if it impacts service workability (some parts\n > of API - import/tasks doesn't work at all).\n > Regarding wsgi tesability - the image import was explicitly\n > disabled, and wasn't working in U cycle https://review.opendev.org/740322,\n > especially when there are no tempest tests that test image import\n > feature.\n\nAlternative option here is to update release notes for ussuri and add this limitation into known issues section. what do you think?",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "02786f0db60e8cffa959ee26faed6e33de897508",
            "author": {
                "_account_id": 4393,
                "name": "Dan Smith",
                "email": "dms@danplanet.com",
                "username": "danms"
            },
            "real_author": {
                "_account_id": 4393,
                "name": "Dan Smith",
                "email": "dms@danplanet.com",
                "username": "danms"
            },
            "date": "2020-10-08 18:11:33.000000000",
            "message": "Patch Set 1:\n\n> > > I'm also not in favor of this, for a couple reasons. First, it\n > > > claims that wsgi mode is not production-ready, yet we know\n > > > production deployments are running it. Second, in ussuri,\n > glance\n > > > was *only* tested under wsgi mode, as that's how all the\n > devstack\n > > > jobs were configured. Third, logging a warning at error level\n > is\n > > > not appropriate, and not in line with our logging guidelines.\n > >\n > > This patch just highlights was is written in documentation\n > > https://docs.openstack.org/glance/train/admin/apache-httpd.html.\n > > And warn users directly, as we all know that reading all places\n > of\n > > docs is not realistic. If we know what doesn't work, IMO better\n > to\n > > warn user especially if it impacts service workability (some\n > parts\n > > of API - import/tasks doesn't work at all).\n > > Regarding wsgi tesability - the image import was explicitly\n > > disabled, and wasn't working in U cycle https://review.opendev.org/740322,\n > > especially when there are no tempest tests that test image import\n > > feature.\n\nLogging an error because one infrequently-used feature is not supported isn't reasonable. I've already proposed making sure that the import feature is disabled when in wsgi mode and that patch was rejected:\n\nhttps://review.opendev.org/#/c/741497/\n\nThat tells me that the glance team is fine relying on documentation to indicate that import under wsgi is not supported in these releases.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "830cd8e2aa75a59d73795562f2c3aee305484593",
            "author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "real_author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "date": "2020-10-08 18:23:45.000000000",
            "message": "Patch Set 1:\n\n> > > > I'm also not in favor of this, for a couple reasons. First,\n > it\n > > > > claims that wsgi mode is not production-ready, yet we know\n > > > > production deployments are running it. Second, in ussuri,\n > > glance\n > > > > was *only* tested under wsgi mode, as that's how all the\n > > devstack\n > > > > jobs were configured. Third, logging a warning at error level\n > > is\n > > > > not appropriate, and not in line with our logging guidelines.\n > > >\n > > > This patch just highlights was is written in documentation\n > > > https://docs.openstack.org/glance/train/admin/apache-httpd.html.\n > > > And warn users directly, as we all know that reading all places\n > > of\n > > > docs is not realistic. If we know what doesn't work, IMO better\n > > to\n > > > warn user especially if it impacts service workability (some\n > > parts\n > > > of API - import/tasks doesn't work at all).\n > > > Regarding wsgi tesability - the image import was explicitly\n > > > disabled, and wasn't working in U cycle https://review.opendev.org/740322,\n > > > especially when there are no tempest tests that test image\n > import\n > > > feature.\n > \n > Logging an error because one infrequently-used feature is not\n > supported isn't reasonable. I've already proposed making sure that\n > the import feature is disabled when in wsgi mode and that patch was\n > rejected:\n > \n > https://review.opendev.org/#/c/741497/\n > \n > That tells me that the glance team is fine relying on documentation\n > to indicate that import under wsgi is not supported in these\n > releases.\n\nUnderstood, thanks!",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "52719e8fcd02fff0c38cca6f35e0942e46eebe9d",
            "author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "real_author": {
                "_account_id": 14525,
                "name": "Vasyl Saienko",
                "email": "vsaienko@mirantis.com",
                "username": "vsaienko"
            },
            "date": "2020-10-08 18:23:53.000000000",
            "message": "Abandoned",
            "accounts_in_message": [],
            "_revision_number": 1
        }
    ],
    "requirements": [],
    "submit_records": []
}