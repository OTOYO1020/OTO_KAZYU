{
    "id": "openstack%2Fglance~master~I22685f98951286943d3ce87a617e82f28a342c47",
    "project": "openstack/glance",
    "branch": "master",
    "topic": "add_enpoint",
    "hashtags": [],
    "change_id": "I22685f98951286943d3ce87a617e82f28a342c47",
    "subject": "Add endpoint type for image cache command",
    "status": "ABANDONED",
    "created": "2016-10-31 14:37:37.000000000",
    "updated": "2017-05-15 09:20:18.000000000",
    "insertions": 40,
    "deletions": 12,
    "total_comment_count": 4,
    "unresolved_comment_count": 0,
    "has_review_started": true,
    "meta_rev_id": "f43859bc9ae91004c540ea07cc6bdd0b0682b8ae",
    "_number": 391859,
    "owner": {
        "_account_id": 14676,
        "name": "Kairat Kushaev",
        "email": "kkushaev@mirantis.com",
        "username": "kairat_kushaev"
    },
    "labels": {
        "Verified": {
            "disliked": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "all": [
                {
                    "_account_id": 8158,
                    "name": "Hemanth Makkapati",
                    "email": "makstacker+osgerrit@gmail.com",
                    "username": "hemanth.makkapati"
                },
                {
                    "date": "2016-11-02 17:58:36.000000000",
                    "_account_id": 14676,
                    "name": "Kairat Kushaev",
                    "email": "kkushaev@mirantis.com",
                    "username": "kairat_kushaev"
                },
                {
                    "_account_id": 12000,
                    "name": "Ian Cordasco",
                    "email": "sigmavirus24@gmail.com",
                    "username": "sigmavirus24"
                },
                {
                    "value": -1,
                    "date": "2016-11-02 17:10:54.000000000",
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Fails",
                "-1": "Doesn't seem to work",
                " 0": "No score",
                "+1": "Works for me",
                "+2": "Verified"
            },
            "description": "",
            "value": -1,
            "default_value": 0,
            "optional": true
        },
        "Code-Review": {
            "rejected": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "all": [
                {
                    "value": -2,
                    "date": "2016-11-02 19:05:37.000000000",
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 8158,
                    "name": "Hemanth Makkapati",
                    "email": "makstacker+osgerrit@gmail.com",
                    "username": "hemanth.makkapati"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 14676,
                    "name": "Kairat Kushaev",
                    "email": "kkushaev@mirantis.com",
                    "username": "kairat_kushaev"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 12000,
                    "name": "Ian Cordasco",
                    "email": "sigmavirus24@gmail.com",
                    "username": "sigmavirus24"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 1
                    },
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-2": "Do not merge",
                "-1": "This patch needs further work before it can be merged",
                " 0": "No score",
                "+1": "Looks good to me, but someone else must approve",
                "+2": "Looks good to me (core reviewer)"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Workflow": {
            "all": [
                {
                    "_account_id": 8158,
                    "name": "Hemanth Makkapati",
                    "email": "makstacker+osgerrit@gmail.com",
                    "username": "hemanth.makkapati"
                },
                {
                    "value": 0,
                    "permitted_voting_range": {
                        "min": -1,
                        "max": 0
                    },
                    "_account_id": 14676,
                    "name": "Kairat Kushaev",
                    "email": "kkushaev@mirantis.com",
                    "username": "kairat_kushaev"
                },
                {
                    "_account_id": 12000,
                    "name": "Ian Cordasco",
                    "email": "sigmavirus24@gmail.com",
                    "username": "sigmavirus24"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Work in progress",
                " 0": "Ready for reviews",
                "+1": "Approved"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        },
        "Review-Priority": {
            "all": [
                {
                    "_account_id": 8158,
                    "name": "Hemanth Makkapati",
                    "email": "makstacker+osgerrit@gmail.com",
                    "username": "hemanth.makkapati"
                },
                {
                    "_account_id": 14676,
                    "name": "Kairat Kushaev",
                    "email": "kkushaev@mirantis.com",
                    "username": "kairat_kushaev"
                },
                {
                    "_account_id": 12000,
                    "name": "Ian Cordasco",
                    "email": "sigmavirus24@gmail.com",
                    "username": "sigmavirus24"
                },
                {
                    "_account_id": 3,
                    "name": "Jenkins",
                    "username": "jenkins"
                }
            ],
            "values": {
                "-1": "Branch Freeze",
                " 0": "No Priority",
                "+1": "Important Change",
                "+2": "Top Priority / Holds Gate"
            },
            "description": "",
            "default_value": 0,
            "optional": true
        }
    },
    "removable_reviewers": [],
    "reviewers": {
        "REVIEWER": [
            {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            }
        ]
    },
    "pending_reviewers": {},
    "reviewer_updates": [
        {
            "updated": "2016-11-01 14:56:08.000000000",
            "updated_by": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "reviewer": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-11-02 17:10:54.000000000",
            "updated_by": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "reviewer": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "state": "REVIEWER"
        },
        {
            "updated": "2016-11-02 19:05:37.000000000",
            "updated_by": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "reviewer": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "state": "REVIEWER"
        }
    ],
    "messages": [
        {
            "id": "adf5424e545124570649d8c4a4c6a487cf58fbea",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-10-31 14:37:37.000000000",
            "message": "Uploaded patch set 1.",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "3a02ac29d53054e952e0923fe098dcc44d4f054e",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-10-31 14:37:58.000000000",
            "message": "Patch Set 1: Workflow-1",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "1865f0357f8433eabebfc661d20fc950ef869a1d",
            "author": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "real_author": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "date": "2016-10-31 14:50:15.000000000",
            "message": "Patch Set 1: Code-Review-1\n\n(2 comments)",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "397ddb8adb323e9f8347093d06999c8083b9a19e",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2016-10-31 15:47:06.000000000",
            "message": "Patch Set 1: Verified-1\n\nBuild failed (check pipeline).  For information on how to proceed, see http://docs.openstack.org/infra/manual/developers.html#automated-testing\n\n- gate-glance-python34-db http://logs.openstack.org/59/391859/1/check/gate-glance-python34-db/212025f/ : FAILURE in 2m 33s\n- gate-glance-python35-db-nv http://logs.openstack.org/59/391859/1/check/gate-glance-python35-db-nv/6a9cb49/ : FAILURE in 45m 22s (non-voting)\n- gate-glance-docs-ubuntu-xenial http://logs.openstack.org/59/391859/1/check/gate-glance-docs-ubuntu-xenial/b1cdc4a/ : FAILURE in 3m 38s\n- gate-glance-pep8-ubuntu-xenial http://logs.openstack.org/59/391859/1/check/gate-glance-pep8-ubuntu-xenial/77b7d29/ : SUCCESS in 2m 12s\n- gate-glance-python27-db-ubuntu-xenial http://logs.openstack.org/59/391859/1/check/gate-glance-python27-db-ubuntu-xenial/b00f0bb/ : FAILURE in 9m 28s\n- gate-tempest-dsvm-neutron-full-ubuntu-xenial http://logs.openstack.org/59/391859/1/check/gate-tempest-dsvm-neutron-full-ubuntu-xenial/8e9068b/ : SUCCESS in 1h 08m 36s\n- gate-grenade-dsvm-neutron-ubuntu-xenial http://logs.openstack.org/59/391859/1/check/gate-grenade-dsvm-neutron-ubuntu-xenial/43084e7/ : SUCCESS in 29m 22s\n- gate-tempest-dsvm-full-devstack-plugin-ceph-ubuntu-xenial http://logs.openstack.org/59/391859/1/check/gate-tempest-dsvm-full-devstack-plugin-ceph-ubuntu-xenial/de8f31f/ : SUCCESS in 1h 00m 33s\n- gate-tempest-dsvm-neutron-identity-v3-only-full-ubuntu-xenial-nv http://logs.openstack.org/59/391859/1/check/gate-tempest-dsvm-neutron-identity-v3-only-full-ubuntu-xenial-nv/b8f69f4/ : SUCCESS in 44m 05s (non-voting)\n- gate-rally-dsvm-glance http://logs.openstack.org/59/391859/1/check/gate-rally-dsvm-glance/fb50881/ : SUCCESS in 25m 55s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 1
        },
        {
            "id": "eb36cf09f9f079f1990cc081edb458cd145be8c7",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-11-01 08:38:43.000000000",
            "message": "Uploaded patch set 2.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "cad3693cb2bb028dc0e9614d21ab2cdc814dca5e",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2016-11-01 09:44:44.000000000",
            "message": "Patch Set 2: Verified-1\n\nBuild failed (check pipeline).  For information on how to proceed, see http://docs.openstack.org/infra/manual/developers.html#automated-testing\n\n- gate-glance-python34-db http://logs.openstack.org/59/391859/2/check/gate-glance-python34-db/01f0707/ : SUCCESS in 2m 49s\n- gate-glance-python35-db-nv http://logs.openstack.org/59/391859/2/check/gate-glance-python35-db-nv/dc0d5c8/ : FAILURE in 45m 16s (non-voting)\n- gate-glance-docs-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-glance-docs-ubuntu-xenial/842dd64/ : FAILURE in 2m 07s\n- gate-glance-pep8-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-glance-pep8-ubuntu-xenial/644c28e/ : SUCCESS in 2m 11s\n- gate-glance-python27-db-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-glance-python27-db-ubuntu-xenial/e1e5756/ : SUCCESS in 7m 06s\n- gate-tempest-dsvm-neutron-full-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-tempest-dsvm-neutron-full-ubuntu-xenial/7b6cb52/ : SUCCESS in 43m 45s\n- gate-grenade-dsvm-neutron-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-grenade-dsvm-neutron-ubuntu-xenial/8dc4d49/ : SUCCESS in 36m 55s\n- gate-tempest-dsvm-full-devstack-plugin-ceph-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-tempest-dsvm-full-devstack-plugin-ceph-ubuntu-xenial/903c753/ : SUCCESS in 56m 15s\n- gate-tempest-dsvm-neutron-identity-v3-only-full-ubuntu-xenial-nv http://logs.openstack.org/59/391859/2/check/gate-tempest-dsvm-neutron-identity-v3-only-full-ubuntu-xenial-nv/5f037e4/ : SUCCESS in 1h 05m 16s (non-voting)\n- gate-rally-dsvm-glance http://logs.openstack.org/59/391859/2/check/gate-rally-dsvm-glance/a44c3ba/ : SUCCESS in 25m 50s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "704425bc201fc7a0d9f8bef46b9d354e8b57fd31",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-11-01 14:28:40.000000000",
            "message": "Patch Set 2:\n\nrecheck",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "4b1f9ad0ba08cf6de050cc92e15c2192c4cb3b4c",
            "author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "real_author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "date": "2016-11-01 14:44:18.000000000",
            "message": "Patch Set 2:\n\nI'm a tad confused and pardon me if I sound ignorant here.\n\nWhy do we want image cache commands to talk to any particular glance endpoint? Glance cache is local to each node, so it only makes sense that cache management be performed on each node individually. What are we connecting to the glance (internal) endpoint for?\n\nWhat am I missing here?",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "d473de7507c24888e3e45ad6cdbd23c9086fad99",
            "author": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "real_author": {
                "_account_id": 12000,
                "name": "Ian Cordasco",
                "email": "sigmavirus24@gmail.com",
                "username": "sigmavirus24"
            },
            "date": "2016-11-01 14:56:08.000000000",
            "message": "Patch Set 2: Code-Review-1\n\n(1 comment)\n\nThat's a good question Hemanth. I'd like to understand what the reporter means by \"Not working\"",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "28b17501303ce7424d29fc04326e453df6718d3d",
            "author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "real_author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "date": "2016-11-01 15:07:51.000000000",
            "message": "Patch Set 2: Code-Review-1\n\n> I'm a tad confused and pardon me if I sound ignorant here.\n > \n > Why do we want image cache commands to talk to any particular\n > glance endpoint? Glance cache is local to each node, so it only\n > makes sense that cache management be performed on each node\n > individually. What are we connecting to the glance (internal)\n > endpoint for?\n > \n > What am I missing here?\n\nLooking further, we take a specific host and port here [0] to connect to a particular Glance API host, which makes sense to me. So, I'm thinking that this change is orthogonal to how cache manage is expected to work. \n\nIn addition, I'm wondering whether there is a bug here [1]. We don't pass \"configure_via_auth=False\" here. This overrides the host and port in the base client with what is fetched from the Glance endpoint. Please see [2] and [3].\n\n\nLet me know what you think.\n\n[0] https://github.com/openstack/glance/blob/stable/mitaka/glance/cmd/cache_manage.py#L311-L317\n[1] https://github.com/openstack/glance/blob/stable/mitaka/glance/image_cache/client.py#L123-L131\n[2] https://github.com/openstack/glance/blob/stable/mitaka/glance/common/client.py#L348-L349\n[3] https://github.com/openstack/glance/blob/stable/mitaka/glance/common/client.py#L300-L301",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "63ae17bf0bd19c6a9eab864715443d9b755fc389",
            "author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "real_author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "date": "2016-11-01 15:08:13.000000000",
            "message": "Patch Set 2:\n\n(1 comment)",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "27776e2839549982d2b43fa81de2dbfe8f3eea6d",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2016-11-01 15:27:43.000000000",
            "message": "Patch Set 2:\n\nBuild failed (check pipeline).  For information on how to proceed, see http://docs.openstack.org/infra/manual/developers.html#automated-testing\n\n- gate-glance-python34-db http://logs.openstack.org/59/391859/2/check/gate-glance-python34-db/273f028/ : SUCCESS in 3m 03s\n- gate-glance-python35-db-nv http://logs.openstack.org/59/391859/2/check/gate-glance-python35-db-nv/cc202b0/ : FAILURE in 45m 23s (non-voting)\n- gate-glance-docs-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-glance-docs-ubuntu-xenial/812274c/ : FAILURE in 2m 10s\n- gate-glance-pep8-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-glance-pep8-ubuntu-xenial/1c44688/ : SUCCESS in 2m 16s\n- gate-glance-python27-db-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-glance-python27-db-ubuntu-xenial/accb454/ : SUCCESS in 14m 00s\n- gate-tempest-dsvm-neutron-full-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-tempest-dsvm-neutron-full-ubuntu-xenial/2a654d1/ : SUCCESS in 58m 08s\n- gate-grenade-dsvm-neutron-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-grenade-dsvm-neutron-ubuntu-xenial/45f2cc6/ : SUCCESS in 28m 48s\n- gate-tempest-dsvm-full-devstack-plugin-ceph-ubuntu-xenial http://logs.openstack.org/59/391859/2/check/gate-tempest-dsvm-full-devstack-plugin-ceph-ubuntu-xenial/f506eae/ : SUCCESS in 42m 35s\n- gate-tempest-dsvm-neutron-identity-v3-only-full-ubuntu-xenial-nv http://logs.openstack.org/59/391859/2/check/gate-tempest-dsvm-neutron-identity-v3-only-full-ubuntu-xenial-nv/f50558b/ : SUCCESS in 44m 52s (non-voting)\n- gate-rally-dsvm-glance http://logs.openstack.org/59/391859/2/check/gate-rally-dsvm-glance/106e9b2/ : SUCCESS in 26m 31s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "6f8754aadca427a0c44eaef4242debdfa5af9e08",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-11-02 15:59:54.000000000",
            "message": "Patch Set 2:\n\nSorry, for late reply.\nIIUC, we have two options to get endpoint: \n1) specify it directly with -H -p\n2) get the value from service catalog\nThese two approaches are orthogonal but valid user cases. AFAIU #1 doesn't work at the current moment because we always pass configure_via_auth=True -> always get the value from service catalog.\nI am not going to fix at the current patch to be honest - I would like to fix the current behavior.\nSo assume we always get the address from service catalog we have the following use case in one of our envs:\n1) publicURL configured to be available outside Openstack Deployment only, it has also https enabled for security\n2) internalURL is available from deployment only, so it is available from controller and all services communicates with internalURLs (no https). It seems that it fits the idea of endpoint types.\nSo since cache manage cannot be used outside controller we need to use internalURL and that's why the case is raised. I hope you get the idea, otherwise I can try to gain more details for you.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "430862c924bb5d4498630adab39b16260442583e",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-11-02 16:00:12.000000000",
            "message": "Patch Set 2:\n\nIan, I'll update the patch very soon.",
            "accounts_in_message": [],
            "_revision_number": 2
        },
        {
            "id": "0de82ad33b3a30aa631f0a7046bb1181123f28f9",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-11-02 16:00:44.000000000",
            "message": "Uploaded patch set 3.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "d194649d27da29178df7ea59195004aef413f1ae",
            "author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "real_author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "date": "2016-11-02 16:11:18.000000000",
            "message": "Patch Set 3: Code-Review-1\n\nI agree that we shouldn't be fixing the configure_via_auth issue in this patch. However, I'm still unclear as to why we want to use an endpoint here? \n\nLet's assume that we go ahead with this patch and start using the internalURL. When you hit the internalURL, you are likely going to hit a loadbalancer, which then routes the request to one of the nodes. This means that we don't know what node we are getting routed to and hence we don't know what cache we are managing here. What we are attempting here works only when there is just one node pointed by the internalURL.\n\nEssentially my point here is this: Glance image cache is individual/local to each Glance node. And, cache should be managed on each node individually/locally. Hence, we shouldn't be talking to any endpoint irrespective of whether it is public, internal or admin.\n\nLet me know if I'm misunderstanding you here.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "f2697b3afa209725771c187b0e62e8282e66b440",
            "author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "real_author": {
                "_account_id": 3,
                "name": "Jenkins",
                "username": "jenkins"
            },
            "date": "2016-11-02 17:10:54.000000000",
            "message": "Patch Set 3: Verified-1\n\nBuild failed (check pipeline).  For information on how to proceed, see http://docs.openstack.org/infra/manual/developers.html#automated-testing\n\n- gate-glance-python34-db http://logs.openstack.org/59/391859/3/check/gate-glance-python34-db/cbe988e/ : SUCCESS in 5m 35s\n- gate-glance-python35-db-nv http://logs.openstack.org/59/391859/3/check/gate-glance-python35-db-nv/45c7939/ : FAILURE in 45m 42s (non-voting)\n- gate-glance-docs-ubuntu-xenial http://logs.openstack.org/59/391859/3/check/gate-glance-docs-ubuntu-xenial/c17ca2a/ : FAILURE in 3m 41s\n- gate-glance-pep8-ubuntu-xenial http://logs.openstack.org/59/391859/3/check/gate-glance-pep8-ubuntu-xenial/ef631a6/ : SUCCESS in 4m 09s\n- gate-glance-python27-db-ubuntu-xenial http://logs.openstack.org/59/391859/3/check/gate-glance-python27-db-ubuntu-xenial/6e48ebd/ : SUCCESS in 6m 48s\n- gate-tempest-dsvm-neutron-full-ubuntu-xenial http://logs.openstack.org/59/391859/3/check/gate-tempest-dsvm-neutron-full-ubuntu-xenial/91488ea/ : SUCCESS in 45m 26s\n- gate-grenade-dsvm-neutron-ubuntu-xenial http://logs.openstack.org/59/391859/3/check/gate-grenade-dsvm-neutron-ubuntu-xenial/99a6821/ : SUCCESS in 30m 43s\n- gate-tempest-dsvm-full-devstack-plugin-ceph-ubuntu-xenial http://logs.openstack.org/59/391859/3/check/gate-tempest-dsvm-full-devstack-plugin-ceph-ubuntu-xenial/e4f8a93/ : SUCCESS in 1h 00m 01s\n- gate-tempest-dsvm-neutron-identity-v3-only-full-ubuntu-xenial-nv http://logs.openstack.org/59/391859/3/check/gate-tempest-dsvm-neutron-identity-v3-only-full-ubuntu-xenial-nv/a441ae0/ : SUCCESS in 46m 09s (non-voting)\n- gate-rally-dsvm-glance http://logs.openstack.org/59/391859/3/check/gate-rally-dsvm-glance/06f1d17/ : SUCCESS in 27m 12s (non-voting)",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "e44c334951e21f86d8ace6e5f95123f6fcac9d39",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-11-02 17:58:36.000000000",
            "message": "Patch Set 3:\n\nThe same will happen if we will use publicURL (and we support it by default) - publicURL will also be routed to loadbalancer so we won't know the node we launched cache management. It is even worse in my opinion cause internalURL is more appropriate for such capabilities - it is designed for service interaction inside cloud IIUC. That's why I think that the patch is appropriate.\nI understand that the best way is provide a possibility to pass configure_via_auth=False and use host and port(so always use local) specified but it seems that it requires a separate spec(and patch also).\nI also see the service catalog case to be applicable in 2 cases:\n1 controller per cloud\n1 controller per region (looks like it is our case - need to clarify it additionally) - so we request endpoint from local region.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "de7a5f39a97143ba0a4c218fb197f1acc55306e7",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-11-02 17:59:04.000000000",
            "message": "Patch Set 3:\n\nI also see that our gates are broken=)",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "c4029545c4c6ea8246facccf459f54288b57257f",
            "author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "real_author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "date": "2016-11-02 19:05:37.000000000",
            "message": "Patch Set 3: Code-Review-2\n\n> The same will happen if we will use publicURL (and we support it by\n > default) - publicURL will also be routed to loadbalancer so we\n > won't know the node we launched cache management. It is even worse\n > in my opinion cause internalURL is more appropriate for such\n > capabilities - it is designed for service interaction inside cloud\n > IIUC. That's why I think that the patch is appropriate.\n > I understand that the best way is provide a possibility to pass\n > configure_via_auth=False and use host and port(so always use local)\n > specified but it seems that it requires a separate spec(and patch\n > also).\n > I also see the service catalog case to be applicable in 2 cases:\n > 1 controller per cloud\n > 1 controller per region (looks like it is our case - need to\n > clarify it additionally) - so we request endpoint from local\n > region.\n\nI'm not saying hitting publicURL is correct and, yes, internalURL makes sense over publicURL. However, I don't think either of them are correct. We hit publicURL now because of a bug that (accidentally?) tries to hit the endpoint (which by default happens to be publicURL) instead of the provided host. It doesn't make much sense to augment this bug by making it talk to internalURL.  I suggest fixing the configure_via_auth issue and get rid of endpoint completely from the picture.\n\n1 controller per region/cloud is a valid use-case like you mention. But, I don't think it's special in any way to need a different way of doing things. Why do we want to support a behavior that deterministically works only in a very specific configuration? Is it worth the ambiguity it brings to the general use-case? I don't think so.\n\nI mean no disrespect, but I feel strongly against this, so I'm going to go with a -2. However, I'd be more than willing to withdraw my vote depending upon what other reviewers think.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "fbd06a75ed5fe98e2a69371f7f08e12752fc7afa",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-11-02 21:05:09.000000000",
            "message": "Patch Set 3:\n\nHm, ok, let's see what the other folks say.\nI don't feel any \"desctruction\" if this patch will be merged cause the implementation is partially correct at the current moment (although it is usable in some cases) but if community doesn't want to see this - I just abandon this.",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "aa254fc913af04e165b2ce365760ebf8516c0c9b",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2016-11-03 10:37:56.000000000",
            "message": "Patch Set 3:\n\nAlternative solution is proposed here: https://review.openstack.org/393229",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "3f398c669b1ed058b493a84001e6a40bb9e364a7",
            "author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "real_author": {
                "_account_id": 8158,
                "name": "Hemanth Makkapati",
                "email": "makstacker+osgerrit@gmail.com",
                "username": "hemanth.makkapati"
            },
            "date": "2016-11-15 17:20:22.000000000",
            "message": "Patch Set 3:\n\nKairat,\nIf you agree that this is not required any more, can you abandon this please?",
            "accounts_in_message": [],
            "_revision_number": 3
        },
        {
            "id": "fbb92d9808de6c0ee11a3a4146385298fe705abb",
            "author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "real_author": {
                "_account_id": 14676,
                "name": "Kairat Kushaev",
                "email": "kkushaev@mirantis.com",
                "username": "kairat_kushaev"
            },
            "date": "2017-05-15 09:20:18.000000000",
            "message": "Abandoned",
            "accounts_in_message": [],
            "_revision_number": 3
        }
    ],
    "requirements": [],
    "submit_records": []
}